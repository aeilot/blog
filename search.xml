<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CS188 Search Lecture Notes I</title>
      <link href="/2026/01/24/cs188-search-i/"/>
      <url>/2026/01/24/cs188-search-i/</url>
      
        <content type="html"><![CDATA[<p>Here are the lecture notes for UC Berkeley CS188 Lecture 1 and 2.</p><span id="more"></span><h1 id="agents"><a class="markdownIt-Anchor" href="#agents"></a> Agents</h1><p>The central problem of AI is to create a rational agent. A <strong>rational agent</strong> is an entity that has goals or preferences and tries to perform a series of actions that yield the best/optimal expected outcome given these goals.</p><p>The agent exists in an <strong>environment</strong>. Together, the agent and the environment constitute the <strong>world</strong>.</p><h2 id="types-of-agents"><a class="markdownIt-Anchor" href="#types-of-agents"></a> Types of Agents</h2><p>A <strong>reflex agent</strong> selects its action based on only the current state of the world.</p><p>A <strong>planning agent</strong> maintains a model of the world and uses this model to simulate performing various actions.</p><p>Sometimes agents fail due to wrong world models.</p><h2 id="task-environment"><a class="markdownIt-Anchor" href="#task-environment"></a> Task Environment</h2><p>The <strong>PEAS</strong> (Performance Measure, Environment, Actuators, Sensors) description is used for defining the task environment.</p><p>The <strong>performance measure</strong> describes what utility the agent tries to increase.</p><p>The <strong>environment</strong> summarizes where the agent acts and what affects the agent.</p><p>The <strong>actuators</strong> and the <strong>sensors</strong> are the methods with which the agent acts on the environment and receives information from it.</p><h2 id="types-of-environment"><a class="markdownIt-Anchor" href="#types-of-environment"></a> Types of Environment</h2><p>We can characterize the types of environments in the following ways:</p><ul><li>partially observable environments</li><li>fully observable environments</li><li>Stochastic environments (uncertainty in the transition model)</li><li>deterministic environments</li><li>multi-agent environments</li><li>static environments</li><li>dynamic environments</li><li>environments with known physics</li><li>environments with unknown physics</li></ul><h1 id="state-space-and-search-problems"><a class="markdownIt-Anchor" href="#state-space-and-search-problems"></a> State Space and Search Problems</h1><p>A search problem consists of the following elements:</p><ul><li>A <strong>state space</strong> - The set of all possible states that are possible in your given world</li><li>A set of <strong>actions</strong> available in each state</li><li>A <strong>transition model</strong> - Outputs the next state when a specific action is taken at current state</li><li>An <strong>action cost</strong> - Incurred when moving from one state to another after applying an action</li><li>A <strong>start state</strong> - The state in which an agent exists initially</li><li>A <strong>goal test</strong> - A function that takes a state as input, and determines whether it is a goal state</li></ul><p>A search problem is solved by first considering the start state, then exploring the state space using the action and transition and cost methods, iteratively computing children of various states until we arrive at a goal state.</p><p>A <strong>world state</strong> contains all information about a given state, whereas a <strong>search state</strong> contains only the information about the world that’s necessary for planning.</p><h2 id="state-space-graphs-and-search-trees"><a class="markdownIt-Anchor" href="#state-space-graphs-and-search-trees"></a> State Space Graphs and Search Trees</h2><p><img src="https://inst.eecs.berkeley.edu/~cs188/textbook/assets/images/graph_and_tree.png" alt="CS188 State Space Graphs and Search Trees" /></p><p>A <strong>state space graph</strong> is constructed with states representing nodes, with directed edges existing from a state to its children. These edges represent actions, and any associated weights represent the cost of performing the corresponding action.</p><p>They can be noticeably large, but they represent states well. (All states occur only once)</p><p><strong>Search trees</strong> encode the entire path (or plan) from the start state to the given state in the state space graph.</p><p>Since there often exist multiple ways to get from one state to another, states tend to show up multiple times in search trees.</p><p>Since these structures can be too large for computers, we can choose to store only states we’re immediately working with, and compute new ones on-demand.</p><h1 id="uninformed-and-search"><a class="markdownIt-Anchor" href="#uninformed-and-search"></a> Uninformed and Search</h1><p>The standard protocol for finding a plan from the start state to the goals is to maintain an outer frontier and continually expanding the frontier by replacing a node with its children.</p><p>Most implementations of such algorithms will encode information about the parent node, distance to node, and the state inside the node object. This procedure is known as <strong>tree search</strong>.</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function TREE-SEARCH(problem, frontier) return a solution <span class="keyword">or</span> failure</span><br><span class="line">    frontier ← INSERT(MAKE-<span class="keyword">NODE</span><span class="title">(INITIAL-STATE</span>[problem]), frontier)</span><br><span class="line">    while not IS-EMPTY(frontier) do</span><br><span class="line">        <span class="keyword">node</span> <span class="title">← POP</span>(frontier)</span><br><span class="line">        if problem.IS-GOAL(node.STATE) then return <span class="keyword">node</span></span><br><span class="line">        <span class="title">for</span> each child-<span class="keyword">node</span> <span class="title">in</span> EXPAND(problem, <span class="keyword">node</span><span class="title">) do</span></span><br><span class="line">            add child-<span class="keyword">node</span> <span class="title">to</span> frontier</span><br><span class="line">    return failure</span><br></pre></td></tr></table></figure><p>The <code>EXPAND</code> function appearing in the pseudocode returns all the possible nodes that can be reached from a given node by considering all available actions.</p><p>When we have no knowledge of the location of goal states in our search tree, we are forced to do <strong>uninformed search</strong>.</p><ul><li>The <strong>completeness</strong> of each search strategy - if there exists a solution to the search problem, is the strategy guaranteed to find it given infinite computational resources?</li><li>The <strong>optimality</strong> of each search strategy - is the strategy guaranteed to find the lowest cost path to a goal state?</li><li>The **branching factor ** - The increase in the number of nodes on the frontier each time a frontier node is dequeued and replaced with its children is . At depth k in the search tree, there exists  nodes.</li><li>The maximum depth m.</li><li>The depth of the shallowest solution s.</li></ul><h2 id="depth-first-search"><a class="markdownIt-Anchor" href="#depth-first-search"></a> Depth-First Search</h2><p>Depth-First Search (DFS) always selects the <em>deepest frontier</em> node.</p><p>The frontier is represented by a stack.</p><p>Depth-first search is not complete. If there exist cycles in the state space graph, this inevitably means that the corresponding search tree will be infinite in depth.</p><p>Depth-first search is not optimal.</p><h2 id="breadth-frist-search"><a class="markdownIt-Anchor" href="#breadth-frist-search"></a> Breadth-Frist Search</h2><p>Breadth-first search (BFS) always selects the <em>shallowest frontier</em> node.</p><p>The frontier is represented by a queue.</p><p>If a solution exists, then the depth of the shallowest node s must be finite, so BFS must eventually search this depth. Hence, it’s complete.</p><p>BFS is generally not optimal.</p><h2 id="iterative-deepening"><a class="markdownIt-Anchor" href="#iterative-deepening"></a> Iterative Deepening</h2><p>Iterative Deepening (ID) is basically BFS implemented with DFS. It repeatedly executes depth-first search with an increasing depth limit.</p><p>The frontier is represented by a stack.</p><p>Iterative deepening is complete. Because it exhaustively searches each depth level before increasing the limit, it avoids the infinite loops of DFS and will find a solution if one exists at a finite depth.</p><p>ID is generally not optimal.</p><p>If the cost is uniform, ID and BFS will be optimal.</p><h2 id="uniform-cost-search"><a class="markdownIt-Anchor" href="#uniform-cost-search"></a> Uniform Cost Search</h2><p>Uniform cost search (UCS) always selects the <em>lowest cost frontier</em> node.</p><p>The frontier is represented by a priority queue.</p><p>Uniform cost search is complete and optimal.</p><p>The three strategies outlined above are fundamentally the same - differing only in expansion strategy</p>]]></content>
      
      
      <categories>
          
          <category> EN | AI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS188 </tag>
            
            <tag> AI </tag>
            
            <tag> Lecture Notes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RECAP2025: 留白</title>
      <link href="/2025/12/31/recap2025/"/>
      <url>/2025/12/31/recap2025/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>前幾天才猛然驚覺，按照慣例，是時候寫年終總結了。盯著白花花的螢幕，半天拼湊不出一句話。似乎 2025 是注定被遺忘的一年。</p><p>既然這是難以回憶難以定義的一年，不如我們留白。</p><h2 id="歲末"><a class="markdownIt-Anchor" href="#歲末"></a> 歲末</h2><p>有一位詩人寫過一首詩。我把它原封不動摘錄在這裡。</p><blockquote><p>從一年的開始到終結</p><p>我走了多年</p><p>讓歲月彎成了弓</p><p>到處是退休者的鞋</p><p>私人的塵土</p><p>公共的垃圾</p><br><p>這是並不重要的一年</p><p>鐵錘閒著，而我</p><p>向以後的日子借光</p><p>瞥見一把白金尺</p><p>在鐵砧上</p><p>北島</p></blockquote><h2 id="夢"><a class="markdownIt-Anchor" href="#夢"></a> 夢</h2><p>十一月，似乎記得做過一個夢。</p><p>一束刺眼的強光，手術台般，直射頭頂，似乎要剝離我的靈魂。流水線廠房裡，只能聽到工業巨獸的咆哮，什麼也聽不見。感官被屏蔽了。等到我恢復知覺，肉體已隨著傳送帶前行。傳送帶的盡頭是什麼？前方是絕對的虛無。什麼也看不見，什麼也聽不見。</p><p>這不對。驚起，我開始大喊。沒有響應。</p><p>廠房無限延伸。黑暗中，平行的傳送帶時刻不停。金屬零件整齊排列。冰冷的秩序令人膽顫心驚。當你仔細望過去，才發現那些零件竟然是人。按照不知道什麼規則分類排布在各自的傳送帶上，一聲不響。他們並沒有戴著鐐銬，但他們一動不動。</p><p>是誰在操縱？</p><p>廠房全自動化作業。頭頂的攝影機和感測器監視著一切。</p><p>我開始往反方向跑，試圖喚醒周圍的人，沒有回應。</p><p>我奔跑，傳送帶時刻不停。</p><p>我在跑。 我只能跑。</p><h2 id="我是誰"><a class="markdownIt-Anchor" href="#我是誰"></a> 我是誰</h2><p>醒來時，我忘記了我是誰。</p><p>但是，還有書籍。</p><p>我研究，我晝夜不停，我追尋答案。</p><p>一月是從未涉足的故鄉，西半球正在下雪。</p><p>二月用常識的謊言背叛了自己。</p><p>三月沿青石台階一路向上，從一數到一百。</p><p>四月在湖畔閒坐。</p><p>五月為徒勞日夜兼程。</p><p>六月是結束的開始。</p><p>七月在山間行走。</p><p>八月有些中暑。</p><p>九月十月十一月。</p><p>十二月。</p><p>留白。</p><p>我是誰？</p><p>這段歷史沒有姓名，就連編號也找不到。</p><p>也沒有書籍，似乎失去了靈魂。</p><h2 id="午夜飛行續"><a class="markdownIt-Anchor" href="#午夜飛行續"></a> 午夜飛行（續）</h2><p>二月，我登上午夜的飛機，反抗黑夜。惶恐穿越子午線。</p><p>也許我不應該離開，其實我應該留下。</p><p>我應該做什麼？</p><p>他登上火車，前往故鄉。故鄉是哪裡？他不知道。故鄉只存在於記憶深處，或是夢中。或許這一切都不存在。窗外是多少朝代。傾倒的電線杆，無盡的平原，高山，水壩。世界的盡頭。多少片雪花無聲落下。他什麼也不知道。一切都消散在風雨中。</p><p>你想去看看長城。你說你背負著五千年，從昨天就忍痛前行，行走在這條泥濘的荊棘路上。你從未走出這片森林，從未離開這座大山。你日夜不停。你不知道這意味著什麼。</p><p>他感受到畏懼。他似乎想起為什麼啟程。一切都由他們來定義。他們是誰？他不相信這平原竟是懸崖峭壁，他不相信噩夢和神話。他學著眾人的模樣，在淺灘上奔跑。</p><p>你追隨祖先走向大海。那艘巨艦並未帶走你的先輩，故步自封，信仰成為棺木。你的先祖曾經堅守，被背叛，被遺忘，結束自己卑微的一生。你沒有記憶，歷史選擇忘記。</p><p>他沒有犯錯，他不相信，他惶恐。他什麼也不知道，他什麼也不相信。他相信嗎？你相信嗎？這故鄉不屬於你，這大山與你無關。或許故鄉只是一個精神上的坐標。他沒有犯錯，卻要接受刑罰。什麼是正義？沒有人解釋。清楚一切，被抹去。不需要解釋。</p><p>你自認為與眾不同，你不願意接受，你試著唱反調。他們需要你接受。你非要挑戰。你發現你窒息在空氣中。</p><p>你不再做夢，你沒有主義，你無家可歸，你四海為家。你在沙漠公路上前行，你沒有追隨者。</p><p>一輪明月，你只看見殉道者的鮮血，為誰而流？他只想苟且偷生。你呼喚他午夜飛行。真理和真理之間藏著謊言。你選擇追隨祖先，追隨感覺。</p><p>他覺得沒必要相信，但他做不到。他只能在月光下趟水過河，冰冷的河水使他不得不保持緘默。而緘默是最沉痛的懦弱。</p><p>我們都是貪生怕死之輩。現狀是一潭死水。我們任人擺布。</p><p>你要去哪裡？你還相信嗎？</p><blockquote><p>你不相信夢想，你不相信陳見，你不相信權力和暴力，你不相信太陽，你不相信神話，你不相信別人，你不相信規則，你不相信故鄉，你不相信過去，你不相信飛行，你不相信雲，你不相信歷史，你不相信直覺你不相信冰塊你不相信大海你不相信微塵你不相信革命你不相信政治你不相信謊言你不相信幻覺不相信收音機不相信信標不相信城牆不相信詩人不相信江山不相信愛情不相信生活不相信文化不相信天氣。你什麼都不相信。你還相信什麼？你還相信相信嗎？</p></blockquote><p>真的嗎？</p><p>在錯綜複雜的迷宮中，我選擇放棄抵抗，跪在雨後的林間小道上，雙膝上沾滿了泥濘。我選擇了從一開始就選擇的一條路，選擇低下頭，俯身穿過荊棘。雖然我知道這條路通向哪裡，雖然我知道正確答案。</p><p>我選擇了恐懼。</p><p>午夜飛行，我向未知妥協。</p><p>我背叛了黎明。後悔已沒有意義。</p><p>你還是自由的嗎？</p><h2 id="最後的特拉阿托尼"><a class="markdownIt-Anchor" href="#最後的特拉阿托尼"></a> 最後的特拉阿托尼</h2><p>當西班牙征服者攻入特諾奇蒂特蘭</p><p>當城邦被水淹沒</p><p>當神殿之上建立起天主教教堂</p><p>夸烏特莫克成為最後的特拉阿托尼</p><p>雙足被燙傷</p><p>“阿茲特克人沒有藏金”</p><br><p>烈火吞噬火槍</p><p>仙人掌被水淹沒</p><p>“西班牙人懂得尊重勇敢”</p><p>絞刑架揭穿謊言</p><p>到底什麼才是真理？</p><br><p>征服者失眠</p><p>戰船傾倒</p><p>帝國隕落</p><p>城市裡樹立起紀念碑</p><p>文明毀滅之後永不歸來</p><br><p>在煙霧繚繞的黑曜石鏡中</p><p>第五個太陽疲憊地闔上眼簾</p><p>不再有搏動的心臟</p><p>餵養它日益黯淡的光芒</p><br><p>東方海面吹來的風</p><p>沒有帶來羽蛇神的承諾</p><p>只送來了披著鐵甲的蝗蟲</p><p>和一種無法被祭祀治癒的瘟疫</p><br><p>蘆葦束斷裂的聲音</p><p>淹沒在陌生銅鐘的轟鳴裡</p><p>時間之輪卡死在最後的紀元</p><p>不再轉動</p><br><p>在特斯科科湖乾涸的夢境下方</p><p>一條巨大的、看不見的蛇</p><p>在淤泥中緩慢地蛻皮</p><p>留下一具名叫特諾奇蒂特蘭的空殼</p><p>等待一個永遠不會升起的黎明</p><br><p>城市穿過阿茲特克的胸腔</p><p>永恆消失的帝國</p><p>Zócalo/Tenochtitlan 被地鐵站牌記憶</p><h2 id="雨西湖"><a class="markdownIt-Anchor" href="#雨西湖"></a> 雨西湖</h2><p>飛機降落在七月。我偏離只有草地的晴天，走向暴雨中的西湖。</p><p>但我仍然會想起你。夜間，高鐵在黑夜裡撕開一道縫隙，電話那頭的聲音被電流聲撕碎。追趕時光。錯位的車票。疾馳的火車。車站和夜晚都不會再等待。</p><p>我的傘禁受不了風雨。我在寶石山下的木屋裡等待雨停。</p><p>陌生的旅客，傘下的遊人。</p><p>遠山隱入蒼冥，斷橋遁入虛白。</p><p>硯台被打翻了，黑雲遮蔽錢塘的街市。湖水之下卻永遠寧靜。湖面和天空密謀了一場大霧，把保俶塔的尖頂也藏了起來。湖水之上，雨成為牢籠，成片倒下來，淋不醒夢中的人。</p><p>我在湖邊行走。這是多少次來到杭州？</p><p>雨點切斷聯結。人們只匆匆趕路。環湖的路上已經沒有行人，斷橋上卻擠滿了遊客，停滯不前。傘面下的世界縮減到了方寸之間，我們在此刻互為盲人。有誰會探頭望向灰暗的湖面和天空，感受雨點擊打在面頰上，看著石階上瀑布般的水流。逆行上山。轉頭被石壁中的佛像嚇到。石像沉睡千年，永遠都不會醒來，永遠沉醉於昨日繁華。我匆忙尋找避雨的屋簷。土腥味指引我來到山腳下的木屋。雨點浸濕了我的衣服，汗水和雨融合到一起，脊背冰冷，也如同夜晚西湖上的風。</p><p>電話中聽到你的聲音。空調吐出的寒氣比窗外的雨更凜冽，或許也是因為我全身濕透。一頓簡單的 KFC，成為暴雨中唯一的慰藉。或許你們去聚餐遊戲？但我永遠都不屬於這裡，不屬於人群和都市。</p><p>高鐵斬碎夜色和西湖的夢，西湖萬古不變，西湖的雨萬古不變。</p><p>或許一陣風來，又是暖風熏得遊人醉。</p><p>雨西湖為何而留白？</p><p>張岱是否也這樣回憶臨安？</p><p>有些事情，逝去了就不會再來。有些人逝去了，如雨入湖中，無跡可尋。</p><p>休言萬事轉頭空，未轉頭時皆夢？</p><h2 id="旅行"><a class="markdownIt-Anchor" href="#旅行"></a> 旅行</h2><p>我們在盛夏走向大山。記不起景德鎮的窯火，或是廬山，或是張家界，或是長沙。記憶吞噬一切，模糊。但旅行的意義，在於行走，在於一次旅行之後仍然期待下一次前行。</p><p>四月就曾騎行江畔，點幾串燒烤，吹江風。卻又在深夜彷徨，突如其來，或是有所徵兆，不知所措。</p><p>南方的小城，租一輛電動車。我開錯導航，誤入歧途。沒有責怪。重新認識你，或許今後又很難常見。用一個簡單的謊言掩蓋事實，是自我保護還是連自己也欺騙，不願意承認。但在七月的烈日之下，騎車自由遊蕩，不需要任何計劃，點一杯奶茶，走到深巷裡吃當地菜餚。或許又在山間酒醉，綠茶啤酒，看著晚霞逐漸熄滅。夜遊長沙，遁入黑夜的不止有那天的星空。乘船來到東海小島，其實並未做任何計劃，甚至是購買的最後幾張票。行走在環島海濱公路上，這裡的大海或許和往日不同。</p><p>我們為何啟程？我們何時再次啟程？</p><h2 id="留白-斷章"><a class="markdownIt-Anchor" href="#留白-斷章"></a> 留白 · 斷章</h2><p>一年的盡頭為新的一年留白。</p><p>不再偽裝勇敢，不再滿身疲憊，在清醒中假裝沉睡。</p><p>重新整理時間線，讀一些書，走一些路。</p><p>游標在空白上跳動。我試圖尋找意義，把這一年填滿。我發現我似乎失去了過去的力量，失去了語言，我試圖定義，卻發現最有力量的文字藏在那些被我刪除的段落，被我遺忘的話語，我不敢承認也不敢想的語言。最後都化為一聲嘆息，成為 12 月的一場大雪。</p><p>2025 年注定是一場大霧。那就留白。沒有人能夠定義這一切。</p><p>繼續保持清醒。</p><p>刪去一萬字，留下空白。</p><p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p><p>在這空白裡，請聽一聽你內心的聲音。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 年度回顧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSAPP Bomb Lab 解析</title>
      <link href="/2025/12/20/csapp-lab2/"/>
      <url>/2025/12/20/csapp-lab2/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>做完了 CSAPP Bomb Lab，寫一篇解析。</p><h2 id="題目要求"><a class="markdownIt-Anchor" href="#題目要求"></a> 題目要求</h2><p>運行一個二進制文件 bomb，它包括六個&quot;階段(phase)“，每個階段要求學生通過 stdin 輸入一個特定的字串。如果輸入了預期的字串，那麼該階段被&quot;拆除”，進入下一個階段，直到所有炸彈被成功&quot;拆除&quot;。否則，炸彈就會&quot;爆炸&quot;，列印出&quot;BOOM!!!&quot;</p><h2 id="環境"><a class="markdownIt-Anchor" href="#環境"></a> 環境</h2><p>這個系統是在 <code>x86_64</code> Linux 上運行的，而筆者的環境是 <code>ARM</code> 架構的 macOS (Apple Silicon)。</p><p>弄了半天 <code>docker</code>，虛擬化一個 <code>x86_64</code> Ubuntu 出來，結果裡面的 <code>gdb</code> 不能用，不想折騰。</p><p>發現 <code>educoder</code> 上面有環境，可以直接用，而且免費，於是就在 <code>educoder</code> 上面完成了本實驗。</p><p>地址：<a href="https://www.educoder.net/paths/6g398fky">https://www.educoder.net/paths/6g398fky</a></p><h2 id="前置知識"><a class="markdownIt-Anchor" href="#前置知識"></a> 前置知識</h2><p>本實驗要求掌握 <code>gdb</code> 的一些指令。</p><h3 id="1-啟動與退出-startup-exit"><a class="markdownIt-Anchor" href="#1-啟動與退出-startup-exit"></a> 1. 啟動與退出 (Startup &amp; Exit)</h3><table><thead><tr><th style="text-align:left">指令</th><th style="text-align:left">縮寫</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>gdb executable</code></td><td style="text-align:left">-</td><td style="text-align:left">啟動 GDB 並載入可執行文件。</td></tr><tr><td style="text-align:left"><code>run [args]</code></td><td style="text-align:left"><strong><code>r</code></strong></td><td style="text-align:left">開始運行程序。如果有命令行參數，跟在後面（如 <code>r input.txt</code>）。</td></tr><tr><td style="text-align:left"><code>quit</code></td><td style="text-align:left"><strong><code>q</code></strong></td><td style="text-align:left">退出 GDB。</td></tr><tr><td style="text-align:left"><code>start</code></td><td style="text-align:left">-</td><td style="text-align:left">運行程序並在 <code>main</code> 函數的第一行自動暫停（省去手動打斷點的麻煩）。</td></tr><tr><td style="text-align:left"><code>set args ...</code></td><td style="text-align:left">-</td><td style="text-align:left">設置運行時的參數（在 <code>r</code> 之前使用）。</td></tr></tbody></table><h3 id="2-斷點管理-breakpoints"><a class="markdownIt-Anchor" href="#2-斷點管理-breakpoints"></a> 2. 斷點管理 (Breakpoints)</h3><table><thead><tr><th style="text-align:left">指令</th><th style="text-align:left">縮寫</th><th style="text-align:left">描述</th><th style="text-align:left">範例</th></tr></thead><tbody><tr><td style="text-align:left"><code>break &lt;loc&gt;</code></td><td style="text-align:left"><strong><code>b</code></strong></td><td style="text-align:left">設置斷點。支持函數名、行號、檔案名:行號。</td><td style="text-align:left"><code>b main</code><br><code>b 15</code><br><code>b file.c:20</code></td></tr><tr><td style="text-align:left"><code>info breakpoints</code></td><td style="text-align:left"><strong><code>i b</code></strong></td><td style="text-align:left">查看當前所有斷點及其編號 (Num)。</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left"><code>delete &lt;Num&gt;</code></td><td style="text-align:left"><strong><code>d</code></strong></td><td style="text-align:left">刪除指定編號的斷點。不加編號則刪除所有。</td><td style="text-align:left"><code>d 1</code></td></tr><tr><td style="text-align:left"><code>disable/enable &lt;Num&gt;</code></td><td style="text-align:left">-</td><td style="text-align:left">暫時禁用或啟用某個斷點（保留配置但不生效）。</td><td style="text-align:left"><code>disable 2</code></td></tr><tr><td style="text-align:left"><code>break ... if &lt;cond&gt;</code></td><td style="text-align:left">-</td><td style="text-align:left"><strong>條件斷點</strong>：僅當條件為真時才暫停（非常有用）。</td><td style="text-align:left"><code>b 10 if i==5</code></td></tr></tbody></table><h3 id="3-執行控制-execution-control"><a class="markdownIt-Anchor" href="#3-執行控制-execution-control"></a> 3. 執行控制 (Execution Control)</h3><table><thead><tr><th style="text-align:left">指令</th><th style="text-align:left">縮寫</th><th style="text-align:left">描述</th><th style="text-align:left">區別點</th></tr></thead><tbody><tr><td style="text-align:left"><code>next</code></td><td style="text-align:left"><strong><code>n</code></strong></td><td style="text-align:left"><strong>單步跳過</strong>。執行下一行程式碼。</td><td style="text-align:left">如果遇到函數調用，<strong>不進入</strong>函數內部，直接執行完該函數。</td></tr><tr><td style="text-align:left"><code>step</code></td><td style="text-align:left"><strong><code>s</code></strong></td><td style="text-align:left"><strong>單步進入</strong>。執行下一行程式碼。</td><td style="text-align:left">如果遇到函數調用，<strong>進入</strong>函數內部逐行除錯。</td></tr><tr><td style="text-align:left"><code>continue</code></td><td style="text-align:left"><strong><code>c</code></strong></td><td style="text-align:left">繼續運行，直到遇到下一個斷點或程序結束。</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left"><code>finish</code></td><td style="text-align:left">-</td><td style="text-align:left">執行直到當前函數返回。</td><td style="text-align:left">當你不小心 <code>s</code> 進了一個不想看的庫函數時，用這個跳出來。</td></tr><tr><td style="text-align:left"><code>until &lt;line&gt;</code></td><td style="text-align:left"><strong><code>u</code></strong></td><td style="text-align:left">運行直到指定行號。</td><td style="text-align:left">常用於快速跳出循環。</td></tr></tbody></table><h3 id="4-查看數據-inspection"><a class="markdownIt-Anchor" href="#4-查看數據-inspection"></a> 4. 查看數據 (Inspection)</h3><table><thead><tr><th style="text-align:left">指令</th><th style="text-align:left">縮寫</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>print &lt;var&gt;</code></td><td style="text-align:left"><strong><code>p</code></strong></td><td style="text-align:left">列印變數的值。支持表達式（如 <code>p index + 1</code>）。</td></tr><tr><td style="text-align:left"><code>display &lt;var&gt;</code></td><td style="text-align:left">-</td><td style="text-align:left"><strong>持續顯示</strong>。每次程序暫停時，自動列印該變數的值（適合跟蹤循環中的變數）。</td></tr><tr><td style="text-align:left"><code>info locals</code></td><td style="text-align:left">-</td><td style="text-align:left">列印當前棧幀中所有局部變數的值。</td></tr><tr><td style="text-align:left"><code>whatis &lt;var&gt;</code></td><td style="text-align:left">-</td><td style="text-align:left">查看變數的數據類型。</td></tr><tr><td style="text-align:left"><code>ptype &lt;struct&gt;</code></td><td style="text-align:left">-</td><td style="text-align:left">查看結構體或類的具體定義（成員列表）。</td></tr><tr><td style="text-align:left"><code>x /nfu &lt;addr&gt;</code></td><td style="text-align:left"><strong><code>x</code></strong></td><td style="text-align:left"><strong>查看記憶體</strong>。<code>n</code>是數量，<code>f</code>是格式(x=hex, d=dec, s=str)，<code>u</code>是單位(b=byte, w=word)。<br>例如：<code>x/10xw &amp;array</code> (以16進制顯示數組前10個word)。</td></tr></tbody></table><h3 id="5-堆棧與上下文-stack-context"><a class="markdownIt-Anchor" href="#5-堆棧與上下文-stack-context"></a> 5. 堆棧與上下文 (Stack &amp; Context)</h3><table><thead><tr><th style="text-align:left">指令</th><th style="text-align:left">縮寫</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>backtrace</code></td><td style="text-align:left"><strong><code>bt</code></strong></td><td style="text-align:left"><strong>查看調用棧</strong>。顯示程序崩潰時的函數調用路徑（從 main 到當前函數）。</td></tr><tr><td style="text-align:left"><code>frame &lt;Num&gt;</code></td><td style="text-align:left"><strong><code>f</code></strong></td><td style="text-align:left">切換到指定的堆棧幀（配合 <code>bt</code> 看到的編號）。切換後可以用 <code>p</code> 查看該層函數的局部變數。</td></tr><tr><td style="text-align:left"><code>list</code></td><td style="text-align:left"><strong><code>l</code></strong></td><td style="text-align:left">顯示當前行附近的原始碼。</td></tr></tbody></table><h3 id="6-提升體驗tui-模式-text-user-interface"><a class="markdownIt-Anchor" href="#6-提升體驗tui-模式-text-user-interface"></a> 6. 提升體驗：TUI 模式 (Text User Interface)</h3><ul><li><strong><code>layout src</code></strong>：螢幕分為兩半，上面顯示原始碼和當前執行行，下面是命令窗口。（強烈推薦）</li><li><strong><code>layout asm</code></strong>：顯示匯編代碼。</li><li><strong><code>layout split</code></strong>：同時顯示原始碼和匯編。</li></ul><h2 id="反匯編"><a class="markdownIt-Anchor" href="#反匯編"></a> 反匯編</h2><p>我們可以使用 <code>objdump</code> 直接進行反匯編，查看匯編原始碼。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objdump -d bomb &gt; bomb.asm</span><br></pre></td></tr></table></figure><p>我們可以觀察到，幾個 <code>phase</code> 其實是幾個函數，<code>phase_x()</code>。</p><h2 id="strings"><a class="markdownIt-Anchor" href="#strings"></a> strings</h2><p>在終端輸入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strings bomb</span><br></pre></td></tr></table></figure><p>這會把 <code>bomb</code> 文件裡所有連續的可列印字元（ASCII）都列印出來。</p><h2 id="phase-1"><a class="markdownIt-Anchor" href="#phase-1"></a> Phase 1</h2><p>我們先看看 <code>phase_1</code> 長什麼樣子，<code>disas phase_1</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_1:</span><br><span class="line">   0x0000000000400ee0 &lt;+0&gt;:     sub    $0x8,%rsp</span><br><span class="line">   0x0000000000400ee4 &lt;+4&gt;:     mov    $0x402400,%esi</span><br><span class="line">   0x0000000000400ee9 &lt;+9&gt;:     callq  0x401338 &lt;strings_not_equal&gt;</span><br><span class="line">   0x0000000000400eee &lt;+14&gt;:    test   %eax,%eax</span><br><span class="line">   0x0000000000400ef0 &lt;+16&gt;:    je     0x400ef7 &lt;phase_1+23&gt;</span><br><span class="line">   0x0000000000400ef2 &lt;+18&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400ef7 &lt;+23&gt;:    add    $0x8,%rsp</span><br><span class="line">   0x0000000000400efb &lt;+27&gt;:    retq   </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><p><code>sub    $0x8,%rsp</code> 是設置棧幀，在這裡不用管。</p><p><code>mov    $0x402400,%esi</code> 和 <code>callq  0x401338 &lt;strings_not_equal&gt;</code> 似乎進行了字串的 <code>strcmp</code>。</p><p>接下來 <code>je     0x400ef7 &lt;phase_1+23&gt;</code> 就很明顯了，如果相等跳出炸彈。</p><p>設置斷點，<code>b phase_1</code></p><p>之後運行程序，<code>r</code>，隨便輸入一些內容，就可以觸發斷點</p><p>以字串形式查看 <code>0x402400</code> 所指向的記憶體：<code>x/s 0x402400</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0x402400:       <span class="string">&quot;Border relations with Canada have never been better.&quot;</span></span><br></pre></td></tr></table></figure><p>我們找到了答案。</p><h2 id="phase-2"><a class="markdownIt-Anchor" href="#phase-2"></a> Phase 2</h2><p>還是先反匯編：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_2:</span><br><span class="line">   0x0000000000400efc &lt;+0&gt;:     push   %rbp</span><br><span class="line">   0x0000000000400efd &lt;+1&gt;:     push   %rbx</span><br><span class="line">   0x0000000000400efe &lt;+2&gt;:     sub    $0x28,%rsp</span><br><span class="line">   0x0000000000400f02 &lt;+6&gt;:     mov    %rsp,%rsi</span><br><span class="line">   0x0000000000400f05 &lt;+9&gt;:     callq  0x40145c &lt;read_six_numbers&gt;</span><br><span class="line">   0x0000000000400f0a &lt;+14&gt;:    cmpl   $0x1,(%rsp)</span><br><span class="line">   0x0000000000400f0e &lt;+18&gt;:    je     0x400f30 &lt;phase_2+52&gt;</span><br><span class="line">   0x0000000000400f10 &lt;+20&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400f15 &lt;+25&gt;:    jmp    0x400f30 &lt;phase_2+52&gt;</span><br><span class="line">   0x0000000000400f17 &lt;+27&gt;:    mov    -0x4(%rbx),%eax</span><br><span class="line">   0x0000000000400f1a &lt;+30&gt;:    add    %eax,%eax</span><br><span class="line">   0x0000000000400f1c &lt;+32&gt;:    cmp    %eax,(%rbx)</span><br><span class="line">   0x0000000000400f1e &lt;+34&gt;:    je     0x400f25 &lt;phase_2+41&gt;</span><br><span class="line">   0x0000000000400f20 &lt;+36&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400f25 &lt;+41&gt;:    add    $0x4,%rbx</span><br><span class="line">   0x0000000000400f29 &lt;+45&gt;:    cmp    %rbp,%rbx</span><br><span class="line">   0x0000000000400f2c &lt;+48&gt;:    jne    0x400f17 &lt;phase_2+27&gt;</span><br><span class="line">   0x0000000000400f2e &lt;+50&gt;:    jmp    0x400f3c &lt;phase_2+64&gt;</span><br><span class="line">   0x0000000000400f30 &lt;+52&gt;:    lea    0x4(%rsp),%rbx</span><br><span class="line">   0x0000000000400f35 &lt;+57&gt;:    lea    0x18(%rsp),%rbp</span><br><span class="line">   0x0000000000400f3a &lt;+62&gt;:    jmp    0x400f17 &lt;phase_2+27&gt;</span><br><span class="line">   0x0000000000400f3c &lt;+64&gt;:    add    $0x28,%rsp</span><br><span class="line">   0x0000000000400f40 &lt;+68&gt;:    pop    %rbx</span><br><span class="line">   0x0000000000400f41 &lt;+69&gt;:    pop    %rbp</span><br><span class="line">   0x0000000000400f42 &lt;+70&gt;:    retq   </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><p><code>   0x0000000000400f05 &lt;+9&gt;:     callq  0x40145c &lt;read_six_numbers&gt;</code> 這裡看到 <code>read_six_numbers</code></p><p>我們可以反匯編 <code>read_six_numbers</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function read_six_numbers:</span><br><span class="line">   0x000000000040145c &lt;+0&gt;:     sub    $0x18,%rsp</span><br><span class="line">   0x0000000000401460 &lt;+4&gt;:     mov    %rsi,%rdx</span><br><span class="line">   0x0000000000401463 &lt;+7&gt;:     lea    0x4(%rsi),%rcx</span><br><span class="line">   0x0000000000401467 &lt;+11&gt;:    lea    0x14(%rsi),%rax</span><br><span class="line">   0x000000000040146b &lt;+15&gt;:    mov    %rax,0x8(%rsp)</span><br><span class="line">   0x0000000000401470 &lt;+20&gt;:    lea    0x10(%rsi),%rax</span><br><span class="line">   0x0000000000401474 &lt;+24&gt;:    mov    %rax,(%rsp)</span><br><span class="line">   0x0000000000401478 &lt;+28&gt;:    lea    0xc(%rsi),%r9</span><br><span class="line">   0x000000000040147c &lt;+32&gt;:    lea    0x8(%rsi),%r8</span><br><span class="line">   0x0000000000401480 &lt;+36&gt;:    mov    $0x4025c3,%esi</span><br><span class="line">   0x0000000000401485 &lt;+41&gt;:    mov    $0x0,%eax</span><br><span class="line">   0x000000000040148a &lt;+46&gt;:    callq  0x400bf0 &lt;__isoc99_sscanf@plt&gt;</span><br><span class="line">   0x000000000040148f &lt;+51&gt;:    cmp    $0x5,%eax</span><br><span class="line">   0x0000000000401492 &lt;+54&gt;:    jg     0x401499 &lt;read_six_numbers+61&gt;</span><br><span class="line">   0x0000000000401494 &lt;+56&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401499 &lt;+61&gt;:    add    $0x18,%rsp</span><br><span class="line">   0x000000000040149d &lt;+65&gt;:    retq   </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><p>看到有一行 <code>callq  0x400bf0 &lt;__isoc99_sscanf@plt&gt;</code>，調用了 <code>sscanf</code></p><p>我們看一眼 <code>$0x4025c3</code>，<code>x/s 0x4025c3</code>，得到 <code>%d %d %d %d %d %d</code>，確實是讀了六個數字。</p><p>函數調用時，參數多於六個，就會丟到棧裡面去。我們看到：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401460 &lt;+4&gt;:     mov    %rsi,%rdx</span><br><span class="line">0x0000000000401463 &lt;+7&gt;:     lea    0x4(%rsi),%rcx</span><br><span class="line">0x0000000000401467 &lt;+11&gt;:    lea    0x14(%rsi),%rax</span><br><span class="line">0x000000000040146b &lt;+15&gt;:    mov    %rax,0x8(%rsp)</span><br><span class="line">0x0000000000401470 &lt;+20&gt;:    lea    0x10(%rsi),%rax</span><br><span class="line">0x0000000000401474 &lt;+24&gt;:    mov    %rax,(%rsp)</span><br><span class="line">0x0000000000401478 &lt;+28&gt;:    lea    0xc(%rsi),%r9</span><br><span class="line">0x000000000040147c &lt;+32&gt;:    lea    0x8(%rsi),%r8</span><br></pre></td></tr></table></figure><p>參數順序：<code>rdi, rsi, rdx, rcx, r8, r9</code>，超過了六個參數。<code>rsp</code> 為棧頂指針，多於六個的參數存在棧上。</p><p>於是讀取的六個數字依次存為：<code>rsi</code>, <code>rsi+4</code>, <code>rsi+8</code>, <code>rsi+12</code>, <code>rsi+16</code> (<code>0x10 = 16</code>), <code>rsi+20</code> (<code>0x14 = 20</code>)</p><p>再回到 <code>phase_2</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400f02 &lt;+6&gt;:     mov    %rsp,%rsi</span><br></pre></td></tr></table></figure><p>棧頂指針作為參數傳入了 <code>read_six_numbers</code>，因此，這六個數字應該是在 <code>phase_2</code> 對應棧幀的棧上</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400f0a &lt;+14&gt;:    cmpl   $0x1,(%rsp)</span><br><span class="line">0x0000000000400f0e &lt;+18&gt;:    je     0x400f30 &lt;phase_2+52&gt;</span><br><span class="line">0x0000000000400f10 &lt;+20&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br></pre></td></tr></table></figure><p>這裡判斷棧頂元素是否是 <code>1</code>，也就是說第一個元素是否是 <code>1</code></p><p>之後跳轉到了 <code>0x400f30</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400f17 &lt;+27&gt;:    mov    -0x4(%rbx),%eax</span><br><span class="line">0x0000000000400f1a &lt;+30&gt;:    add    %eax,%eax</span><br><span class="line">0x0000000000400f1c &lt;+32&gt;:    cmp    %eax,(%rbx)</span><br><span class="line">0x0000000000400f1e &lt;+34&gt;:    je     0x400f25 &lt;phase_2+41&gt;</span><br><span class="line">0x0000000000400f20 &lt;+36&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x0000000000400f25 &lt;+41&gt;:    add    $0x4,%rbx</span><br><span class="line">0x0000000000400f29 &lt;+45&gt;:    cmp    %rbp,%rbx</span><br><span class="line">0x0000000000400f2c &lt;+48&gt;:    jne    0x400f17 &lt;phase_2+27&gt;</span><br><span class="line">0x0000000000400f2e &lt;+50&gt;:    jmp    0x400f3c &lt;phase_2+64&gt;</span><br><span class="line">0x0000000000400f30 &lt;+52&gt;:    lea    0x4(%rsp),%rbx</span><br><span class="line">0x0000000000400f35 &lt;+57&gt;:    lea    0x18(%rsp),%rbp</span><br><span class="line">0x0000000000400f3a &lt;+62&gt;:    jmp    0x400f17 &lt;phase_2+27&gt;</span><br></pre></td></tr></table></figure><p>這裡很顯然是一個循環，依次讀取六個數位（每次移動四個位元組，正好是 <code>int</code> 的長度）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400f1a &lt;+30&gt;:    add    %eax,%eax</span><br><span class="line">0x0000000000400f1c &lt;+32&gt;:    cmp    %eax,(%rbx)</span><br><span class="line">0x0000000000400f1e &lt;+34&gt;:    je     0x400f25 &lt;phase_2+41&gt;</span><br></pre></td></tr></table></figure><p>這六個數字，後一個是前一個的兩倍。</p><p>於是我們可以得到答案：<code>1 2 4 8 16 32</code></p><p>我們也可以把代碼翻譯成 C 語言：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// mov -0x4(%rbx), %eax </span></span><br><span class="line">    <span class="type">int</span> previous = num[i<span class="number">-1</span>];</span><br><span class="line">    <span class="comment">// add %eax, %eax</span></span><br><span class="line">    <span class="type">int</span> expected = previous + previous; </span><br><span class="line">    <span class="comment">// cmp %eax, (%rbx)</span></span><br><span class="line">    <span class="keyword">if</span> (num[i] != expected) &#123;</span><br><span class="line">        explode_bomb();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="phase-3"><a class="markdownIt-Anchor" href="#phase-3"></a> Phase 3</h2><p>反匯編：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_3:</span><br><span class="line">   0x0000000000400f43 &lt;+0&gt;:     sub    $0x18,%rsp</span><br><span class="line">   0x0000000000400f47 &lt;+4&gt;:     lea    0xc(%rsp),%rcx</span><br><span class="line">   0x0000000000400f4c &lt;+9&gt;:     lea    0x8(%rsp),%rdx</span><br><span class="line">   0x0000000000400f51 &lt;+14&gt;:    mov    $0x4025cf,%esi</span><br><span class="line">   0x0000000000400f56 &lt;+19&gt;:    mov    $0x0,%eax</span><br><span class="line">   0x0000000000400f5b &lt;+24&gt;:    callq  0x400bf0 &lt;__isoc99_sscanf@plt&gt;</span><br><span class="line">   0x0000000000400f60 &lt;+29&gt;:    cmp    $0x1,%eax</span><br><span class="line">   0x0000000000400f63 &lt;+32&gt;:    jg     0x400f6a &lt;phase_3+39&gt;</span><br><span class="line">   0x0000000000400f65 &lt;+34&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400f6a &lt;+39&gt;:    cmpl   $0x7,0x8(%rsp)</span><br><span class="line">   0x0000000000400f6f &lt;+44&gt;:    ja     0x400fad &lt;phase_3+106&gt;</span><br><span class="line">   0x0000000000400f71 &lt;+46&gt;:    mov    0x8(%rsp),%eax</span><br><span class="line">   0x0000000000400f75 &lt;+50&gt;:    jmpq   *0x402470(,%rax,8)</span><br><span class="line">   0x0000000000400f7c &lt;+57&gt;:    mov    $0xcf,%eax</span><br><span class="line">   0x0000000000400f81 &lt;+62&gt;:    jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">   0x0000000000400f83 &lt;+64&gt;:    mov    $0x2c3,%eax</span><br><span class="line">   0x0000000000400f88 &lt;+69&gt;:    jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">   0x0000000000400f8a &lt;+71&gt;:    mov    $0x100,%eax</span><br><span class="line">   0x0000000000400f8f &lt;+76&gt;:    jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">   0x0000000000400f91 &lt;+78&gt;:    mov    $0x185,%eax</span><br><span class="line">   0x0000000000400f96 &lt;+83&gt;:    jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">   0x0000000000400f98 &lt;+85&gt;:    mov    $0xce,%eax</span><br><span class="line">   0x0000000000400f9d &lt;+90&gt;:    jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">   0x0000000000400f9f &lt;+92&gt;:    mov    $0x2aa,%eax</span><br><span class="line">   0x0000000000400fa4 &lt;+97&gt;:    jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">   0x0000000000400fa6 &lt;+99&gt;:    mov    $0x147,%eax</span><br><span class="line">   0x0000000000400fab &lt;+104&gt;:   jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">   0x0000000000400fad &lt;+106&gt;:   callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400fb2 &lt;+111&gt;:   mov    $0x0,%eax</span><br><span class="line">   0x0000000000400fb7 &lt;+116&gt;:   jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">   0x0000000000400fb9 &lt;+118&gt;:   mov    $0x137,%eax</span><br><span class="line">   0x0000000000400fbe &lt;+123&gt;:   cmp    0xc(%rsp),%eax</span><br><span class="line">   0x0000000000400fc2 &lt;+127&gt;:   je     0x400fc9 &lt;phase_3+134&gt;</span><br><span class="line">   0x0000000000400fc4 &lt;+129&gt;:   callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400fc9 &lt;+134&gt;:   add    $0x18,%rsp</span><br><span class="line">   0x0000000000400fcd &lt;+138&gt;:   retq   </span><br></pre></td></tr></table></figure><p>看著有點複雜，觀察到 <code>sscanf</code></p><p>看一眼 <code>0x4025cf</code>，<code>x/s 0x4025cf</code>，得到 <code>%d %d</code>，看起來是輸入了兩個整數</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400f47 &lt;+4&gt;:     lea    0xc(%rsp),%rcx</span><br><span class="line">0x0000000000400f4c &lt;+9&gt;:     lea    0x8(%rsp),%rdx</span><br></pre></td></tr></table></figure><p>這兩個整數依次存為 <code>rsp+8</code>, <code>rsp+c</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400f6a &lt;+39&gt;:    cmpl   $0x7,0x8(%rsp)</span><br><span class="line">0x0000000000400f6f &lt;+44&gt;:    ja     0x400fad &lt;phase_3+106&gt;</span><br></pre></td></tr></table></figure><p>這裡判斷了第一個數，如果這個數大於 <code>7</code>，就會引爆</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400f71 &lt;+46&gt;:    mov    0x8(%rsp),%eax</span><br><span class="line">0x0000000000400f75 &lt;+50&gt;:    jmpq   *0x402470(,%rax,8)</span><br></pre></td></tr></table></figure><p>我們把第一個整數存入 <code>eax</code>，這裡很明顯是一個 switch 的跳轉表：<code>0x402470 + 8*rax</code></p><p><code>eax</code> 和 <code>rax</code> 實際上是同一個東西，前者是這個暫存器的前 32 位，後者是這個暫存器的完整 64 位，這是歷史遺留產物，實際上，還有 <code>ax</code>, <code>ah</code>, <code>al</code>，為了向後相容而保留。</p><p>我們來讀取 10 個，<code>x/10x 0x402470</code>，得到：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0x402470</span>:       <span class="number">0</span>x00400f7c      <span class="number">0</span>x00000000      <span class="number">0</span>x00400fb9      <span class="number">0</span>x00000000</span><br><span class="line"><span class="attribute">0x402480</span>:       <span class="number">0</span>x00400f83      <span class="number">0</span>x00000000      <span class="number">0</span>x00400f8a      <span class="number">0</span>x00000000</span><br><span class="line"><span class="attribute">0x402490</span>:       <span class="number">0</span>x00400f91      <span class="number">0</span>x00000000</span><br></pre></td></tr></table></figure><p>這是 <code>switch</code> 語句的跳轉表，與匯編代碼中對應。</p><p>我們隨便選一個就能得到正確答案，如，<code>0</code> 對應 <code>0x00400f7c</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400f7c &lt;+57&gt;:    mov    $0xcf,%eax</span><br><span class="line">0x0000000000400f81 &lt;+62&gt;:    jmp    0x400fbe &lt;phase_3+123&gt;</span><br><span class="line">...</span><br><span class="line">0x0000000000400fbe &lt;+123&gt;:   cmp    0xc(%rsp),%eax</span><br><span class="line">0x0000000000400fc2 &lt;+127&gt;:   je     0x400fc9 &lt;phase_3+134&gt;</span><br><span class="line">0x0000000000400fc4 &lt;+129&gt;:   callq  0x40143a &lt;explode_bomb&gt;</span><br></pre></td></tr></table></figure><p>第二個數和 <code>eax</code> 比較，相等就拆除成功</p><p>我們得到第二個數 <code>0xcf = 207</code></p><p>於是，答案是 <code>0 207</code></p><p>實際上，答案並不唯一，觀察代碼可以知道，每一個 <code>switch</code> 分支中，都對應了一個第二個整數的正確答案。</p><h2 id="phase-4"><a class="markdownIt-Anchor" href="#phase-4"></a> Phase 4</h2><p>反編譯：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_4:</span><br><span class="line">   0x000000000040100c &lt;+0&gt;:     sub    $0x18,%rsp</span><br><span class="line">   0x0000000000401010 &lt;+4&gt;:     lea    0xc(%rsp),%rcx</span><br><span class="line">   0x0000000000401015 &lt;+9&gt;:     lea    0x8(%rsp),%rdx</span><br><span class="line">   0x000000000040101a &lt;+14&gt;:    mov    $0x4025cf,%esi</span><br><span class="line">   0x000000000040101f &lt;+19&gt;:    mov    $0x0,%eax</span><br><span class="line">   0x0000000000401024 &lt;+24&gt;:    callq  0x400bf0 &lt;__isoc99_sscanf@plt&gt;</span><br><span class="line">   0x0000000000401029 &lt;+29&gt;:    cmp    $0x2,%eax</span><br><span class="line">   0x000000000040102c &lt;+32&gt;:    jne    0x401035 &lt;phase_4+41&gt;</span><br><span class="line">   0x000000000040102e &lt;+34&gt;:    cmpl   $0xe,0x8(%rsp)</span><br><span class="line">   0x0000000000401033 &lt;+39&gt;:    jbe    0x40103a &lt;phase_4+46&gt;</span><br><span class="line">   0x0000000000401035 &lt;+41&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x000000000040103a &lt;+46&gt;:    mov    $0xe,%edx</span><br><span class="line">   0x000000000040103f &lt;+51&gt;:    mov    $0x0,%esi</span><br><span class="line">   0x0000000000401044 &lt;+56&gt;:    mov    0x8(%rsp),%edi</span><br><span class="line">   0x0000000000401048 &lt;+60&gt;:    callq  0x400fce &lt;func4&gt;</span><br><span class="line">   0x000000000040104d &lt;+65&gt;:    test   %eax,%eax</span><br><span class="line">   0x000000000040104f &lt;+67&gt;:    jne    0x401058 &lt;phase_4+76&gt;</span><br><span class="line">   0x0000000000401051 &lt;+69&gt;:    cmpl   $0x0,0xc(%rsp)</span><br><span class="line">   0x0000000000401056 &lt;+74&gt;:    je     0x40105d &lt;phase_4+81&gt;</span><br><span class="line">   0x0000000000401058 &lt;+76&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x000000000040105d &lt;+81&gt;:    add    $0x18,%rsp</span><br><span class="line">   0x0000000000401061 &lt;+85&gt;:    retq   </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><p>我們還是看到 <code>sscanf</code></p><p>讀一下 <code>0x4025cf</code>，得到 <code>%d %d</code>，看起來又是讀兩個數字，分別存入 <code>rdx</code>, <code>rcx</code></p><p>接著往下讀，<code>jbe    0x40103a</code>，要求 <code>rdx &lt;= 14</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0x000000000040103a &lt;+46&gt;:    mov    $0xe,%edx</span><br><span class="line">0x000000000040103f &lt;+51&gt;:    mov    $0x0,%esi</span><br><span class="line">0x0000000000401044 &lt;+56&gt;:    mov    0x8(%rsp),%edi</span><br></pre></td></tr></table></figure><p>明顯在傳參，調用了 <code>func4</code></p><p>我們先不急著看 <code>func4</code>，接著往下讀</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0x000000000040104d &lt;+65&gt;:    test   %eax,%eax</span><br><span class="line">0x000000000040104f &lt;+67&gt;:    jne    0x401058 &lt;phase_4+76&gt;</span><br><span class="line">...</span><br><span class="line">0x0000000000401058 &lt;+76&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br></pre></td></tr></table></figure><p>回顧一下暫存器知識，<code>eax</code> 在這裡是函數的返回值，這裡要求返回值等於 <code>0</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401051 &lt;+69&gt;:    cmpl   $0x0,0xc(%rsp)</span><br><span class="line">0x0000000000401056 &lt;+74&gt;:    je     0x40105d &lt;phase_4+81&gt;</span><br></pre></td></tr></table></figure><p>這裡要求讀取到的第二個數是 <code>0</code>，算是得到了半個答案</p><p>接下來我們看 <code>func4</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function func4:</span><br><span class="line">   0x0000000000400fce &lt;+0&gt;:     sub    $0x8,%rsp</span><br><span class="line">   0x0000000000400fd2 &lt;+4&gt;:     mov    %edx,%eax</span><br><span class="line">   0x0000000000400fd4 &lt;+6&gt;:     sub    %esi,%eax</span><br><span class="line">   0x0000000000400fd6 &lt;+8&gt;:     mov    %eax,%ecx</span><br><span class="line">   0x0000000000400fd8 &lt;+10&gt;:    shr    $0x1f,%ecx</span><br><span class="line">   0x0000000000400fdb &lt;+13&gt;:    add    %ecx,%eax</span><br><span class="line">   0x0000000000400fdd &lt;+15&gt;:    sar    %eax</span><br><span class="line">   0x0000000000400fdf &lt;+17&gt;:    lea    (%rax,%rsi,1),%ecx</span><br><span class="line">   0x0000000000400fe2 &lt;+20&gt;:    cmp    %edi,%ecx</span><br><span class="line">   0x0000000000400fe4 &lt;+22&gt;:    jle    0x400ff2 &lt;func4+36&gt;</span><br><span class="line">   0x0000000000400fe6 &lt;+24&gt;:    lea    -0x1(%rcx),%edx</span><br><span class="line">   0x0000000000400fe9 &lt;+27&gt;:    callq  0x400fce &lt;func4&gt;</span><br><span class="line">   0x0000000000400fee &lt;+32&gt;:    add    %eax,%eax</span><br><span class="line">   0x0000000000400ff0 &lt;+34&gt;:    jmp    0x401007 &lt;func4+57&gt;</span><br><span class="line">   0x0000000000400ff2 &lt;+36&gt;:    mov    $0x0,%eax</span><br><span class="line">   0x0000000000400ff7 &lt;+41&gt;:    cmp    %edi,%ecx</span><br><span class="line">   0x0000000000400ff9 &lt;+43&gt;:    jge    0x401007 &lt;func4+57&gt;</span><br><span class="line">   0x0000000000400ffb &lt;+45&gt;:    lea    0x1(%rcx),%esi</span><br><span class="line">   0x0000000000400ffe &lt;+48&gt;:    callq  0x400fce &lt;func4&gt;</span><br><span class="line">   0x0000000000401003 &lt;+53&gt;:    lea    0x1(%rax,%rax,1),%eax</span><br><span class="line">   0x0000000000401007 &lt;+57&gt;:    add    $0x8,%rsp</span><br><span class="line">   0x000000000040100b &lt;+61&gt;:    retq   </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><p>這個代碼裡面包含遞迴，我們可以手動把這段代碼翻譯到 C 語言：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// edx = 14, esi = 0, edi = a</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">func4</span><span class="params">(<span class="type">int</span> edi, <span class="type">int</span> esi, <span class="type">int</span> edx)</span>&#123;</span><br><span class="line">    <span class="type">int</span> mid = l + ((r-l)&gt;&gt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(mid &lt;= a)&#123;</span><br><span class="line">        <span class="keyword">if</span>(mid==a)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>*func4(a, l, r) + <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        r = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>*func4(a, l, r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>這是二分尋找，我們很容易得到答案 <code>a=7</code>，於是返回 <code>0</code></p><p>得到最終的答案 <code>7 0</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400fd2 &lt;+4&gt;:     mov    %edx,%eax</span><br><span class="line">0x0000000000400fd4 &lt;+6&gt;:     sub    %esi,%eax</span><br><span class="line">0x0000000000400fd6 &lt;+8&gt;:     mov    %eax,%ecx</span><br><span class="line">0x0000000000400fd8 &lt;+10&gt;:    shr    $0x1f,%ecx</span><br><span class="line">0x0000000000400fdb &lt;+13&gt;:    add    %ecx,%eax</span><br><span class="line">0x0000000000400fdd &lt;+15&gt;:    sar    %eax</span><br><span class="line">0x0000000000400fdf &lt;+17&gt;:    lea    (%rax,%rsi,1),%ecx</span><br></pre></td></tr></table></figure><p>這一段代碼就是在計算 <code>mid</code>，非常好理解，但是有個問題：<code>shr    $0x1f,%ecx</code> 是在做什麼？</p><h3 id="偏置"><a class="markdownIt-Anchor" href="#偏置"></a> 偏置</h3><p>整數除法要求向零捨入。對於正數，向下捨入；對於負數，向上捨入。除以<code>2</code>的冪可以用右移操作替代。</p><p>但是，對於補碼右移，很可能出現捨入錯誤。</p><p>我們進行右移的時候，其實是捨去了最低位，是一種向下取整</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>x</mi><mo>=</mo><munder><munder><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mi>k</mi></mrow><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>x</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mrow><mo stretchy="true">⏟</mo></munder><mtext>高位部分</mtext></munder><mo>+</mo><munder><munder><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>x</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mrow><mo stretchy="true">⏟</mo></munder><mtext>低位部分</mtext></munder></mrow><annotation encoding="application/x-tex">x = \underbrace{\sum_{i=k}^{w-1} x_i 2^i}_{\text{高位部分}} + \underbrace{\sum_{i=0}^{k-1} x_i 2^i}_{\text{低位部分}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:4.429557em;vertical-align:-2.628444em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000002em;"><span style="top:-1.172669em;"><span class="pstrut" style="height:3.801113em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">高位部分</span></span></span></span></span><span style="top:-3.801113em;"><span class="pstrut" style="height:3.801113em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000002em;"><span class="svg-align" style="top:-1.8509999999999998em;"><span class="pstrut" style="height:3.801113em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class="brace-center" style="height:0.548em;"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class="brace-right" style="height:0.548em;"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style="top:-3.801113em;"><span class="pstrut" style="height:3.801113em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000002em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8746639999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9501130000000002em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.628444em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:4.440113em;vertical-align:-2.604em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8361130000000003em;"><span style="top:-1.2321130000000005em;"><span class="pstrut" style="height:3.8361130000000006em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">低位部分</span></span></span></span></span><span style="top:-3.836113em;"><span class="pstrut" style="height:3.8361130000000006em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8361130000000006em;"><span class="svg-align" style="top:-1.910444em;"><span class="pstrut" style="height:3.836113em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class="brace-center" style="height:0.548em;"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class="brace-right" style="height:0.548em;"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style="top:-3.836113em;"><span class="pstrut" style="height:3.836113em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8361130000000003em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8746639999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.925669em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.604em;"><span></span></span></span></span></span></span></span></span></span></p><p>當我們執行右移 <code>x &gt;&gt; k</code> 時：高位部分的權重全部除以了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">2^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>，變成了整數結果。低位部分（餘數）直接被丟棄了。</p><p>對於負數而言，這一操作進行了向下取整，但我們要求對負數進行向上取整。</p><p>因此，我們需要引入偏置。</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>對於整數 </mtext><mi>x</mi><mtext> 和 </mtext><mi>y</mi><mo stretchy="false">(</mo><mi>y</mi><mo>&gt;</mo><mn>0</mn><mo stretchy="false">)</mo><mtext>，</mtext><mo stretchy="false">⌈</mo><mi>x</mi><mi mathvariant="normal">/</mi><mi>y</mi><mo stretchy="false">⌉</mo><mo>=</mo><mo stretchy="false">⌊</mo><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>y</mi><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex">\text{對於整數 } x \text{ 和 } y(y&gt;0)，\lceil x/y \rceil = \lfloor (x+y-1)/y \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord cjk_fallback">對於整數</span><span class="mord"> </span></span><span class="mord mathnormal">x</span><span class="mord text"><span class="mord"> </span><span class="mord cjk_fallback">和</span><span class="mord"> </span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mord cjk_fallback">，</span><span class="mopen">⌈</span><span class="mord mathnormal">x</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">⌉</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌊</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">⌋</span></span></span></span></span></p><p>於是 <code>(x+(1&lt;&lt;k)-1)&gt;&gt;k</code> 得到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">⌈</mo><mi>x</mi><mi mathvariant="normal">/</mi><msup><mn>2</mn><mi>k</mi></msup><mo stretchy="false">⌉</mo></mrow><annotation encoding="application/x-tex">\lceil x/2^k \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mopen">⌈</span><span class="mord mathnormal">x</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mclose">⌉</span></span></span></span></p><p>也就是下面這兩行的含義</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000400fd8 &lt;+10&gt;:    shr    $0x1f,%ecx</span><br><span class="line">0x0000000000400fdb &lt;+13&gt;:    add    %ecx,%eax</span><br></pre></td></tr></table></figure><h2 id="phase-5"><a class="markdownIt-Anchor" href="#phase-5"></a> Phase 5</h2><p>我們先<code>disas</code>看代碼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_5:</span><br><span class="line">   0x0000000000401062 &lt;+0&gt;:     push   %rbx</span><br><span class="line">   0x0000000000401063 &lt;+1&gt;:     sub    $0x20,%rsp</span><br><span class="line">   0x0000000000401067 &lt;+5&gt;:     mov    %rdi,%rbx</span><br><span class="line">   0x000000000040106a &lt;+8&gt;:     mov    %fs:0x28,%rax</span><br><span class="line">   0x0000000000401073 &lt;+17&gt;:    mov    %rax,0x18(%rsp)</span><br><span class="line">   0x0000000000401078 &lt;+22&gt;:    xor    %eax,%eax</span><br><span class="line">   0x000000000040107a &lt;+24&gt;:    callq  0x40131b &lt;string_length&gt;</span><br><span class="line">   0x000000000040107f &lt;+29&gt;:    cmp    $0x6,%eax</span><br><span class="line">   0x0000000000401082 &lt;+32&gt;:    je     0x4010d2 &lt;phase_5+112&gt;</span><br><span class="line">   0x0000000000401084 &lt;+34&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401089 &lt;+39&gt;:    jmp    0x4010d2 &lt;phase_5+112&gt;</span><br><span class="line">   0x000000000040108b &lt;+41&gt;:    movzbl (%rbx,%rax,1),%ecx</span><br><span class="line">   0x000000000040108f &lt;+45&gt;:    mov    %cl,(%rsp)</span><br><span class="line">   0x0000000000401092 &lt;+48&gt;:    mov    (%rsp),%rdx</span><br><span class="line">   0x0000000000401096 &lt;+52&gt;:    and    $0xf,%edx</span><br><span class="line">   0x0000000000401099 &lt;+55&gt;:    movzbl 0x4024b0(%rdx),%edx</span><br><span class="line">   0x00000000004010a0 &lt;+62&gt;:    mov    %dl,0x10(%rsp,%rax,1)</span><br><span class="line">   0x00000000004010a4 &lt;+66&gt;:    add    $0x1,%rax</span><br><span class="line">   0x00000000004010a8 &lt;+70&gt;:    cmp    $0x6,%rax</span><br><span class="line">   0x00000000004010ac &lt;+74&gt;:    jne    0x40108b &lt;phase_5+41&gt;</span><br><span class="line">   0x00000000004010ae &lt;+76&gt;:    movb   $0x0,0x16(%rsp)</span><br><span class="line">   0x00000000004010b3 &lt;+81&gt;:    mov    $0x40245e,%esi</span><br><span class="line">   0x00000000004010b8 &lt;+86&gt;:    lea    0x10(%rsp),%rdi</span><br><span class="line">   0x00000000004010bd &lt;+91&gt;:    callq  0x401338 &lt;strings_not_equal&gt;</span><br><span class="line">   0x00000000004010c2 &lt;+96&gt;:    test   %eax,%eax</span><br><span class="line">   0x00000000004010c4 &lt;+98&gt;:    je     0x4010d9 &lt;phase_5+119&gt;</span><br><span class="line">   0x00000000004010c6 &lt;+100&gt;:   callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x00000000004010cb &lt;+105&gt;:   nopl   0x0(%rax,%rax,1)</span><br><span class="line">   0x00000000004010d0 &lt;+110&gt;:   jmp    0x4010d9 &lt;phase_5+119&gt;</span><br><span class="line">   0x00000000004010d2 &lt;+112&gt;:   mov    $0x0,%eax</span><br><span class="line">   0x00000000004010d7 &lt;+117&gt;:   jmp    0x40108b &lt;phase_5+41&gt;</span><br><span class="line">   0x00000000004010d9 &lt;+119&gt;:   mov    0x18(%rsp),%rax</span><br><span class="line">   0x00000000004010de &lt;+124&gt;:   xor    %fs:0x28,%rax</span><br><span class="line">   0x00000000004010e7 &lt;+133&gt;:   je     0x4010ee &lt;phase_5+140&gt;</span><br><span class="line">   0x00000000004010e9 &lt;+135&gt;:   callq  0x400b30 &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">   0x00000000004010ee &lt;+140&gt;:   add    $0x20,%rsp</span><br><span class="line">   0x00000000004010f2 &lt;+144&gt;:   pop    %rbx</span><br><span class="line">   0x00000000004010f3 &lt;+145&gt;:   retq   </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><p>很快識別出來，這一段代碼中有兩個記憶體地址：<code>0x4024b0</code> <code>0x40245e</code></p><p>讀一下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0x4024b0 &lt;array.3449&gt;:  &quot;maduiersnfotvbylSo you think you can stop the bomb with ctrl-c, do you?&quot;</span><br><span class="line">0x40245e:       &quot;flyers&quot;</span><br></pre></td></tr></table></figure><p>第一個 <code>array.3449</code> 是一個字串，我們就記為 <code>a[]</code></p><p>上面的代碼可以分個段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401062 &lt;+0&gt;:     push   %rbx</span><br><span class="line">0x0000000000401063 &lt;+1&gt;:     sub    $0x20,%rsp</span><br><span class="line">0x0000000000401067 &lt;+5&gt;:     mov    %rdi,%rbx</span><br><span class="line">0x000000000040106a &lt;+8&gt;:     mov    %fs:0x28,%rax</span><br><span class="line">0x0000000000401073 &lt;+17&gt;:    mov    %rax,0x18(%rsp)</span><br><span class="line">0x0000000000401078 &lt;+22&gt;:    xor    %eax,%eax</span><br><span class="line">0x000000000040107a &lt;+24&gt;:    callq  0x40131b &lt;string_length&gt;</span><br><span class="line">0x000000000040107f &lt;+29&gt;:    cmp    $0x6,%eax</span><br><span class="line">0x0000000000401082 &lt;+32&gt;:    je     0x4010d2 &lt;phase_5+112&gt;</span><br><span class="line">0x0000000000401084 &lt;+34&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x0000000000401089 &lt;+39&gt;:    jmp    0x4010d2 &lt;phase_5+112&gt;</span><br></pre></td></tr></table></figure><p>這裡是前面初始化的部分，我們可以看到預留了棧空間，應該是讀取了一個字串，長度為 6，存在棧上。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004010d2 &lt;+112&gt;:   mov    $0x0,%eax</span><br><span class="line">0x00000000004010d7 &lt;+117&gt;:   jmp    0x40108b &lt;phase_5+41&gt;</span><br><span class="line">...</span><br><span class="line">0x000000000040108b &lt;+41&gt;:    movzbl (%rbx,%rax,1),%ecx</span><br><span class="line">0x000000000040108f &lt;+45&gt;:    mov    %cl,(%rsp)</span><br><span class="line">0x0000000000401092 &lt;+48&gt;:    mov    (%rsp),%rdx</span><br><span class="line">0x0000000000401096 &lt;+52&gt;:    and    $0xf,%edx</span><br><span class="line">0x0000000000401099 &lt;+55&gt;:    movzbl 0x4024b0(%rdx),%edx</span><br><span class="line">0x00000000004010a0 &lt;+62&gt;:    mov    %dl,0x10(%rsp,%rax,1)</span><br><span class="line">0x00000000004010a4 &lt;+66&gt;:    add    $0x1,%rax</span><br><span class="line">0x00000000004010a8 &lt;+70&gt;:    cmp    $0x6,%rax</span><br><span class="line">0x00000000004010ac &lt;+74&gt;:    jne    0x40108b &lt;phase_5+41&gt;</span><br></pre></td></tr></table></figure><p>以上是一個 for 循環，循環 6 次，取 <code>edx</code> 的後四位，這是一個 0~15 的數，記為 <code>i</code>，於是把 <code>a[i]</code> 加入棧中對應位置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004010ae &lt;+76&gt;:    movb   $0x0,0x16(%rsp)</span><br><span class="line">0x00000000004010b3 &lt;+81&gt;:    mov    $0x40245e,%esi</span><br><span class="line">0x00000000004010b8 &lt;+86&gt;:    lea    0x10(%rsp),%rdi</span><br><span class="line">0x00000000004010bd &lt;+91&gt;:    callq  0x401338 &lt;strings_not_equal&gt;</span><br><span class="line">0x00000000004010c2 &lt;+96&gt;:    test   %eax,%eax</span><br><span class="line">0x00000000004010c4 &lt;+98&gt;:    je     0x4010d9 &lt;phase_5+119&gt;</span><br><span class="line">0x00000000004010c6 &lt;+100&gt;:   callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x00000000004010cb &lt;+105&gt;:   nopl   0x0(%rax,%rax,1)</span><br><span class="line">0x00000000004010d0 &lt;+110&gt;:   jmp    0x4010d9 &lt;phase_5+119&gt;</span><br><span class="line">...</span><br><span class="line">0x00000000004010d9 &lt;+119&gt;:   mov    0x18(%rsp),%rax</span><br><span class="line">0x00000000004010de &lt;+124&gt;:   xor    %fs:0x28,%rax</span><br><span class="line">0x00000000004010e7 &lt;+133&gt;:   je     0x4010ee &lt;phase_5+140&gt;</span><br><span class="line">0x00000000004010e9 &lt;+135&gt;:   callq  0x400b30 &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">0x00000000004010ee &lt;+140&gt;:   add    $0x20,%rsp</span><br><span class="line">0x00000000004010f2 &lt;+144&gt;:   pop    %rbx</span><br><span class="line">0x00000000004010f3 &lt;+145&gt;:   retq   </span><br></pre></td></tr></table></figure><p>這裡有價值的片段只有</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004010ae &lt;+76&gt;:    movb   $0x0,0x16(%rsp)</span><br><span class="line">0x00000000004010b3 &lt;+81&gt;:    mov    $0x40245e,%esi</span><br><span class="line">0x00000000004010b8 &lt;+86&gt;:    lea    0x10(%rsp),%rdi</span><br><span class="line">0x00000000004010bd &lt;+91&gt;:    callq  0x401338 &lt;strings_not_equal&gt;</span><br><span class="line">0x00000000004010c2 &lt;+96&gt;:    test   %eax,%eax</span><br><span class="line">0x00000000004010c4 &lt;+98&gt;:    je     0x4010d9 &lt;phase_5+119&gt;</span><br><span class="line">0x00000000004010c6 &lt;+100&gt;:   callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x00000000004010cb &lt;+105&gt;:   nopl   0x0(%rax,%rax,1)</span><br><span class="line">0x00000000004010d0 &lt;+110&gt;:   jmp    0x4010d9 &lt;phase_5+119&gt;</span><br></pre></td></tr></table></figure><p>這是比較字串。</p><p>我們不難發現，這道題的邏輯是查表映射：程序會把輸入字元對 16 取模得到的數值作為索引，去尋找那個長字串（maduiers…）中的字元。 為了讓最終取出來的字元拼成 flyers，我們需要反向尋找 flyers 中每個字母在表中對應的下標位置，然後構造一個輸入字串，使其每一位的 ASCII 碼模 16 後正好等於這些下標。</p><p>這個過程可以總結為： Input Char -&gt; ASCII Hex -&gt; AND 0xF (取後4位) -&gt; Table Index -&gt; Lookup Table Char -&gt; Target “flyers”</p><p>於是我們可以得到答案 <code>ionefg</code> 或者 <code>IONEFG</code></p><p>其實還可以有一些其他答案，留給讀者去發現</p><h2 id="phase-6"><a class="markdownIt-Anchor" href="#phase-6"></a> Phase 6</h2><p>先看代碼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004010f4 &lt;+0&gt;:     push   %r14</span><br><span class="line">0x00000000004010f6 &lt;+2&gt;:     push   %r13</span><br><span class="line">0x00000000004010f8 &lt;+4&gt;:     push   %r12</span><br><span class="line">0x00000000004010fa &lt;+6&gt;:     push   %rbp</span><br><span class="line">0x00000000004010fb &lt;+7&gt;:     push   %rbx</span><br><span class="line">0x00000000004010fc &lt;+8&gt;:     sub    $0x50,%rsp</span><br><span class="line">0x0000000000401100 &lt;+12&gt;:    mov    %rsp,%r13</span><br><span class="line">0x0000000000401103 &lt;+15&gt;:    mov    %rsp,%rsi</span><br><span class="line">0x0000000000401106 &lt;+18&gt;:    callq  0x40145c &lt;read_six_numbers&gt;</span><br><span class="line">0x000000000040110b &lt;+23&gt;:    mov    %rsp,%r14</span><br><span class="line">0x000000000040110e &lt;+26&gt;:    mov    $0x0,%r12d</span><br><span class="line">0x0000000000401114 &lt;+32&gt;:    mov    %r13,%rbp</span><br><span class="line">0x0000000000401117 &lt;+35&gt;:    mov    0x0(%r13),%eax</span><br><span class="line">0x000000000040111b &lt;+39&gt;:    sub    $0x1,%eax</span><br><span class="line">0x000000000040111e &lt;+42&gt;:    cmp    $0x5,%eax</span><br><span class="line">0x0000000000401121 &lt;+45&gt;:    jbe    0x401128 &lt;phase_6+52&gt;</span><br><span class="line">0x0000000000401123 &lt;+47&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x0000000000401128 &lt;+52&gt;:    add    $0x1,%r12d</span><br><span class="line">0x000000000040112c &lt;+56&gt;:    cmp    $0x6,%r12d</span><br><span class="line">0x0000000000401130 &lt;+60&gt;:    je     0x401153 &lt;phase_6+95&gt;</span><br><span class="line">0x0000000000401132 &lt;+62&gt;:    mov    %r12d,%ebx</span><br><span class="line">0x0000000000401135 &lt;+65&gt;:    movslq %ebx,%rax</span><br><span class="line">0x0000000000401138 &lt;+68&gt;:    mov    (%rsp,%rax,4),%eax</span><br><span class="line">0x000000000040113b &lt;+71&gt;:    cmp    %eax,0x0(%rbp)</span><br><span class="line">0x000000000040113e &lt;+74&gt;:    jne    0x401145 &lt;phase_6+81&gt;</span><br><span class="line">0x0000000000401140 &lt;+76&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x0000000000401145 &lt;+81&gt;:    add    $0x1,%ebx</span><br><span class="line">0x0000000000401148 &lt;+84&gt;:    cmp    $0x5,%ebx</span><br><span class="line">0x000000000040114b &lt;+87&gt;:    jle    0x401135 &lt;phase_6+65&gt;</span><br><span class="line">0x000000000040114d &lt;+89&gt;:    add    $0x4,%r13</span><br><span class="line">0x0000000000401151 &lt;+93&gt;:    jmp    0x401114 &lt;phase_6+32&gt;</span><br><span class="line">0x0000000000401153 &lt;+95&gt;:    lea    0x18(%rsp),%rsi</span><br><span class="line">0x0000000000401158 &lt;+100&gt;:   mov    %r14,%rax</span><br><span class="line">0x000000000040115b &lt;+103&gt;:   mov    $0x7,%ecx</span><br><span class="line">0x0000000000401160 &lt;+108&gt;:   mov    %ecx,%edx</span><br><span class="line">0x0000000000401162 &lt;+110&gt;:   sub    (%rax),%edx</span><br><span class="line">0x0000000000401164 &lt;+112&gt;:   mov    %edx,(%rax)</span><br><span class="line">0x0000000000401166 &lt;+114&gt;:   add    $0x4,%rax</span><br><span class="line">0x000000000040116a &lt;+118&gt;:   cmp    %rsi,%rax</span><br><span class="line">0x000000000040116d &lt;+121&gt;:   jne    0x401160 &lt;phase_6+108&gt;</span><br><span class="line">0x000000000040116f &lt;+123&gt;:   mov    $0x0,%esi</span><br><span class="line">0x0000000000401174 &lt;+128&gt;:   jmp    0x401197 &lt;phase_6+163&gt;</span><br><span class="line">0x0000000000401176 &lt;+130&gt;:   mov    0x8(%rdx),%rdx</span><br><span class="line">0x000000000040117a &lt;+134&gt;:   add    $0x1,%eax</span><br><span class="line">0x000000000040117d &lt;+137&gt;:   cmp    %ecx,%eax</span><br><span class="line">0x000000000040117f &lt;+139&gt;:   jne    0x401176 &lt;phase_6+130&gt;</span><br><span class="line">0x0000000000401181 &lt;+141&gt;:   jmp    0x401188 &lt;phase_6+148&gt;</span><br><span class="line">0x0000000000401183 &lt;+143&gt;:   mov    $0x6032d0,%edx</span><br><span class="line">0x0000000000401188 &lt;+148&gt;:   mov    %rdx,0x20(%rsp,%rsi,2)</span><br><span class="line">0x000000000040118d &lt;+153&gt;:   add    $0x4,%rsi</span><br><span class="line">0x0000000000401191 &lt;+157&gt;:   cmp    $0x18,%rsi</span><br><span class="line">0x0000000000401195 &lt;+161&gt;:   je     0x4011ab &lt;phase_6+183&gt;</span><br><span class="line">0x0000000000401197 &lt;+163&gt;:   mov    (%rsp,%rsi,1),%ecx</span><br><span class="line">0x000000000040119a &lt;+166&gt;:   cmp    $0x1,%ecx</span><br><span class="line">0x000000000040119d &lt;+169&gt;:   jle    0x401183 &lt;phase_6+143&gt;</span><br><span class="line">0x000000000040119f &lt;+171&gt;:   mov    $0x1,%eax</span><br><span class="line">0x00000000004011a4 &lt;+176&gt;:   mov    $0x6032d0,%edx</span><br><span class="line">0x00000000004011a9 &lt;+181&gt;:   jmp    0x401176 &lt;phase_6+130&gt;</span><br><span class="line">0x00000000004011ab &lt;+183&gt;:   mov    0x20(%rsp),%rbx</span><br><span class="line">0x00000000004011b0 &lt;+188&gt;:   lea    0x28(%rsp),%rax</span><br><span class="line">0x00000000004011b5 &lt;+193&gt;:   lea    0x50(%rsp),%rsi</span><br><span class="line">0x00000000004011ba &lt;+198&gt;:   mov    %rbx,%rcx</span><br><span class="line">0x00000000004011bd &lt;+201&gt;:   mov    (%rax),%rdx</span><br><span class="line">0x00000000004011c0 &lt;+204&gt;:   mov    %rdx,0x8(%rcx)</span><br><span class="line">0x00000000004011c4 &lt;+208&gt;:   add    $0x8,%rax</span><br><span class="line">0x00000000004011c8 &lt;+212&gt;:   cmp    %rsi,%rax</span><br><span class="line">0x00000000004011cb &lt;+215&gt;:   je     0x4011d2 &lt;phase_6+222&gt;</span><br><span class="line">0x00000000004011cd &lt;+217&gt;:   mov    %rdx,%rcx</span><br><span class="line">0x00000000004011d0 &lt;+220&gt;:   jmp    0x4011bd &lt;phase_6+201&gt;</span><br><span class="line">0x00000000004011d2 &lt;+222&gt;:   movq   $0x0,0x8(%rdx)</span><br><span class="line">0x00000000004011da &lt;+230&gt;:   mov    $0x5,%ebp</span><br><span class="line">0x00000000004011df &lt;+235&gt;:   mov    0x8(%rbx),%rax</span><br><span class="line">0x00000000004011e3 &lt;+239&gt;:   mov    (%rax),%eax</span><br><span class="line">0x00000000004011e5 &lt;+241&gt;:   cmp    %eax,(%rbx)</span><br><span class="line">0x00000000004011e7 &lt;+243&gt;:   jge    0x4011ee &lt;phase_6+250&gt;</span><br><span class="line">0x00000000004011e9 &lt;+245&gt;:   callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x00000000004011ee &lt;+250&gt;:   mov    0x8(%rbx),%rbx</span><br><span class="line">0x00000000004011f2 &lt;+254&gt;:   sub    $0x1,%ebp</span><br><span class="line">0x00000000004011f5 &lt;+257&gt;:   jne    0x4011df &lt;phase_6+235&gt;</span><br><span class="line">0x00000000004011f7 &lt;+259&gt;:   add    $0x50,%rsp</span><br><span class="line">0x00000000004011fb &lt;+263&gt;:   pop    %rbx</span><br><span class="line">0x00000000004011fc &lt;+264&gt;:   pop    %rbp</span><br><span class="line">0x00000000004011fd &lt;+265&gt;:   pop    %r12</span><br><span class="line">0x00000000004011ff &lt;+267&gt;:   pop    %r13</span><br><span class="line">0x0000000000401201 &lt;+269&gt;:   pop    %r14</span><br><span class="line">0x0000000000401203 &lt;+271&gt;:   retq   </span><br></pre></td></tr></table></figure><p>分開來看：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004010f4 &lt;+0&gt;:     push   %r14</span><br><span class="line">0x00000000004010f6 &lt;+2&gt;:     push   %r13</span><br><span class="line">0x00000000004010f8 &lt;+4&gt;:     push   %r12</span><br><span class="line">0x00000000004010fa &lt;+6&gt;:     push   %rbp</span><br><span class="line">0x00000000004010fb &lt;+7&gt;:     push   %rbx</span><br><span class="line">0x00000000004010fc &lt;+8&gt;:     sub    $0x50,%rsp</span><br><span class="line">0x0000000000401100 &lt;+12&gt;:    mov    %rsp,%r13</span><br><span class="line">0x0000000000401103 &lt;+15&gt;:    mov    %rsp,%rsi</span><br></pre></td></tr></table></figure><p>這一段是設置棧幀</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401106 &lt;+18&gt;:    callq  0x40145c &lt;read_six_numbers&gt;</span><br></pre></td></tr></table></figure><p>這裡讀了 6 個數字，我們在 Phase 2 已經看到，這六個數字存在從 <code>rsp</code> 開始的一個數組中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">0x000000000040110b &lt;+23&gt;:    mov    %rsp,%r14</span><br><span class="line">0x000000000040110e &lt;+26&gt;:    mov    $0x0,%r12d</span><br><span class="line">0x0000000000401114 &lt;+32&gt;:    mov    %r13,%rbp</span><br><span class="line">0x0000000000401117 &lt;+35&gt;:    mov    0x0(%r13),%eax</span><br><span class="line">0x000000000040111b &lt;+39&gt;:    sub    $0x1,%eax</span><br><span class="line">0x000000000040111e &lt;+42&gt;:    cmp    $0x5,%eax</span><br><span class="line">0x0000000000401121 &lt;+45&gt;:    jbe    0x401128 &lt;phase_6+52&gt;</span><br><span class="line">0x0000000000401123 &lt;+47&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x0000000000401128 &lt;+52&gt;:    add    $0x1,%r12d</span><br><span class="line">0x000000000040112c &lt;+56&gt;:    cmp    $0x6,%r12d</span><br><span class="line">0x0000000000401130 &lt;+60&gt;:    je     0x401153 &lt;phase_6+95&gt;</span><br><span class="line">0x0000000000401132 &lt;+62&gt;:    mov    %r12d,%ebx</span><br><span class="line">0x0000000000401135 &lt;+65&gt;:    movslq %ebx,%rax</span><br><span class="line">0x0000000000401138 &lt;+68&gt;:    mov    (%rsp,%rax,4),%eax</span><br><span class="line">0x000000000040113b &lt;+71&gt;:    cmp    %eax,0x0(%rbp)</span><br><span class="line">0x000000000040113e &lt;+74&gt;:    jne    0x401145 &lt;phase_6+81&gt;</span><br><span class="line">0x0000000000401140 &lt;+76&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x0000000000401145 &lt;+81&gt;:    add    $0x1,%ebx</span><br><span class="line">0x0000000000401148 &lt;+84&gt;:    cmp    $0x5,%ebx</span><br><span class="line">0x000000000040114b &lt;+87&gt;:    jle    0x401135 &lt;phase_6+65&gt;</span><br><span class="line">0x000000000040114d &lt;+89&gt;:    add    $0x4,%r13</span><br><span class="line">0x0000000000401151 &lt;+93&gt;:    jmp    0x401114 &lt;phase_6+32&gt;</span><br></pre></td></tr></table></figure><p>此處代碼構建了一個典型的嵌套循環結構：外層循環由 <code>%r12d</code> 計數，內層循環則由 <code>%ebx</code> 控制。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401117 &lt;+35&gt;:    mov    0x0(%r13),%eax</span><br><span class="line">0x000000000040111b &lt;+39&gt;:    sub    $0x1,%eax</span><br><span class="line">0x000000000040111e &lt;+42&gt;:    cmp    $0x5,%eax</span><br><span class="line">...</span><br><span class="line">0x000000000040114d &lt;+89&gt;:    add    $0x4,%r13</span><br><span class="line">0x0000000000401151 &lt;+93&gt;:    jmp    0x401114 &lt;phase_6+32&gt;</span><br></pre></td></tr></table></figure><p>首先分析外層循環：它通過 <code>%r13</code> 指針遍歷輸入數組，首要任務是進行邊界檢查，確保讀取到的每一個數字都小於或等於 <code>6</code>。</p><p>再來看內層循環：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0x0000000000401132</span> &lt;+<span class="number">62</span>&gt;:    mov    %r12d,%ebx</span><br><span class="line"><span class="attribute">0x0000000000401135</span> &lt;+<span class="number">65</span>&gt;:    movslq %ebx,%rax</span><br><span class="line"><span class="attribute">0x0000000000401138</span> &lt;+<span class="number">68</span>&gt;:    mov    (%rsp,%rax,<span class="number">4</span>),%eax</span><br><span class="line"><span class="attribute">0x000000000040113b</span> &lt;+<span class="number">71</span>&gt;:    cmp    %eax,<span class="number">0</span>x0(%rbp)</span><br><span class="line"><span class="attribute">0x000000000040113e</span> &lt;+<span class="number">74</span>&gt;:    jne    <span class="number">0</span>x401145 &lt;phase_6+<span class="number">81</span>&gt;</span><br><span class="line"><span class="attribute">0x0000000000401140</span> &lt;+<span class="number">76</span>&gt;:    callq  <span class="number">0</span>x40143a &lt;explode_bomb&gt;</span><br><span class="line"><span class="attribute">0x0000000000401145</span> &lt;+<span class="number">81</span>&gt;:    add    $<span class="number">0</span>x1,%ebx</span><br><span class="line"><span class="attribute">0x0000000000401148</span> &lt;+<span class="number">84</span>&gt;:    cmp    $<span class="number">0</span>x5,%ebx</span><br><span class="line"><span class="attribute">0x000000000040114b</span> &lt;+<span class="number">87</span>&gt;:    jle    <span class="number">0</span>x401135 &lt;phase_6+<span class="number">65</span>&gt;</span><br></pre></td></tr></table></figure><p>這裡從當前外層數字開始，判斷數組之後的每一個數位（<code>int</code> 類型，4 位元組，故 <code>(%rsp,%rax,4)</code> 獲得當前數字），判斷這個數字是否和外層數字相同。</p><p>於是，我們發現，這一層循環判斷輸入的每個數字是否互不相同。</p><p>總結一下，這個嵌套循環檢查我們的輸入是否是六個互不相同的小於等於 6 的數字</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401153 &lt;+95&gt;:    lea    0x18(%rsp),%rsi</span><br><span class="line">0x0000000000401158 &lt;+100&gt;:   mov    %r14,%rax</span><br><span class="line">0x000000000040115b &lt;+103&gt;:   mov    $0x7,%ecx</span><br><span class="line">0x0000000000401160 &lt;+108&gt;:   mov    %ecx,%edx</span><br><span class="line">0x0000000000401162 &lt;+110&gt;:   sub    (%rax),%edx</span><br><span class="line">0x0000000000401164 &lt;+112&gt;:   mov    %edx,(%rax)</span><br><span class="line">0x0000000000401166 &lt;+114&gt;:   add    $0x4,%rax</span><br><span class="line">0x000000000040116a &lt;+118&gt;:   cmp    %rsi,%rax</span><br><span class="line">0x000000000040116d &lt;+121&gt;:   jne    0x401160 &lt;phase_6+108&gt;</span><br></pre></td></tr></table></figure><p>這裡又有一個循環。前文已知，<code>r14</code> 就是 <code>rsp</code>，也就是棧指針。這裡遍歷每一個數 <code>x</code>，重新賦值，<code>x = 7-x</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">0x000000000040116f &lt;+123&gt;:   mov    $0x0,%esi</span><br><span class="line">0x0000000000401174 &lt;+128&gt;:   jmp    0x401197 &lt;phase_6+163&gt;</span><br><span class="line">0x0000000000401176 &lt;+130&gt;:   mov    0x8(%rdx),%rdx</span><br><span class="line">0x000000000040117a &lt;+134&gt;:   add    $0x1,%eax</span><br><span class="line">0x000000000040117d &lt;+137&gt;:   cmp    %ecx,%eax</span><br><span class="line">0x000000000040117f &lt;+139&gt;:   jne    0x401176 &lt;phase_6+130&gt;</span><br><span class="line">0x0000000000401181 &lt;+141&gt;:   jmp    0x401188 &lt;phase_6+148&gt;</span><br><span class="line">0x0000000000401183 &lt;+143&gt;:   mov    $0x6032d0,%edx</span><br><span class="line">0x0000000000401188 &lt;+148&gt;:   mov    %rdx,0x20(%rsp,%rsi,2)</span><br><span class="line">0x000000000040118d &lt;+153&gt;:   add    $0x4,%rsi</span><br><span class="line">0x0000000000401191 &lt;+157&gt;:   cmp    $0x18,%rsi</span><br><span class="line">0x0000000000401195 &lt;+161&gt;:   je     0x4011ab &lt;phase_6+183&gt;</span><br><span class="line">0x0000000000401197 &lt;+163&gt;:   mov    (%rsp,%rsi,1),%ecx</span><br><span class="line">0x000000000040119a &lt;+166&gt;:   cmp    $0x1,%ecx</span><br><span class="line">0x000000000040119d &lt;+169&gt;:   jle    0x401183 &lt;phase_6+143&gt;</span><br><span class="line">0x000000000040119f &lt;+171&gt;:   mov    $0x1,%eax</span><br><span class="line">0x00000000004011a4 &lt;+176&gt;:   mov    $0x6032d0,%edx</span><br><span class="line">0x00000000004011a9 &lt;+181&gt;:   jmp    0x401176 &lt;phase_6+130&gt;</span><br></pre></td></tr></table></figure><p>先讀取輸入的元素 <code>x</code>，如果小於等於 <code>1</code>，把 <code>edx</code> 賦值為 <code>0x6032d0</code>，然後把 <code>x</code> 放在一個臨時數組中，然後繼續到下一個元素，直到遍歷完整個數組 (0x18 = 24 = 4*6)</p><p>如果元素 <code>x</code> 大於 <code>1</code>，把 <code>eax</code> 賦值為 <code>1</code>，<code>edx</code> 賦值為 <code>0x6032d0</code>，之後執行 <code>x-1</code> 次 <code>mov    0x8(%rdx),%rdx</code> 操作</p><p>這裡疑似是鍊表，出現了記憶體地址 <code>0x6032d0</code>，我們來看看：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(gdb) x/12xg 0x6032d0</span><br><span class="line">0x6032d0 &lt;node1&gt;:       0x000000010000014c      0x00000000006032e0</span><br><span class="line">0x6032e0 &lt;node2&gt;:       0x00000002000000a8      0x00000000006032f0</span><br><span class="line">0x6032f0 &lt;node3&gt;:       0x000000030000039c      0x0000000000603300</span><br><span class="line">0x603300 &lt;node4&gt;:       0x00000004000002b3      0x0000000000603310</span><br><span class="line">0x603310 &lt;node5&gt;:       0x00000005000001dd      0x0000000000603320</span><br><span class="line">0x603320 &lt;node6&gt;:       0x00000006000001bb      0x0000000000000000</span><br></pre></td></tr></table></figure><p>這裡注意，在 64 位系統中，指針占用 8 位元組（即 64 位）。</p><p>顯然是鍊表，<code>0x8(%rdx)</code> 代表 <code>next</code> 指針</p><p>故上述操作得到一個數組，設輸入數組的第 <code>i</code> 個數為 <code>x</code>，數組中第 <code>i</code> 個數對應鍊表中第 <code>x</code> 個數的地址。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004011ab &lt;+183&gt;:   mov    0x20(%rsp),%rbx</span><br><span class="line">0x00000000004011b0 &lt;+188&gt;:   lea    0x28(%rsp),%rax</span><br><span class="line">0x00000000004011b5 &lt;+193&gt;:   lea    0x50(%rsp),%rsi</span><br></pre></td></tr></table></figure><p>這裡是一些初始化。<code>rsi</code> 是邊界指針，標記循環的終止。<code>0x20</code> 到 <code>0x50</code> 正好 <code>6*8=48</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004011ba &lt;+198&gt;:   mov    %rbx,%rcx</span><br><span class="line">0x00000000004011bd &lt;+201&gt;:   mov    (%rax),%rdx</span><br><span class="line">0x00000000004011c0 &lt;+204&gt;:   mov    %rdx,0x8(%rcx)</span><br><span class="line">0x00000000004011c4 &lt;+208&gt;:   add    $0x8,%rax</span><br><span class="line">0x00000000004011c8 &lt;+212&gt;:   cmp    %rsi,%rax</span><br><span class="line">0x00000000004011cb &lt;+215&gt;:   je     0x4011d2 &lt;phase_6+222&gt;</span><br><span class="line">0x00000000004011cd &lt;+217&gt;:   mov    %rdx,%rcx</span><br><span class="line">0x00000000004011d0 &lt;+220&gt;:   jmp    0x4011bd &lt;phase_6+201&gt;</span><br></pre></td></tr></table></figure><p>這裡遍歷了我們剛才得到的鍊表地址數組。寫成 C 語言或許更好理解。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Node *current = node_ptrs[<span class="number">0</span>]; <span class="comment">// %rbx, %rcx 初始化</span></span><br><span class="line"><span class="type">int</span> i = <span class="number">1</span>; <span class="comment">// 對應 %rax 指向 node_ptrs[1]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (i &lt; <span class="number">6</span>) &#123;</span><br><span class="line">    Node *next_node = node_ptrs[i]; <span class="comment">// mov (%rax), %rdx</span></span><br><span class="line">    current-&gt;next = next_node;      <span class="comment">// mov %rdx, 0x8(%rcx)</span></span><br><span class="line">    current = next_node;            <span class="comment">// mov %rdx, %rcx</span></span><br><span class="line">    i++;                            <span class="comment">// add $0x8, %rax</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>這一個循環對於鍊表結構進行了修改。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004011d2 &lt;+222&gt;:   movq   $0x0,0x8(%rdx)</span><br></pre></td></tr></table></figure><p>這句話則把最後一個節點的 <code>next</code> 賦值為 <code>NULL</code>，確保鍊表結構</p><p>接下來又有一個循環：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004011da &lt;+230&gt;:   mov    $0x5,%ebp</span><br><span class="line">0x00000000004011df &lt;+235&gt;:   mov    0x8(%rbx),%rax</span><br><span class="line">0x00000000004011e3 &lt;+239&gt;:   mov    (%rax),%eax</span><br><span class="line">0x00000000004011e5 &lt;+241&gt;:   cmp    %eax,(%rbx)</span><br><span class="line">0x00000000004011e7 &lt;+243&gt;:   jge    0x4011ee &lt;phase_6+250&gt;</span><br><span class="line">0x00000000004011e9 &lt;+245&gt;:   callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x00000000004011ee &lt;+250&gt;:   mov    0x8(%rbx),%rbx</span><br><span class="line">0x00000000004011f2 &lt;+254&gt;:   sub    $0x1,%ebp</span><br><span class="line">0x00000000004011f5 &lt;+257&gt;:   jne    0x4011df &lt;phase_6+235&gt;</span><br></pre></td></tr></table></figure><p>遍歷鍊表，確保鍊表倒序排列。</p><p>看到這裡，我們就可以得到答案了：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(gdb) x/12xg 0x6032d0</span><br><span class="line">0x6032d0 &lt;node1&gt;:       0x000000010000014c      0x00000000006032e0</span><br><span class="line">0x6032e0 &lt;node2&gt;:       0x00000002000000a8      0x00000000006032f0</span><br><span class="line">0x6032f0 &lt;node3&gt;:       0x000000030000039c      0x0000000000603300</span><br><span class="line">0x603300 &lt;node4&gt;:       0x00000004000002b3      0x0000000000603310</span><br><span class="line">0x603310 &lt;node5&gt;:       0x00000005000001dd      0x0000000000603320</span><br><span class="line">0x603320 &lt;node6&gt;:       0x00000006000001bb      0x0000000000000000</span><br></pre></td></tr></table></figure><p>找到鍊表值的倒序索引即可，注意值是 <code>int</code> 類型，只取後四位。於是可以得到 <code>3 4 5 6 1 2</code></p><p>但我們還要注意，輸入進行過 <code>7-x</code> 操作（見上文），所以我們調整答案 <code>4 3 2 1 6 5</code></p><p>最後一個 Phase 有點複雜，巧妙融合了嵌套循環校驗、數組映射變換以及鍊表重組等多種技術。</p><h2 id="隱藏關"><a class="markdownIt-Anchor" href="#隱藏關"></a> 隱藏關</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Hmm...  Six phases must be more secure than one phase! */</span></span><br><span class="line">input = read_line();             <span class="comment">/* Get input                   */</span></span><br><span class="line">phase_1(input);                  <span class="comment">/* Run the phase               */</span></span><br><span class="line">phase_defused();                 <span class="comment">/* Drat!  They figured it out!</span></span><br><span class="line"><span class="comment">      * Let me know how they did it. */</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Phase 1 defused. How about the next one?\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* The second phase is harder.  No one will ever figure out</span></span><br><span class="line"><span class="comment"> * how to defuse this... */</span></span><br><span class="line">input = read_line();</span><br><span class="line">phase_2(input);</span><br><span class="line">phase_defused();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;That&#x27;s number 2.  Keep going!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* I guess this is too easy so far.  Some more complex code will</span></span><br><span class="line"><span class="comment"> * confuse people. */</span></span><br><span class="line">input = read_line();</span><br><span class="line">phase_3(input);</span><br><span class="line">phase_defused();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Halfway there!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Oh yeah?  Well, how good is your math?  Try on this saucy problem! */</span></span><br><span class="line">input = read_line();</span><br><span class="line">phase_4(input);</span><br><span class="line">phase_defused();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;So you got that one.  Try this one.\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Round and &#x27;round in memory we go, where we stop, the bomb blows! */</span></span><br><span class="line">input = read_line();</span><br><span class="line">phase_5(input);</span><br><span class="line">phase_defused();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Good work!  On to the next...\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* This phase will never be used, since no one will get past the</span></span><br><span class="line"><span class="comment"> * earlier ones.  But just in case, make this one extra hard. */</span></span><br><span class="line">input = read_line();</span><br><span class="line">phase_6(input);</span><br><span class="line">phase_defused();</span><br></pre></td></tr></table></figure><p><code>bomb</code> 代碼中，每一個 <code>phase</code> 後都運行 <code>phase_defused</code>。我們來看看：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_defused:</span><br><span class="line">   0x00000000004015c4 &lt;+0&gt;:     sub    $0x78,%rsp</span><br><span class="line">   0x00000000004015c8 &lt;+4&gt;:     mov    %fs:0x28,%rax</span><br><span class="line">   0x00000000004015d1 &lt;+13&gt;:    mov    %rax,0x68(%rsp)</span><br><span class="line">   0x00000000004015d6 &lt;+18&gt;:    xor    %eax,%eax</span><br><span class="line">   0x00000000004015d8 &lt;+20&gt;:    cmpl   $0x6,0x202181(%rip)        # 0x603760 &lt;num_input_strings&gt;</span><br><span class="line">   0x00000000004015df &lt;+27&gt;:    jne    0x40163f &lt;phase_defused+123&gt;</span><br><span class="line">   0x00000000004015e1 &lt;+29&gt;:    lea    0x10(%rsp),%r8</span><br><span class="line">   0x00000000004015e6 &lt;+34&gt;:    lea    0xc(%rsp),%rcx</span><br><span class="line">   0x00000000004015eb &lt;+39&gt;:    lea    0x8(%rsp),%rdx</span><br><span class="line">   0x00000000004015f0 &lt;+44&gt;:    mov    $0x402619,%esi</span><br><span class="line">   0x00000000004015f5 &lt;+49&gt;:    mov    $0x603870,%edi</span><br><span class="line">   0x00000000004015fa &lt;+54&gt;:    callq  0x400bf0 &lt;__isoc99_sscanf@plt&gt;</span><br><span class="line">   0x00000000004015ff &lt;+59&gt;:    cmp    $0x3,%eax</span><br><span class="line">   0x0000000000401602 &lt;+62&gt;:    jne    0x401635 &lt;phase_defused+113&gt;</span><br><span class="line">   0x0000000000401604 &lt;+64&gt;:    mov    $0x402622,%esi</span><br><span class="line">   0x0000000000401609 &lt;+69&gt;:    lea    0x10(%rsp),%rdi</span><br><span class="line">   0x000000000040160e &lt;+74&gt;:    callq  0x401338 &lt;strings_not_equal&gt;</span><br><span class="line">   0x0000000000401613 &lt;+79&gt;:    test   %eax,%eax</span><br><span class="line">   0x0000000000401615 &lt;+81&gt;:    jne    0x401635 &lt;phase_defused+113&gt;</span><br><span class="line">   0x0000000000401617 &lt;+83&gt;:    mov    $0x4024f8,%edi</span><br><span class="line">   0x000000000040161c &lt;+88&gt;:    callq  0x400b10 &lt;puts@plt&gt;</span><br><span class="line">   0x0000000000401621 &lt;+93&gt;:    mov    $0x402520,%edi</span><br><span class="line">   0x0000000000401626 &lt;+98&gt;:    callq  0x400b10 &lt;puts@plt&gt;</span><br><span class="line">   0x000000000040162b &lt;+103&gt;:   mov    $0x0,%eax</span><br><span class="line">   0x0000000000401630 &lt;+108&gt;:   callq  0x401242 &lt;secret_phase&gt;</span><br><span class="line">   0x0000000000401635 &lt;+113&gt;:   mov    $0x402558,%edi</span><br><span class="line">   0x000000000040163a &lt;+118&gt;:   callq  0x400b10 &lt;puts@plt&gt;</span><br><span class="line">   0x000000000040163f &lt;+123&gt;:   mov    0x68(%rsp),%rax</span><br><span class="line">   0x0000000000401644 &lt;+128&gt;:   xor    %fs:0x28,%rax</span><br><span class="line">   0x000000000040164d &lt;+137&gt;:   je     0x401654 &lt;phase_defused+144&gt;</span><br><span class="line">   0x000000000040164f &lt;+139&gt;:   callq  0x400b30 &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">   0x0000000000401654 &lt;+144&gt;:   add    $0x78,%rsp</span><br><span class="line">   0x0000000000401658 &lt;+148&gt;:   retq   </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0x00000000004015d8 &lt;+20&gt;:    cmpl   $0x6,0x202181(%rip)        # 0x603760 &lt;num_input_strings&gt;</span><br></pre></td></tr></table></figure><p>這裡要求六關全部通過之後才能進入 <code>secret_phase</code></p><p>我們可以設置條件斷點：<code>b phase_defused if num_input_strings == 6</code></p><p>注意到：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401630 &lt;+108&gt;:   callq  0x401242 &lt;secret_phase&gt;</span><br></pre></td></tr></table></figure><p>這裡有非常多的記憶體地址，其中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(gdb) x/s 0x402619</span><br><span class="line">0x402619:       &quot;%d %d %s&quot;</span><br><span class="line">(gdb) x/s 0x603870</span><br><span class="line">0x603870 &lt;input_strings+240&gt;:   &quot;7 0&quot;</span><br><span class="line">(gdb) x/s 0x402622</span><br><span class="line">0x402622:       &quot;DrEvil&quot;</span><br></pre></td></tr></table></figure><p>判斷 Phase 4 輸入之後是否有一個字串 <code>DrEvil</code>，如果有，進入隱藏關！</p><p>再來看看隱藏關的代碼：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function secret_phase:</span><br><span class="line">   0x0000000000401242 &lt;+0&gt;:     push   %rbx</span><br><span class="line">   0x0000000000401243 &lt;+1&gt;:     callq  0x40149e &lt;read_line&gt;</span><br><span class="line">   0x0000000000401248 &lt;+6&gt;:     mov    $0xa,%edx</span><br><span class="line">   0x000000000040124d &lt;+11&gt;:    mov    $0x0,%esi</span><br><span class="line">   0x0000000000401252 &lt;+16&gt;:    mov    %rax,%rdi</span><br><span class="line">   0x0000000000401255 &lt;+19&gt;:    callq  0x400bd0 &lt;strtol@plt&gt;</span><br><span class="line">   0x000000000040125a &lt;+24&gt;:    mov    %rax,%rbx</span><br><span class="line">   0x000000000040125d &lt;+27&gt;:    lea    -0x1(%rax),%eax</span><br><span class="line">   0x0000000000401260 &lt;+30&gt;:    cmp    $0x3e8,%eax</span><br><span class="line">   0x0000000000401265 &lt;+35&gt;:    jbe    0x40126c &lt;secret_phase+42&gt;</span><br><span class="line">   0x0000000000401267 &lt;+37&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x000000000040126c &lt;+42&gt;:    mov    %ebx,%esi</span><br><span class="line">   0x000000000040126e &lt;+44&gt;:    mov    $0x6030f0,%edi</span><br><span class="line">   0x0000000000401273 &lt;+49&gt;:    callq  0x401204 &lt;fun7&gt;</span><br><span class="line">   0x0000000000401278 &lt;+54&gt;:    cmp    $0x2,%eax</span><br><span class="line">   0x000000000040127b &lt;+57&gt;:    je     0x401282 &lt;secret_phase+64&gt;</span><br><span class="line">   0x000000000040127d &lt;+59&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401282 &lt;+64&gt;:    mov    $0x402438,%edi</span><br><span class="line">   0x0000000000401287 &lt;+69&gt;:    callq  0x400b10 &lt;puts@plt&gt;</span><br><span class="line">   0x000000000040128c &lt;+74&gt;:    callq  0x4015c4 &lt;phase_defused&gt;</span><br><span class="line">   0x0000000000401291 &lt;+79&gt;:    pop    %rbx</span><br><span class="line">   0x0000000000401292 &lt;+80&gt;:    retq   </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><p>看到 <code>strtol</code>，知道這裡讀入了一個整數</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0x000000000040125a &lt;+24&gt;:    mov    %rax,%rbx</span><br><span class="line">0x000000000040125d &lt;+27&gt;:    lea    -0x1(%rax),%eax</span><br><span class="line">0x0000000000401260 &lt;+30&gt;:    cmp    $0x3e8,%eax</span><br><span class="line">0x0000000000401265 &lt;+35&gt;:    jbe    0x40126c &lt;secret_phase+42&gt;</span><br><span class="line">0x0000000000401267 &lt;+37&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br></pre></td></tr></table></figure><p>要求讀取的整數小於等於 1001。注意 <code>jbe</code> 是無符號數的跳轉檢查，所以這裡其實也隱性限制了下限。所以嚴格的輸入限制是 <code>[1, 1001]</code> 之間的整數。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0x000000000040126c &lt;+42&gt;:    mov    %ebx,%esi</span><br><span class="line">0x000000000040126e &lt;+44&gt;:    mov    $0x6030f0,%edi</span><br><span class="line">0x0000000000401273 &lt;+49&gt;:    callq  0x401204 &lt;fun7&gt;</span><br></pre></td></tr></table></figure><p>傳參，進入 <code>fun7</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401278 &lt;+54&gt;:    cmp    $0x2,%eax</span><br><span class="line">0x000000000040127b &lt;+57&gt;:    je     0x401282 &lt;secret_phase+64&gt;</span><br><span class="line">0x000000000040127d &lt;+59&gt;:    callq  0x40143a &lt;explode_bomb&gt;</span><br><span class="line">0x0000000000401282 &lt;+64&gt;:    mov    $0x402438,%edi</span><br></pre></td></tr></table></figure><p>這裡要求 <code>fun7</code> 的返回值等於 2</p><p>接下來我們看看 <code>fun7</code>，手動分個段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function fun7:</span><br><span class="line">   0x0000000000401204 &lt;+0&gt;:     sub    $0x8,%rsp</span><br><span class="line">   0x0000000000401208 &lt;+4&gt;:     test   %rdi,%rdi</span><br><span class="line">   0x000000000040120b &lt;+7&gt;:     je     0x401238 &lt;fun7+52&gt;</span><br><span class="line">   </span><br><span class="line">   0x000000000040120d &lt;+9&gt;:     mov    (%rdi),%edx</span><br><span class="line">   0x000000000040120f &lt;+11&gt;:    cmp    %esi,%edx</span><br><span class="line">   0x0000000000401211 &lt;+13&gt;:    jle    0x401220 &lt;fun7+28&gt;</span><br><span class="line">   </span><br><span class="line">   0x0000000000401213 &lt;+15&gt;:    mov    0x8(%rdi),%rdi</span><br><span class="line">   0x0000000000401217 &lt;+19&gt;:    callq  0x401204 &lt;fun7&gt;</span><br><span class="line">   0x000000000040121c &lt;+24&gt;:    add    %eax,%eax</span><br><span class="line">   0x000000000040121e &lt;+26&gt;:    jmp    0x40123d &lt;fun7+57&gt;</span><br><span class="line">   </span><br><span class="line">   0x0000000000401220 &lt;+28&gt;:    mov    $0x0,%eax</span><br><span class="line">   0x0000000000401225 &lt;+33&gt;:    cmp    %esi,%edx</span><br><span class="line">   0x0000000000401227 &lt;+35&gt;:    je     0x40123d &lt;fun7+57&gt;</span><br><span class="line">   0x0000000000401229 &lt;+37&gt;:    mov    0x10(%rdi),%rdi</span><br><span class="line">   0x000000000040122d &lt;+41&gt;:    callq  0x401204 &lt;fun7&gt;</span><br><span class="line">   0x0000000000401232 &lt;+46&gt;:    lea    0x1(%rax,%rax,1),%eax</span><br><span class="line">   0x0000000000401236 &lt;+50&gt;:    jmp    0x40123d &lt;fun7+57&gt;</span><br><span class="line">   </span><br><span class="line">   0x0000000000401238 &lt;+52&gt;:    mov    $0xffffffff,%eax</span><br><span class="line">   </span><br><span class="line">   0x000000000040123d &lt;+57&gt;:    add    $0x8,%rsp</span><br><span class="line">   0x0000000000401241 &lt;+61&gt;:    retq   </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><p>遍歷當前 <code>rdi</code> 之後的兩個指針，遞迴，有點像二叉樹。我們來看看初始參數：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">(gdb) x/60xg 0x6030f0</span><br><span class="line">0x6030f0 &lt;n1&gt;:  0x0000000000000024      0x0000000000603110</span><br><span class="line">0x603100 &lt;n1+16&gt;:       0x0000000000603130      0x0000000000000000</span><br><span class="line">0x603110 &lt;n21&gt;: 0x0000000000000008      0x0000000000603190</span><br><span class="line">0x603120 &lt;n21+16&gt;:      0x0000000000603150      0x0000000000000000</span><br><span class="line">0x603130 &lt;n22&gt;: 0x0000000000000032      0x0000000000603170</span><br><span class="line">0x603140 &lt;n22+16&gt;:      0x00000000006031b0      0x0000000000000000</span><br><span class="line">0x603150 &lt;n32&gt;: 0x0000000000000016      0x0000000000603270</span><br><span class="line">0x603160 &lt;n32+16&gt;:      0x0000000000603230      0x0000000000000000</span><br><span class="line">0x603170 &lt;n33&gt;: 0x000000000000002d      0x00000000006031d0</span><br><span class="line">0x603180 &lt;n33+16&gt;:      0x0000000000603290      0x0000000000000000</span><br><span class="line">0x603190 &lt;n31&gt;: 0x0000000000000006      0x00000000006031f0</span><br><span class="line">0x6031a0 &lt;n31+16&gt;:      0x0000000000603250      0x0000000000000000</span><br><span class="line">0x6031b0 &lt;n34&gt;: 0x000000000000006b      0x0000000000603210</span><br><span class="line">0x6031c0 &lt;n34+16&gt;:      0x00000000006032b0      0x0000000000000000</span><br><span class="line">0x6031d0 &lt;n45&gt;: 0x0000000000000028      0x0000000000000000</span><br><span class="line">0x6031e0 &lt;n45+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x6031f0 &lt;n41&gt;: 0x0000000000000001      0x0000000000000000</span><br><span class="line">0x603200 &lt;n41+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603210 &lt;n47&gt;: 0x0000000000000063      0x0000000000000000</span><br><span class="line">0x603220 &lt;n47+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603230 &lt;n44&gt;: 0x0000000000000023      0x0000000000000000</span><br><span class="line">0x603240 &lt;n44+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603250 &lt;n42&gt;: 0x0000000000000007      0x0000000000000000</span><br><span class="line">0x603260 &lt;n42+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603270 &lt;n43&gt;: 0x0000000000000014      0x0000000000000000</span><br><span class="line">0x603280 &lt;n43+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603290 &lt;n46&gt;: 0x000000000000002f      0x0000000000000000</span><br><span class="line">0x6032a0 &lt;n46+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x6032b0 &lt;n48&gt;: 0x00000000000003e9      0x0000000000000000</span><br><span class="line">0x6032c0 &lt;n48+16&gt;:      0x0000000000000000      0x0000000000000000</span><br></pre></td></tr></table></figure><p>確實是一顆二叉樹！（這裡的 60 是我試出來的）</p><p><code>fun7</code> 傳入的參數為 <code>rdi</code> 和 <code>esi</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401208 &lt;+4&gt;:     test   %rdi,%rdi</span><br><span class="line">0x000000000040120b &lt;+7&gt;:     je     0x401238 &lt;fun7+52&gt;</span><br><span class="line">...</span><br><span class="line">0x0000000000401238 &lt;+52&gt;:    mov    $0xffffffff,%eax</span><br><span class="line">0x000000000040123d &lt;+57&gt;:    add    $0x8,%rsp</span><br><span class="line">0x0000000000401241 &lt;+61&gt;:    retq   </span><br></pre></td></tr></table></figure><p>如果遍歷到葉子結點，直接返回 <code>0xffffffff</code>。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0x000000000040120d</span> &lt;+<span class="number">9</span>&gt;:     mov    (%rdi),%edx</span><br><span class="line"><span class="attribute">0x000000000040120f</span> &lt;+<span class="number">11</span>&gt;:    cmp    %esi,%edx</span><br><span class="line"><span class="attribute">0x0000000000401211</span> &lt;+<span class="number">13</span>&gt;:    jle    <span class="number">0</span>x401220 &lt;fun7+<span class="number">28</span>&gt;</span><br></pre></td></tr></table></figure><p>查看當前節點的值，如果值大於 <code>esi</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401213 &lt;+15&gt;:    mov    0x8(%rdi),%rdi</span><br><span class="line">0x0000000000401217 &lt;+19&gt;:    callq  0x401204 &lt;fun7&gt;</span><br><span class="line">0x000000000040121c &lt;+24&gt;:    add    %eax,%eax</span><br><span class="line">0x000000000040121e &lt;+26&gt;:    jmp    0x40123d &lt;fun7+57&gt;</span><br><span class="line">...</span><br><span class="line">0x000000000040123d &lt;+57&gt;:    add    $0x8,%rsp</span><br><span class="line">0x0000000000401241 &lt;+61&gt;:    retq   </span><br></pre></td></tr></table></figure><p>訪問左子節點，返回值乘以二</p><p>如果當前節點的值和 <code>rsi</code> 相等：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401220 &lt;+28&gt;:    mov    $0x0,%eax</span><br><span class="line">0x0000000000401225 &lt;+33&gt;:    cmp    %esi,%edx</span><br><span class="line">0x0000000000401227 &lt;+35&gt;:    je     0x40123d &lt;fun7+57&gt;</span><br><span class="line">...</span><br><span class="line">0x000000000040123d &lt;+57&gt;:    add    $0x8,%rsp</span><br><span class="line">0x0000000000401241 &lt;+61&gt;:    retq   </span><br></pre></td></tr></table></figure><p>直接返回</p><p>否則，訪問右子節點：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0x0000000000401229 &lt;+37&gt;:    mov    0x10(%rdi),%rdi</span><br><span class="line">0x000000000040122d &lt;+41&gt;:    callq  0x401204 &lt;fun7&gt;</span><br><span class="line">0x0000000000401232 &lt;+46&gt;:    lea    0x1(%rax,%rax,1),%eax</span><br><span class="line">0x0000000000401236 &lt;+50&gt;:    jmp    0x40123d &lt;fun7+57&gt;</span><br><span class="line">...</span><br><span class="line">0x000000000040123d &lt;+57&gt;:    add    $0x8,%rsp</span><br><span class="line">0x0000000000401241 &lt;+61&gt;:    retq   </span><br></pre></td></tr></table></figure><p>返回值乘以二再加一</p><p>我們可以用 C 語言翻譯上述代碼：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> <span class="title function_">fun7</span><span class="params">(<span class="keyword">struct</span> Node *node, <span class="type">int</span> target_val)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. 如果節點為空</span></span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// 對應匯編中的 mov $0xffffffff, %eax</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> current_val = node-&gt;value; <span class="comment">// mov (%rdi), %edx</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 如果當前節點值 &gt; 目標值 (target_val &lt; current_val)</span></span><br><span class="line">    <span class="comment">// 匯編邏輯：cmp %esi, %edx -&gt; jle (跳過) -&gt; 否則執行這裡</span></span><br><span class="line">    <span class="keyword">if</span> (current_val &gt; target_val) &#123;</span><br><span class="line">        <span class="comment">// 遞迴調用左子節點 (偏移量 0x8)</span></span><br><span class="line">        <span class="comment">// 對應 callq fun7, 然後 add %eax, %eax</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * fun7(node-&gt;left, target_val);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. 如果當前節點值 == 目標值</span></span><br><span class="line">    <span class="comment">// 匯編邏輯：cmp %esi, %edx -&gt; je (跳轉到返回0)</span></span><br><span class="line">    <span class="keyword">if</span> (current_val == target_val) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// 找到目標，返回 0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. 如果當前節點值 &lt; 目標值</span></span><br><span class="line">    <span class="comment">// 匯編邏輯：此時只剩下這種情況</span></span><br><span class="line">    <span class="comment">// 遞迴調用右子節點 (偏移量 0x10)</span></span><br><span class="line">    <span class="comment">// 對應 callq fun7, 然後 lea 0x1(%rax,%rax,1) -&gt; 2*rax + 1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * fun7(node-&gt;right, target_val) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我們再來看看二叉樹的結構，根據：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">(gdb) x/60xg 0x6030f0</span><br><span class="line">0x6030f0 &lt;n1&gt;:  0x0000000000000024      0x0000000000603110</span><br><span class="line">0x603100 &lt;n1+16&gt;:       0x0000000000603130      0x0000000000000000</span><br><span class="line">0x603110 &lt;n21&gt;: 0x0000000000000008      0x0000000000603190</span><br><span class="line">0x603120 &lt;n21+16&gt;:      0x0000000000603150      0x0000000000000000</span><br><span class="line">0x603130 &lt;n22&gt;: 0x0000000000000032      0x0000000000603170</span><br><span class="line">0x603140 &lt;n22+16&gt;:      0x00000000006031b0      0x0000000000000000</span><br><span class="line">0x603150 &lt;n32&gt;: 0x0000000000000016      0x0000000000603270</span><br><span class="line">0x603160 &lt;n32+16&gt;:      0x0000000000603230      0x0000000000000000</span><br><span class="line">0x603170 &lt;n33&gt;: 0x000000000000002d      0x00000000006031d0</span><br><span class="line">0x603180 &lt;n33+16&gt;:      0x0000000000603290      0x0000000000000000</span><br><span class="line">0x603190 &lt;n31&gt;: 0x0000000000000006      0x00000000006031f0</span><br><span class="line">0x6031a0 &lt;n31+16&gt;:      0x0000000000603250      0x0000000000000000</span><br><span class="line">0x6031b0 &lt;n34&gt;: 0x000000000000006b      0x0000000000603210</span><br><span class="line">0x6031c0 &lt;n34+16&gt;:      0x00000000006032b0      0x0000000000000000</span><br><span class="line">0x6031d0 &lt;n45&gt;: 0x0000000000000028      0x0000000000000000</span><br><span class="line">0x6031e0 &lt;n45+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x6031f0 &lt;n41&gt;: 0x0000000000000001      0x0000000000000000</span><br><span class="line">0x603200 &lt;n41+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603210 &lt;n47&gt;: 0x0000000000000063      0x0000000000000000</span><br><span class="line">0x603220 &lt;n47+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603230 &lt;n44&gt;: 0x0000000000000023      0x0000000000000000</span><br><span class="line">0x603240 &lt;n44+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603250 &lt;n42&gt;: 0x0000000000000007      0x0000000000000000</span><br><span class="line">0x603260 &lt;n42+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603270 &lt;n43&gt;: 0x0000000000000014      0x0000000000000000</span><br><span class="line">0x603280 &lt;n43+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x603290 &lt;n46&gt;: 0x000000000000002f      0x0000000000000000</span><br><span class="line">0x6032a0 &lt;n46+16&gt;:      0x0000000000000000      0x0000000000000000</span><br><span class="line">0x6032b0 &lt;n48&gt;: 0x00000000000003e9      0x0000000000000000</span><br><span class="line">0x6032c0 &lt;n48+16&gt;:      0x0000000000000000      0x0000000000000000</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    N1((36)) --&gt; N21((8))</span><br><span class="line">    N1 --&gt; N22((50))</span><br><span class="line"></span><br><span class="line">    N21 --&gt; N31((6))</span><br><span class="line">    N21 --&gt; N32((22))</span><br><span class="line"></span><br><span class="line">    N22 --&gt; N33((45))</span><br><span class="line">    N22 --&gt; N34((107))</span><br><span class="line"></span><br><span class="line">    N31 --&gt; N41((1))</span><br><span class="line">    N31 --&gt; N42((7))</span><br><span class="line"></span><br><span class="line">    N32 --&gt; N43((20))</span><br><span class="line">    N32 --&gt; N44((35))</span><br><span class="line"></span><br><span class="line">    N33 --&gt; N45((40))</span><br><span class="line">    N33 --&gt; N46((47))</span><br><span class="line"></span><br><span class="line">    N34 --&gt; N47((99))</span><br><span class="line">    N34 --&gt; N48((1001))</span><br></pre></td></tr></table></figure><p>要求最終輸出為 <code>2</code>，<code>2 = 1*2</code></p><p>先向左，再向右，然後找到了答案。</p><p>於是，我們得到答案 <code>22</code></p><h2 id="總結"><a class="markdownIt-Anchor" href="#總結"></a> 總結</h2><p>於是，最終答案是：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Border relations with Canada have never been better.</span><br><span class="line">1 2 4 8 16 32</span><br><span class="line">0 207</span><br><span class="line">7 0 DrEvil</span><br><span class="line">ionefg</span><br><span class="line">4 3 2 1 6 5</span><br><span class="line">22</span><br></pre></td></tr></table></figure><p>最後讓 AI 生成一段小結</p><p>CSAPP Bomb Lab 是一個非常經典的實驗，它不僅是一次對匯編語言 (x86-64) 的深度練習，更是一場邏輯推理的解謎遊戲。</p><p>回顧整個拆彈過程，我們經歷了從簡單到複雜的演進：</p><ol><li>基礎控制流：從 Phase 1 的字串比較，到 Phase 2 的循環與棧上數組操作。</li><li>高級控制流：Phase 3 展示了 switch 語句如何通過跳轉表實現，Phase 4 則通過遞迴讓我們深入理解了棧幀的生長與銷毀以及二分尋找算法。</li><li>數據操縱：Phase 5 的位運算與字元數組索引映射，考察了對指針和記憶體定址的敏感度。</li><li>數據結構：Phase 6 的鍊表重排以及隱藏關卡的二叉搜索樹（BST），讓我們看到了高級數據結構在匯編層面的具體形態（指針即地址）。</li></ol><p>在這個過程中，gdb 是最強大的武器。熟練掌握斷點設置、暫存器查看 (i r) 和記憶體檢查 (x/) 是通關的關鍵。同時，我們也深刻體會到了編譯器最佳化的“智慧”（如利用 lea 進行算術運算、利用無符號數比較合併上下界檢查）和 C 語言與機器碼之間的映射關係。</p><p>當看到終端最終列印出 “Congratulations! You’ve defused the bomb!” 時，所有的查表、計算和堆棧分析都是值得的。希望這篇解析能對你理解計算機底層系統有所幫助。 Happy Hacking!</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | CSAPP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS </tag>
            
            <tag> 匯編 </tag>
            
            <tag> gdb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>x64 暫存器速查表</title>
      <link href="/2025/12/09/x64-registers/"/>
      <url>/2025/12/09/x64-registers/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>本文匯總 x64 架構下最核心的暫存器狀態與 ABI 約定。</p><h2 id="暫存器"><a class="markdownIt-Anchor" href="#暫存器"></a> 暫存器</h2><p>x64 暫存器完美向下相容。<strong>寫入低 32 位 (如 <code>MOV EAX, 1</code>) 會自動清零高 32 位；但寫入 8/16 位則保留高位數據。</strong></p><h3 id="通用暫存器-gprs-速查表"><a class="markdownIt-Anchor" href="#通用暫存器-gprs-速查表"></a> 通用暫存器 (GPRs) 速查表</h3><table><thead><tr><th style="text-align:left">64-bit</th><th style="text-align:left">32-bit</th><th style="text-align:left">16-bit</th><th style="text-align:left">8-bit</th><th style="text-align:left">用途 (System V / 通用)</th><th style="text-align:left">易失性</th></tr></thead><tbody><tr><td style="text-align:left"><strong>RAX</strong></td><td style="text-align:left">EAX</td><td style="text-align:left">AX</td><td style="text-align:left">AL</td><td style="text-align:left"><strong>返回值</strong> / 累加器</td><td style="text-align:left">Caller Saved</td></tr><tr><td style="text-align:left"><strong>RBX</strong></td><td style="text-align:left">EBX</td><td style="text-align:left">BX</td><td style="text-align:left">BL</td><td style="text-align:left">基址 / 通用數據</td><td style="text-align:left"><strong>Callee Saved</strong></td></tr><tr><td style="text-align:left"><strong>RCX</strong></td><td style="text-align:left">ECX</td><td style="text-align:left">CX</td><td style="text-align:left">CL</td><td style="text-align:left">循環計數 / 第4參數</td><td style="text-align:left">Caller Saved</td></tr><tr><td style="text-align:left"><strong>RDX</strong></td><td style="text-align:left">EDX</td><td style="text-align:left">DX</td><td style="text-align:left">DL</td><td style="text-align:left">I/O / 乘除法 / 第3參數</td><td style="text-align:left">Caller Saved</td></tr><tr><td style="text-align:left"><strong>RSI</strong></td><td style="text-align:left">ESI</td><td style="text-align:left">SI</td><td style="text-align:left">SIL</td><td style="text-align:left">源地址 / 第2參數</td><td style="text-align:left">Caller Saved</td></tr><tr><td style="text-align:left"><strong>RDI</strong></td><td style="text-align:left">EDI</td><td style="text-align:left">DI</td><td style="text-align:left">DIL</td><td style="text-align:left">目的地址 / <strong>第1參數</strong></td><td style="text-align:left">Caller Saved</td></tr><tr><td style="text-align:left"><strong>RBP</strong></td><td style="text-align:left">EBP</td><td style="text-align:left">BP</td><td style="text-align:left">BPL</td><td style="text-align:left"><strong>棧底指針 (Base Ptr)</strong></td><td style="text-align:left"><strong>Callee Saved</strong></td></tr><tr><td style="text-align:left"><strong>RSP</strong></td><td style="text-align:left">ESP</td><td style="text-align:left">SP</td><td style="text-align:left">SPL</td><td style="text-align:left"><strong>棧頂指針 (Stack Ptr)</strong></td><td style="text-align:left"><strong>Callee Saved</strong></td></tr><tr><td style="text-align:left"><strong>R8</strong></td><td style="text-align:left">R8D</td><td style="text-align:left">R8W</td><td style="text-align:left">R8B</td><td style="text-align:left">第5參數</td><td style="text-align:left">Caller Saved</td></tr><tr><td style="text-align:left"><strong>R9</strong></td><td style="text-align:left">R9D</td><td style="text-align:left">R9W</td><td style="text-align:left">R9B</td><td style="text-align:left">第6參數</td><td style="text-align:left">Caller Saved</td></tr><tr><td style="text-align:left"><strong>R10</strong></td><td style="text-align:left">R10D</td><td style="text-align:left">R10W</td><td style="text-align:left">R10B</td><td style="text-align:left">臨時暫存器 (Static Chain)</td><td style="text-align:left">Caller Saved</td></tr><tr><td style="text-align:left"><strong>R11</strong></td><td style="text-align:left">R11D</td><td style="text-align:left">R11W</td><td style="text-align:left">R11B</td><td style="text-align:left">臨時 / 連結暫存器</td><td style="text-align:left">Caller Saved</td></tr><tr><td style="text-align:left"><strong>R12-R15</strong></td><td style="text-align:left">RxxD</td><td style="text-align:left">RxxW</td><td style="text-align:left">RxxB</td><td style="text-align:left">通用數據儲存</td><td style="text-align:left"><strong>Callee Saved</strong></td></tr></tbody></table><blockquote><p><strong>關鍵術語：</strong></p><ul><li><strong>Caller Saved:</strong> 調用函數前，如果還需要這些值，<strong>調用者</strong>必須自己壓棧保存。函數返回後值可能變了。</li><li><strong>Callee Saved:</strong> 被調用的函數必須保證在返回時，這些暫存器的值和調用前一樣（通常通過 <code>push/pop</code> 維護）。</li></ul></blockquote><h2 id="函數調用約定"><a class="markdownIt-Anchor" href="#函數調用約定"></a> 函數調用約定</h2><h3 id="a-system-v-amd64-abi-linux-macos"><a class="markdownIt-Anchor" href="#a-system-v-amd64-abi-linux-macos"></a> A. System V AMD64 ABI (Linux, macOS)</h3><ul><li><strong>傳參順序 (前6個):</strong><br /><code>RDI</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span> <code>RSI</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span> <code>RDX</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span> <code>RCX</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span> <code>R8</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span> <code>R9</code></li><li><strong>超過6個:</strong> 壓入棧 (Stack)。</li><li><strong>返回值:</strong> <code>RAX</code> (若結果為 128 位，高位在 <code>RDX</code>)。</li><li><strong>System Call:</strong> 使用 <code>syscall</code> 指令，參數傳給 <code>RAX</code> (系統調用號), <code>RDI</code>, <code>RSI</code>, <code>RDX</code>, <code>R10</code>, <code>R8</code>, <code>R9</code>。</li></ul><h3 id="b-microsoft-x64-windows"><a class="markdownIt-Anchor" href="#b-microsoft-x64-windows"></a> B. Microsoft x64 (Windows)</h3><ul><li><strong>傳參順序 (前4個):</strong><br /><code>RCX</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span> <code>RDX</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span> <code>R8</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span> <code>R9</code></li><li><strong>超過4個:</strong> 壓入棧。</li><li><strong>Shadow Space:</strong> 調用者必須在棧上預留 <strong>32位元組</strong> (4個暫存器寬) 的空間，即使參數很少。</li><li><strong>返回值:</strong> <code>RAX</code>。</li></ul><h2 id="關鍵狀態標誌"><a class="markdownIt-Anchor" href="#關鍵狀態標誌"></a> 關鍵狀態標誌</h2><p>控制流指令 (<code>JMP</code>, <code>Jcc</code>) 的依據。</p><ul><li><strong>ZF (Zero Flag):</strong> 運算結果為 0 時置位。</li><li><strong>SF (Sign Flag):</strong> 結果為負（最高位為1）時置位。</li><li><strong>OF (Overflow Flag):</strong> <strong>有符號</strong>運算溢出時置位。</li><li><strong>CF (Carry Flag):</strong> <strong>無符號</strong>運算進位/借位時置位。</li></ul><h2 id="浮點與-simd-avxsse"><a class="markdownIt-Anchor" href="#浮點與-simd-avxsse"></a> 浮點與 SIMD (AVX/SSE)</h2><ul><li><strong>XMM0 - XMM15</strong>: 128位 (Legacy SSE)。</li><li><strong>YMM0 - YMM15</strong>: 256位 (AVX，低 128 位映射到 XMM)。</li><li><strong>ZMM0 - ZMM31</strong>: 512位 (AVX-512，低 256 位映射到 YMM)。</li><li><strong>參數傳遞 (System V ABI):</strong><ul><li><strong>浮點參數</strong>: 前 8 個浮點參數通過 <code>XMM0</code> 到 <code>XMM7</code> 傳遞。</li><li><strong>浮點返回</strong>: 通過 <code>XMM0</code> 返回。</li><li><strong>易失性</strong>: <code>XMM0</code> - <code>XMM15</code> 通常都是 Caller-saved (易失的)。</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 中文 | 電腦科學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 匯編 </tag>
            
            <tag> 逆向 </tag>
            
            <tag> x64 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSAPP Data Lab 解析</title>
      <link href="/2025/12/01/csapp-lab1/"/>
      <url>/2025/12/01/csapp-lab1/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>前一段時間做完了 CSAPP 的第一個 Lab，寫一篇總結。（其實這篇文章拖了很久）</p><p>CS:APP Data Lab 旨在通過一系列位操作謎題，訓練對整數和浮點數底層表示（特別是補碼和 IEEE 754 標準）的理解。要求在嚴格限制的操作符和操作數數量下，實現特定的數學或邏輯功能。</p><table><thead><tr><th style="text-align:left">函數名 (Name)</th><th style="text-align:left">描述 (Description)</th><th style="text-align:center">難度 (Rating)</th><th style="text-align:center">最大操作數 (Max ops)</th></tr></thead><tbody><tr><td style="text-align:left"><strong><code>bitXor(x, y)</code></strong></td><td style="text-align:left">只使用 <code>&amp;</code> 和 <code>~</code> 實現 <code>x ^ y</code> (異或)。</td><td style="text-align:center">1</td><td style="text-align:center">14</td></tr><tr><td style="text-align:left"><strong><code>tmin()</code></strong></td><td style="text-align:left">返回最小的補碼整數 (Two’s complement integer)。</td><td style="text-align:center">1</td><td style="text-align:center">4</td></tr><tr><td style="text-align:left"><strong><code>isTmax(x)</code></strong></td><td style="text-align:left">僅當 <code>x</code> 是最大的補碼整數時返回 True。</td><td style="text-align:center">1</td><td style="text-align:center">10</td></tr><tr><td style="text-align:left"><strong><code>allOddBits(x)</code></strong></td><td style="text-align:left">僅當 <code>x</code> 的所有奇數位都為 1 時返回 True。</td><td style="text-align:center">2</td><td style="text-align:center">12</td></tr><tr><td style="text-align:left"><strong><code>negate(x)</code></strong></td><td style="text-align:left">返回 <code>-x</code>，<strong>不使用</strong> <code>-</code> 運算符。</td><td style="text-align:center">2</td><td style="text-align:center">5</td></tr><tr><td style="text-align:left"><strong><code>isAsciiDigit(x)</code></strong></td><td style="text-align:left">如果 <code>0x30 &lt;= x &lt;= 0x39</code> (即 ASCII 數字字元) 則返回 True。</td><td style="text-align:center">3</td><td style="text-align:center">15</td></tr><tr><td style="text-align:left"><strong><code>conditional(x, y, z)</code></strong></td><td style="text-align:left">等同於 <code>x ? y : z</code> (三元運算符)。</td><td style="text-align:center">3</td><td style="text-align:center">16</td></tr><tr><td style="text-align:left"><strong><code>isLessOrEqual(x, y)</code></strong></td><td style="text-align:left">如果 <code>x &lt;= y</code> 返回 True，否則返回 False。</td><td style="text-align:center">3</td><td style="text-align:center">24</td></tr><tr><td style="text-align:left"><strong><code>logicalNeg(x)</code></strong></td><td style="text-align:left">計算 <code>!x</code> (邏輯非)，<strong>不使用</strong> <code>!</code> 運算符。</td><td style="text-align:center">4</td><td style="text-align:center">12</td></tr><tr><td style="text-align:left"><strong><code>howManyBits(x)</code></strong></td><td style="text-align:left">用補碼表示 <code>x</code> 所需的最小位數。</td><td style="text-align:center">4</td><td style="text-align:center">90</td></tr><tr><td style="text-align:left"><strong><code>floatScale2(uf)</code></strong></td><td style="text-align:left">對於浮點參數 <code>f</code>，返回 <code>2 * f</code> 的位級等價表示。</td><td style="text-align:center">4</td><td style="text-align:center">30</td></tr><tr><td style="text-align:left"><strong><code>floatFloat2Int(uf)</code></strong></td><td style="text-align:left">對於浮點參數 <code>f</code>，返回 <code>(int)f</code> 的位級等價表示。</td><td style="text-align:center">4</td><td style="text-align:center">30</td></tr><tr><td style="text-align:left"><strong><code>floatPower2(x)</code></strong></td><td style="text-align:left">對於整數 <code>x</code>，返回 <code>2.0^x</code> 的位級等價表示。</td><td style="text-align:center">4</td><td style="text-align:center">30</td></tr></tbody></table><h2 id="bitxor"><a class="markdownIt-Anchor" href="#bitxor"></a> bitXor</h2><p>該題要求僅使用 <code>~</code>（取反） 和 <code>&amp;</code>（與），實現 <code>^</code>（異或）</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">bitXor</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> ~((~(x&amp;~y))&amp;(~((~x)&amp;y)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用 De Morgan 律，容易得到 <code>~(x&amp;y) = (～x)|(~y)</code>，於是我們可以使用 <code>~</code> 和 <code>&amp;</code> 實現 <code>|</code> 操作。</p><p>異或操作，可以表示為 <code>x^y = (~x &amp; y) | (x &amp; ~y)</code>，結合 De Morgan 律，我們很容易得到最終的答案 <code>x^y = ~((~(x&amp;~y))&amp;(~((~x)&amp;y)))</code>。</p><h2 id="tmin"><a class="markdownIt-Anchor" href="#tmin"></a> tmin</h2><p>這道題很簡單，返回最小的補碼整數。回顧補碼的定義，最高位取負權，故令符號位為 1 即可。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">tmin</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span>&lt;&lt;<span class="number">31</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="istmax"><a class="markdownIt-Anchor" href="#istmax"></a> isTmax</h2><p>判斷 <code>x</code> 是否是最大的補碼。若是，返回 <code>1</code>；否則，返回 <code>0</code>。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="built_in">map</span> = x + <span class="number">1</span>;</span><br><span class="line">  <span class="type">int</span> res = ~(<span class="built_in">map</span> + x);</span><br><span class="line">  <span class="keyword">return</span> !res &amp; (!!<span class="built_in">map</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最大的補碼有一個性質，加一之後變成最小的補碼：<code>0x7fffffff -&gt; 0x80000000</code></p><p>而最大的補碼加上最小的補碼等於 <code>0xffffffff</code> 即 <code>-1</code>，取反之後為 <code>0</code> （這裡推出 <code>0</code> 是為了得到返回值中的 <code>0/1</code>）</p><p>因此，我們可以通過 <code>~(x+x+1)</code> 得到答案。</p><p>但是 <code>-1+0</code> 也等於 <code>-1</code>，即如果 <code>x=0</code> 時，<code>~(x+x+1)</code> 同樣等於 <code>1</code>，是一個 Corner Case。</p><p>因此，我們還需要對結果與 <code>!!(x+1)</code>，才能得到最終的答案。（如果 <code>x=-1</code>，<code>!!(x+1)=0</code>；其餘情況均為 <code>1</code>）</p><p>於是我們得到最終的答案 <code>!(~(x+x+1)) &amp; (!!(x+1))</code></p><h2 id="alloddbits"><a class="markdownIt-Anchor" href="#alloddbits"></a> allOddBits</h2><p>僅當 <code>x</code> 的所有奇數位都為 1 時返回 1</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">allOddBits</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="type">int</span> a = <span class="number">0xAA</span>;</span><br><span class="line">  <span class="type">int</span> b = (a&lt;&lt;<span class="number">8</span>) + (a&lt;&lt;<span class="number">16</span>) + (a &lt;&lt;<span class="number">24</span>) + a;</span><br><span class="line">  <span class="type">int</span> bm = ~b+<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> !((x&amp;b)+bm);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我們做一個奇數位掩碼即可 <code>0xAA = 0b10101010</code>，通過左移，可以得到 <code>a + (a&lt;&lt;8) + (a&lt;&lt;16) + (a &lt;&lt;24) = 0xAAAAAAAA = b</code></p><p>於是 <code>x&amp;b</code> 取出所有奇數位，但是我們需要得到 <code>0/1</code> 的答案</p><p><code>bm = ~b + 1</code>，得到 <code>-b</code>（取反加一是補碼相反數），<code>b+(-b) = 0</code>，再取邏輯非，就可以得到答案</p><h2 id="negate"><a class="markdownIt-Anchor" href="#negate"></a> negate</h2><p>這道題要求不使用 <code>-</code> 運算符計算 <code>-x</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">negate</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> ~x+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>非常簡單，根據補碼的定義得到。取反加一就是相反數。</p><h2 id="isasciidigit"><a class="markdownIt-Anchor" href="#isasciidigit"></a> isAsciiDigit</h2><p>如果 <code>0x30 &lt;= x &lt;= 0x39</code> (即 ASCII 數字字元) 則返回 True。</p><p>我們在這道題中不能使用 <code>&lt;=</code> 這類運算符，因此，我們想到，進行減法之後取符號位的操作。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isAsciiDigit</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">int</span> ge_30 = !((x + (~<span class="number">0x30</span> + <span class="number">1</span>)) &gt;&gt; <span class="number">31</span>);     </span><br><span class="line">    <span class="type">int</span> le_39 = !((<span class="number">0x39</span> + (~x + <span class="number">1</span>)) &gt;&gt; <span class="number">31</span>); </span><br><span class="line">    <span class="keyword">return</span> ge_30 &amp; le_39; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="conditional"><a class="markdownIt-Anchor" href="#conditional"></a> conditional</h2><p>使用位運算實現三目運算符（<code>x ? y : z</code>）</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">conditional</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> &#123;</span><br><span class="line">  <span class="type">int</span> xb = !(!x);</span><br><span class="line">  <span class="type">int</span> M = ~xb + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> (M&amp;y) | (~M&amp;z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我們可以使用邏輯掩碼</p><p>先使用 <code>!(!x)</code> 將 x 轉換成 <code>0/1</code>，記為 <code>xb</code></p><p><code>~xb + 1</code>，則有 <code>0 -&gt; 0</code>；<code>1 -&gt; -1 = 0xffffffff</code>（掩碼，取所有位）</p><p>因此，<code>(M&amp;y) | (~M&amp;z)</code> 就是最終的答案。</p><p>如果 <code>x = 1</code>，<code>M = 0xffffffff</code>，<code>~M = 0</code>，取 <code>y</code>；否則，取 <code>z</code></p><h2 id="islessorequal"><a class="markdownIt-Anchor" href="#islessorequal"></a> isLessOrEqual</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isLessOrEqual</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> !((y+(~x+<span class="number">1</span>))&gt;&gt;<span class="number">31</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>簡單判斷符號位即可。但是實現的是 <code>&lt;=</code>，對 <code>&gt;</code> 取非即可</p><h2 id="logicalneg"><a class="markdownIt-Anchor" href="#logicalneg"></a> logicalNeg</h2><p>計算 <code>!x</code> (邏輯非)，<strong>不使用</strong> <code>!</code> 運算符</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">logicalNeg</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> ((x&gt;&gt;<span class="number">31</span>) | ((~x+<span class="number">1</span>)&gt;&gt;<span class="number">31</span>))+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="howmanybits"><a class="markdownIt-Anchor" href="#howmanybits"></a> howManyBits</h2><p>計算用補碼表示 <code>x</code> 所需的最小位數</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">howManyBits</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="type">int</span> fg = x&gt;&gt;<span class="number">31</span>;</span><br><span class="line">  x = ((~fg) &amp; x) | (fg &amp;(~x));</span><br><span class="line">  <span class="type">int</span> h16 = !!(x &gt;&gt; <span class="number">16</span>) &lt;&lt; <span class="number">4</span>;</span><br><span class="line">  x &gt;&gt;= h16;</span><br><span class="line">  <span class="type">int</span> h8 = !!(x&gt;&gt;<span class="number">8</span>) &lt;&lt; <span class="number">3</span>;</span><br><span class="line">  x &gt;&gt;= h8;</span><br><span class="line">  <span class="type">int</span> h4 = !!(x&gt;&gt;<span class="number">4</span>) &lt;&lt; <span class="number">2</span>;</span><br><span class="line">  x &gt;&gt;= h4;</span><br><span class="line">  <span class="type">int</span> h2 = !!(x&gt;&gt;<span class="number">2</span>) &lt;&lt; <span class="number">1</span>;</span><br><span class="line">  x&gt;&gt;=h2;</span><br><span class="line">  <span class="type">int</span> h1 = !!(x&gt;&gt;<span class="number">1</span>);</span><br><span class="line">  x&gt;&gt;=h1;</span><br><span class="line">  <span class="type">int</span> h0 = x;</span><br><span class="line">  <span class="keyword">return</span> h0 + h1 + h2 + h4 + h8 + h16 + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>這道題，先選取符號位，然後計算之後的最高位即可。</p><p>為了方便計算，我們把負數補碼表示為正數，這樣就只用計算最高位的 <code>1</code> 在哪裡就行了</p><p><code>((~fg) &amp; x) | (fg &amp; (~x))</code> 是一個條件取反操作，相當於 <code>x = (x &lt; 0) ? ~x : x</code></p><ul><li>若 fg 為 0（正數）：表達式變為 (All_1 &amp; x) | (0 &amp; ~x) -&gt; x。保持不變。</li><li>若 fg 為 -1（負數）：表達式變為 (0 &amp; x) | (All_1 &amp; ~x) -&gt; ~x。按位取反。</li></ul><p>這裡提醒各位，此處補碼右移是<strong>算術右移</strong>，所以負數右移得到一個所有位都為 <code>1</code> 的數，也就是 <code>-1</code>。</p><p>接下來進行位的二份尋找：</p><p>這裡的邏輯是**“分治法”**。我們有 32 位要檢查，像二分尋找一樣：</p><ol><li><p>檢查高 16 位：</p><ul><li><code>x &gt;&gt; 16</code>：如果不為 0，說明最高位的 1 在高 16 位中（即位 16-31）。</li><li><code>!!(...)</code>：將結果轉化為 0 或 1。如果高 16 位有數，結果為 1，否則為 0。</li><li><code>1&lt;&lt; 4</code>：如果高 16 位有數，說明我們至少需要 16 位，即 <code>1 &lt;&lt; 4 = 16</code>。</li><li><code>h16</code>：這就是我們找到的基數（0 或 16）。</li><li><code>x &gt;&gt;= h16</code>：關鍵點。如果我們確定高 16 位有數，我們將 x 右移 16 位，丟棄低 16 位，接下來的檢查只關注剛才的高 16 位。如果高 16 位全是 0，x 保持不變，我們繼續檢查原本的低 16 位。</li></ul></li><li><p>檢查高 8 位（在剩下的 16 位範圍內）：</p></li></ol><p>邏輯同上。如果剩下的這部分的高 8 位有數，則 <code>h8 = 8</code>，並將 x 右移 8 位。</p><ol start="3"><li>依此類推：</li></ol><ul><li><code>h4</code>：檢查剩下的 4 位中的高 2 位… (這裡代碼邏輯是一致的，檢查高4位)。</li><li><code>h2</code>：檢查剩下的 4 位。</li><li><code>h1</code>：檢查剩下的 2 位。</li><li><code>h0 = x</code>：檢查最後剩下的 1 位。</li></ul><p>最後，我們計算 <code>h16+…+h0</code> 的總和即可。這裡要注意，補碼有一個符號位，所以結果還要再 <code>+1</code>。</p><p>得到答案：<code>h0 + h1 + h2 + h4 + h8 + h16 + 1</code></p><h2 id="floatscale2"><a class="markdownIt-Anchor" href="#floatscale2"></a> floatScale2</h2><p>對於浮點參數 <code>f</code>，返回 <code>2 * f</code> 的位級等價表示</p><h3 id="ieee-754"><a class="markdownIt-Anchor" href="#ieee-754"></a> IEEE 754</h3><p>我們先來回顧一下浮點數的位級表示，即 IEEE 754，這裡以 <code>float</code> 為例</p><p>浮點數位中有三段：</p><ul><li>Sign (s): 1 bit [31] -&gt; 符號位</li><li>Exponent (exp): 8 bits [30:23] -&gt; 階碼</li><li>Fraction (frac): 23 bits [22:0] -&gt; 尾數</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> sign = (uf &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line"><span class="type">int</span> <span class="built_in">exp</span>  = (uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xFF</span>;</span><br><span class="line"><span class="type">int</span> frac = uf &amp; <span class="number">0x7FFFFF</span>;</span><br></pre></td></tr></table></figure><p>對於一個浮點數的解釋，有三種情況：</p><h4 id="case-a-非規格化-denormalized"><a class="markdownIt-Anchor" href="#case-a-非規格化-denormalized"></a> Case A: 非規格化 (Denormalized)</h4><ul><li><strong>特徵</strong>：<code>exp == 0</code></li><li><strong>真實值</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>=</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>s</mi></msup><mo>×</mo><mi>M</mi><mo>×</mo><msup><mn>2</mn><mrow><mn>1</mn><mo>−</mo><mi>B</mi><mi>i</mi><mi>a</mi><mi>s</mi></mrow></msup></mrow><annotation encoding="application/x-tex">V = (-1)^s \times M \times 2^{1-Bias}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span></span></span></span></span><ul><li>這裡 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mn>0.</mn><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">M = 0.frac</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span></span></span></span> (沒有隱含的 1)</li></ul></li></ul><h4 id="case-b-規格化-normalized"><a class="markdownIt-Anchor" href="#case-b-規格化-normalized"></a> Case B: 規格化 (Normalized)</h4><ul><li><strong>特徵</strong>：<code>exp != 0</code> 且 <code>exp != 255</code></li><li><strong>真實值</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>=</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>s</mi></msup><mo>×</mo><mi>M</mi><mo>×</mo><msup><mn>2</mn><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo>−</mo><mi>B</mi><mi>i</mi><mi>a</mi><mi>s</mi></mrow></msup></mrow><annotation encoding="application/x-tex">V = (-1)^s \times M \times 2^{exp-Bias}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span></span></span></span></span><ul><li>這裡 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mn>1.</mn><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">M = 1.frac</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span></span></span></span> (有一個隱含的 1)</li><li>Bias = 127</li></ul></li></ul><h4 id="case-c-特殊值-special-values"><a class="markdownIt-Anchor" href="#case-c-特殊值-special-values"></a> Case C: 特殊值 (Special Values)</h4><ul><li><strong>特徵</strong>：<code>exp == 255</code> (全 1)</li><li><strong>類型</strong>：<ul><li><code>frac == 0</code>：Infinity (無窮大)</li><li><code>frac != 0</code>：NaN (Not a Number)</li></ul></li></ul><p>接下來我們看這道題，這道題只需要注意分類討論就可以。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="title function_">floatScale2</span><span class="params">(<span class="type">unsigned</span> uf)</span> &#123;</span><br><span class="line">  <span class="type">unsigned</span> s = uf &gt;&gt; <span class="number">31</span>;</span><br><span class="line">  <span class="type">unsigned</span> <span class="built_in">exp</span> = (uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xFF</span>;</span><br><span class="line">  <span class="type">unsigned</span> ff = uf &amp; <span class="number">0x7fffff</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 特殊值 (Special Values)</span></span><br><span class="line">  <span class="comment">// 如果階碼全為1 (exp == 255)，表示 NaN (非數) 或 Infinity (無窮大)</span></span><br><span class="line">  <span class="comment">// 規則：NaN * 2 = NaN, Inf * 2 = Inf，直接返回原值</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0xFF</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> uf;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 非規格化數 (Denormalized)</span></span><br><span class="line">  <span class="comment">// 如果階碼為0，表示非規格化數，數值非常接近 0</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 非規格化數乘以2：直接將尾數左移一位</span></span><br><span class="line">    ff &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 檢查尾數是否溢出 (從非規格化過渡到規格化)</span></span><br><span class="line">    <span class="comment">// 如果左移後 ff 超過了 23 位能表示的最大值 (即 0x7fffff)</span></span><br><span class="line">    <span class="comment">// 說明最高位變成了 1，這個 1 應該“進位”給階碼</span></span><br><span class="line">    <span class="keyword">if</span> (ff &gt; <span class="number">0x7fffff</span>) &#123;</span><br><span class="line">      ff -= <span class="number">0x800000</span>; <span class="comment">// 去掉溢出的那一位 (因為它現在變成了隱含的 1)</span></span><br><span class="line">      <span class="built_in">exp</span> += <span class="number">1</span>;       <span class="comment">// 階碼從 0 變為 1 (成為規格化數)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="comment">// 規格化數 (Normalized)</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 規格化數乘以2：直接給階碼加 1</span></span><br><span class="line">    <span class="built_in">exp</span> += <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 檢查階碼上溢 (Overflow)</span></span><br><span class="line">    <span class="comment">// 如果加 1 後階碼變成了 255，說明數值太大，變成了無窮大 (Infinity)</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0xFF</span>) &#123;</span><br><span class="line">      ff = <span class="number">0</span>; <span class="comment">// 無窮大的定義是 exp=255 且 frac=0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (s &lt;&lt; <span class="number">31</span>) | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | (ff);</span><br><span class="line">&#125;```</span><br><span class="line"></span><br><span class="line">## floatFloat2Int</span><br><span class="line"></span><br><span class="line">對於浮點參數 `f`，返回 `(<span class="type">int</span>)f` 的位級等價表示</span><br><span class="line"></span><br><span class="line">```c</span><br><span class="line"><span class="type">int</span> <span class="title function_">floatFloat2Int</span><span class="params">(<span class="type">unsigned</span> uf)</span> &#123;</span><br><span class="line">  <span class="type">unsigned</span> s = uf &gt;&gt; <span class="number">31</span>;</span><br><span class="line">  <span class="type">unsigned</span> <span class="built_in">exp</span> = (uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xFF</span>;</span><br><span class="line">  <span class="type">unsigned</span> ff = uf &amp; <span class="number">0x7fffff</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 處理特殊情況：NaN (非數) 或 Infinity (無窮大)</span></span><br><span class="line">  <span class="comment">// 當階碼全為 1 時。根據題目要求，越界通常返回 TMin (0x80000000)</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0xFF</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0x80000000u</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 處理非規格化數 (Denormalized)</span></span><br><span class="line">  <span class="comment">// 當階碼全為 0 時，數值極小 (0.xxxx * 2^-126)，轉換為 int 必定為 0</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 計算真實指數 E</span></span><br><span class="line">  <span class="comment">// Bias (偏置值) 是 127。 E = exp - Bias</span></span><br><span class="line">  <span class="type">int</span> E = (<span class="type">int</span>)<span class="built_in">exp</span> - <span class="number">127</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 處理小於 1 的數</span></span><br><span class="line">  <span class="comment">// 如果真實指數小於 0 (例如 2^-1, 2^-2)，數值為 0.xxxx</span></span><br><span class="line">  <span class="comment">// 強轉 int 會向零截斷，結果為 0</span></span><br><span class="line">  <span class="keyword">if</span> (E &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 還原隱含的 1 (Restore Implicit 1)</span></span><br><span class="line">  <span class="comment">// 規格化數的真實尾數形式是 1.fffff...</span></span><br><span class="line">  <span class="comment">// 我們手動把第 23 位置 1，代表那個隱含的整數部分 &quot;1&quot;</span></span><br><span class="line">  ff = ff | (<span class="number">1</span> &lt;&lt; <span class="number">23</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 處理溢出 (Overflow)</span></span><br><span class="line">  <span class="comment">// 如果指數 E &gt;= 31，說明數值 magnitude &gt;= 2^31</span></span><br><span class="line">  <span class="comment">// int 的最大值是 2^31 - 1。</span></span><br><span class="line">  <span class="comment">// 無論是正數溢出，還是負數正好是 TMin (-2^31) 或更小，</span></span><br><span class="line">  <span class="comment">// 按照題目規則，都返回 TMin (0x80000000)</span></span><br><span class="line">  <span class="keyword">if</span> (E &gt;= <span class="number">31</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0x80000000u</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 位移對齊 (Bit Shifting)</span></span><br><span class="line">  <span class="comment">// 現在的 ff 看起來是這樣： [1]. [xxxxxx]... (1 在第 23 位)</span></span><br><span class="line">  <span class="comment">// 這相當於 1.xxxxx * 2^23 (如果在整數暫存器看)</span></span><br><span class="line">  <span class="comment">// 我們實際需要的是 1.xxxxx * 2^E</span></span><br><span class="line">  <span class="keyword">if</span> (E &lt; <span class="number">23</span>) &#123;</span><br><span class="line">    <span class="comment">// 情況 A: 指數較小 (例如 E = 20)</span></span><br><span class="line">    <span class="comment">// 我們需要將小數點右移 20 位。</span></span><br><span class="line">    <span class="comment">// 但當前 ff 是左對齊在第 23 位的，所以需要**右移**丟棄多餘的小數位。</span></span><br><span class="line">    <span class="comment">// 移位量 = 23 - 20 = 3</span></span><br><span class="line">    ff = ff &gt;&gt; (<span class="number">23</span> - E);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 情況 B: 指數較大 (例如 E = 30)</span></span><br><span class="line">    <span class="comment">// 我們需要將小數點右移 30 位。</span></span><br><span class="line">    <span class="comment">// 當前只在第 23 位，不夠，需要**左移**補零。</span></span><br><span class="line">    <span class="comment">// 移位量 = 30 - 23 = 7</span></span><br><span class="line">    ff = ff &lt;&lt; (E - <span class="number">23</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 處理符號</span></span><br><span class="line">  <span class="comment">// 如果原數是負數，進行取反加一 (即 -ff)</span></span><br><span class="line">  <span class="keyword">if</span> (s) <span class="keyword">return</span> -ff;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 原數是正數，直接返回</span></span><br><span class="line">  <span class="keyword">return</span> ff;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="floatpower2"><a class="markdownIt-Anchor" href="#floatpower2"></a> floatPower2</h2><p>對於整數 <code>x</code>，返回 <code>2.0^x</code> 的位級等價表示。對於這道題，計算出幾個臨界點即可。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="title function_">floatPower2</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. 處理下溢 (Underflow)</span></span><br><span class="line">    <span class="comment">// 最小的非規格化數是 2^(-149)。</span></span><br><span class="line">    <span class="comment">// 計算邏輯：Min Denorm = 2^(1-Bias) * 2^(-23) = 2^(-126) * 2^(-23) = 2^(-149)</span></span><br><span class="line">    <span class="comment">// 如果 x 比這個還小，說明數值太小無法表示，直接返回 0.0</span></span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">-149</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 處理非規格化數 (Denormalized)</span></span><br><span class="line">    <span class="comment">// 範圍：[-149, -127]</span></span><br><span class="line">    <span class="comment">// 非規格化數的階碼 (exp) 全為 0，值公式為：M * 2^(-126)</span></span><br><span class="line">    <span class="comment">// 我們需要構建 2^x。</span></span><br><span class="line">    <span class="comment">// 方程：2^x = (1 &lt;&lt; shift) * 2^(-23) * 2^(-126)  &lt;-- (1&lt;&lt;shift)*2^-23 是尾數部分</span></span><br><span class="line">    <span class="comment">//      2^x = 2^shift * 2^(-149)</span></span><br><span class="line">    <span class="comment">//      x = shift - 149</span></span><br><span class="line">    <span class="comment">//      shift = x + 149</span></span><br><span class="line">    <span class="comment">// 所以，我們將 1 左移 (x + 149) 位放在尾數部分 (Fraction)</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x &lt; <span class="number">-126</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> &lt;&lt; (x + <span class="number">149</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 處理規格化數 (Normalized)</span></span><br><span class="line">    <span class="comment">// 範圍：[-126, 127]</span></span><br><span class="line">    <span class="comment">// 規格化數的值公式為：1.0 * 2^(exp - Bias)</span></span><br><span class="line">    <span class="comment">// 我們需要 2^x，尾數部分保持為 0 (即 1.0)，只需要設置階碼。</span></span><br><span class="line">    <span class="comment">// 方程：x = exp - Bias</span></span><br><span class="line">    <span class="comment">//      exp = x + Bias</span></span><br><span class="line">    <span class="comment">//      exp = x + 127</span></span><br><span class="line">    <span class="comment">// 將計算出的 exp 移到階碼的位置 (第 23-30 位)</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x &lt;= <span class="number">127</span>)</span><br><span class="line">        <span class="keyword">return</span> (x + <span class="number">127</span>) &lt;&lt; <span class="number">23</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. 處理上溢 (Overflow)</span></span><br><span class="line">    <span class="comment">// 範圍：x &gt; 127</span></span><br><span class="line">    <span class="comment">// 單精度浮點數最大能表示的 2 的冪是 2^127。</span></span><br><span class="line">    <span class="comment">// 超過這個值，返回正無窮大 (+Infinity)。</span></span><br><span class="line">    <span class="comment">// +Inf 的表示：符號位 0，階碼全 1 (0xFF)，尾數全 0。</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="number">0xFF</span>) &lt;&lt; <span class="number">23</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="小結"><a class="markdownIt-Anchor" href="#小結"></a> 小結</h2><p><code>Data Lab</code> 實驗使我深入理解整數（補碼）和浮點數（IEEE 754）在二進制層面的表示方法，透過使用一組極其受限的位運算符（如 ~, &amp;, |, ^, +, &lt;&lt;, &gt;&gt;）來實現複雜的邏輯、算術、比較和類型轉換操作，從而真正掌握了位運算的技巧。</p><p>我的代碼存放在 <a href="https://github.com/aeilot/CSAPP-Labs">aeilot/CSAPP-Labs</a>。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | CSAPP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS </tag>
            
            <tag> C </tag>
            
            <tag> 位運算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>矩陣的 Modified Gram Schmidt 方法</title>
      <link href="/2025/11/26/matrix-mqr/"/>
      <url>/2025/11/26/matrix-mqr/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>矩陣的 QR 分解在電腦運算中可能造成誤差，本文探討一下一種改進版本的 Gram-Schmidt 正交化方法。</p><p>經典的 Gram-Schmidt 方法可能造成數值不穩定性。在電腦中，舍入誤差可能會累積，造成得到的正交基並不具有正交性。</p><h2 id="經典的-gram-schmidt"><a class="markdownIt-Anchor" href="#經典的-gram-schmidt"></a> 經典的 Gram-Schmidt</h2><p>我們先來回顧一下經典的 Gram-Schmidt 方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">for j = 1 : n</span><br><span class="line">    v_j = x_j</span><br><span class="line">    for k = 1 : j - 1</span><br><span class="line">        v_j = v_j - ( (v_k^T x_j) / (v_k^T v_k) ) * v_k</span><br><span class="line">    endfor</span><br><span class="line">endfor</span><br></pre></td></tr></table></figure><p>最終我們將 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 歸一化得到標準正交基 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>j</mi></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>v</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi mathvariant="normal">∣</mi><msub><mi>v</mi><mi>j</mi></msub><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q_j = (v_j)/(| v_j |)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mclose">)</span></span></span></span> 。</p><p>注意：CGS 始終使用原始向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">x_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 與之前的基向量計算投影</p><h3 id="數學證明"><a class="markdownIt-Anchor" href="#數學證明"></a> 數學證明</h3><p>簡單進行數學證明</p><p>定義第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> 步生成的向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>v</mi><mi>j</mi></msub><mo>=</mo><msub><mi>x</mi><mi>j</mi></msub><mo>−</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>j</mi><mo>−</mo><mn>1</mn></mrow></munderover><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>k</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>k</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_j = x_j - \sum_{k=1}^{j-1} ( (v_k^T x_j) / (v_k^T v_k) ) v_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8694379999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.16089em;vertical-align:-1.302113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8587770000000001em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.347113em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>選取任意一個之前的基向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">v_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>（其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>m</mi><mo>&lt;</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">1 \le m &lt; j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>），計算它與 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 的內積 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_m^T v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1274389999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>j</mi></msub><mo>=</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo>−</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>j</mi><mo>−</mo><mn>1</mn></mrow></munderover><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>k</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>k</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msub><mi>v</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">v_m^T v_j = v_m^T ( x_j - \sum_{k=1}^{j-1} ((v_k^T x_j) / (v_k^T v_k)) v_k )</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.16089em;vertical-align:-1.302113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8587770000000001em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.347113em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>利用內積的線性性質，將 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup></mrow><annotation encoding="application/x-tex">v_m^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.088331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span> 乘進去：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>j</mi></msub><mo>=</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub><mo>−</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>j</mi><mo>−</mo><mn>1</mn></mrow></munderover><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>k</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>k</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">v_m^T v_j = v_m^T x_j - \sum_{k=1}^{j-1} ((v_k^T x_j) / (v_k^T v_k)) (v_m^T v_k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.16089em;vertical-align:-1.302113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8587770000000001em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.347113em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>由於前提假設 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>v</mi><mrow><mi>j</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">v_1, \dots, v_{j-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 是兩兩正交的，所以在求和符號 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∑</mo></mrow><annotation encoding="application/x-tex">\sum</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span></span></span></span> 中：</p><ul><li>當 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo mathvariant="normal">≠</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">k \neq m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 時，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>k</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">v_m^T v_k = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.088331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> 。</li><li>當且僅當 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">k = m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 時，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>k</mi></msub><mo>=</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>m</mi></msub><mo mathvariant="normal">≠</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">v_m^T v_k = v_m^T v_m \neq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.088331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.088331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> 。</li></ul><p>因此，求和項中只剩下 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">k=m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 這一項：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>j</mi></msub><mo>=</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub><mo>−</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>m</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>m</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">v_m^T v_j = v_m^T x_j - ((v_m^T x_j) / (v_m^T v_m)) (v_m^T v_m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>分子分母中的標量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">v_m^T v_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.088331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 相互抵消：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>j</mi></msub><mo>=</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub><mo>−</mo><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_m^T v_j = v_m^T x_j - v_m^T x_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>v</mi><mi>m</mi><mi>T</mi></msubsup><msub><mi>v</mi><mi>j</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">v_m^T v_j = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p><p>證畢</p><h3 id="誤差分析"><a class="markdownIt-Anchor" href="#誤差分析"></a> 誤差分析</h3><p>如果在 CGS（經典格拉姆-施密特正交化）中計算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">q_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 時發生誤差，導致 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>q</mi><mn>2</mn></msub><mo>=</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">q_1^T q_2 = \delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0894389999999998em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span> 是一個很小但非零的數值，這個誤差將不會在隨後的任何計算中被修正：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>v</mi><mn>3</mn></msub><mo>=</mo><msub><mi>x</mi><mn>3</mn></msub><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><msub><mi>q</mi><mn>1</mn></msub><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><msub><mi>q</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">v_3 = x_3 - (q_1^T x_3)q_1 - (q_2^T x_3)q_2 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msub><mi>v</mi><mn>3</mn></msub><mo>=</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mi>δ</mi><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">q_2^T v_3 = q_2^T x_3 - (q_1^T x_3)\delta - (q_2^T x_3) = -(q_1^T x_3)\delta </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.138331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.138331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>v</mi><mn>3</mn></msub><mo>=</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mi>δ</mi><mo>=</mo><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">q_1^T v_3 = q_1^T x_3 - (q_1^T x_3) - (q_2^T x_3)\delta = -(q_2^T x_3)\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.138331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.138331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span></span></p><p>我們可以看出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 與 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">q_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">q_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 都不正交。</p><h2 id="改進的-gram-schmidt-mgs"><a class="markdownIt-Anchor" href="#改進的-gram-schmidt-mgs"></a> 改進的 Gram-Schmidt (MGS)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">for j = 1 : n</span><br><span class="line">    v_j = x_j</span><br><span class="line">endfor</span><br><span class="line"></span><br><span class="line">for j = 1 : n</span><br><span class="line">    q_j = v_j / ||v_j||_2</span><br><span class="line">    for k = j + 1 : n</span><br><span class="line">        v_k = v_k - (q_j^T v_k) q_j</span><br><span class="line">    endfor</span><br><span class="line">endfor</span><br></pre></td></tr></table></figure><p>最終我們將 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 歸一化得到標準正交基 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>j</mi></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>v</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi mathvariant="normal">∣</mi><msub><mi>v</mi><mi>j</mi></msub><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q_j = (v_j)/(| v_j |)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mclose">)</span></span></span></span> 。</p><p>區別在於，一旦算出來一個向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>，立即用它去更新後面所有的向量（減去向量在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span> 上的投影），使得後面所有的向量與這個向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span> 正交。</p><h3 id="誤差分析-2"><a class="markdownIt-Anchor" href="#誤差分析-2"></a> 誤差分析</h3><p>假設 MGS 出現：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>q</mi><mn>2</mn></msub><mo>=</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">q_1^T q_2 = \delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0894389999999998em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span> 很小但非零。</p><p>對於第三個向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ：</p><ul><li>初始狀態：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>=</mo><msub><mi>x</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">v_3^{(0)} = x_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.26630799999999993em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.26630799999999993em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mn>1</mn><mo>:</mo><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>=</mo><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">)</mo><msub><mi>q</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">j = 1: v_3^{(1)} = v_3^{(0)} - (q_1^T v_3^{(0)})q_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.26630799999999993em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.26630799999999993em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.26630799999999993em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.26630799999999993em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.26630799999999993em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.26630799999999993em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mn>2</mn><mo>:</mo><msub><mi>v</mi><mn>3</mn></msub><mo>=</mo><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">)</mo><msub><mi>q</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">j = 2: v_3 = v_3^{(1)} - (q_2^T v_3^{(1)})q_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.26630799999999993em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.26630799999999993em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.26630799999999993em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.26630799999999993em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li></ul><p>此時 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是第三個向量在歸一化之前的最終形式。</p><p>讓我們檢查正交性，假設不再產生其他誤差：</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msub><mi>v</mi><mn>3</mn></msub><mo>=</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">q_2^T v_3 = q_2^T v_3^{(1)} - (q_2^T v_3^{(1)}) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0894389999999998em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.26630799999999993em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.26630799999999993em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.26630799999999993em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.26630799999999993em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></p><p>所以，我們保留了對 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">q_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的正交性。</p><p>接下來看 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">q_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>v</mi><mn>3</mn></msub><mo>=</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">)</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">q_1^T v_3 = q_1^T v_3^{(1)} - (q_2^T v_3^{(1)})\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.138331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>=</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">)</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">q_2^T v_3^{(1)} = q_2^T v_3^{(0)} - (q_1^T v_3^{(0)})\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>=</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">q_1^T v_3^{(1)} = q_1^T v_3^{(0)} - (q_1^T v_3^{(0)}) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p><p>由此可得：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>v</mi><mn>3</mn></msub><mo>=</mo><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>−</mo><mo stretchy="false">(</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">)</mo><mi>δ</mi><mo stretchy="false">)</mo><mi>δ</mi><mo>=</mo><mo>−</mo><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><mi>δ</mi><mo>+</mo><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msubsup><mi>v</mi><mn>3</mn><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></msubsup><msup><mi>δ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">q_1^T v_3 = -(q_2^T v_3^{(0)} - (q_1^T v_3^{(0)})\delta)\delta= -q_2^T v_3^{(0)}\delta + q_1^T v_3^{(0)}\delta^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.138331em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mord">−</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.311108em;vertical-align:-0.266308em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.433692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><p>由於 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span> 非常小，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>δ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\delta^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> 就更小了。因此 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>q</mi><mn>1</mn><mi>T</mi></msubsup><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">q_1^T v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0894389999999998em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 中的誤差和 CGS 差不多，但我們消除了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>q</mi><mn>2</mn><mi>T</mi></msubsup><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">q_2^T v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0894389999999998em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 中的誤差，使得誤差更小。</p><h2 id="總結"><a class="markdownIt-Anchor" href="#總結"></a> 總結</h2><p>在電腦中，由於浮點運算的特殊性，有許多數學方法需要重新考慮，儘量提高數值穩定性。這使得我們有必要重新審視我們學習過的數學知識，針對電腦的特殊性進行重新設計與優化。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 程式設計 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 數學 </tag>
            
            <tag> 線性代數 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>聊一聊位掩碼（Bit Mask）</title>
      <link href="/2025/10/20/bitmask/"/>
      <url>/2025/10/20/bitmask/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>掩碼 (Mask) 是一種位運算技巧，它使用一個特定的值（掩碼）與目標值進行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="monospace">&amp;</mi></mrow><annotation encoding="application/x-tex">\mathtt{\&amp;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61111em;vertical-align:0em;"></span><span class="mord"><span class="mord mathtt">&amp;</span></span></span></span></span> (與)、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="monospace">∣</mi></mrow><annotation encoding="application/x-tex">\mathtt{|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">∣</span></span></span></span></span> (或)、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo lspace="0em" rspace="0em">∧</mo></mrow><annotation encoding="application/x-tex">\mathtt{\wedge}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord"><span class="mord">∧</span></span></span></span></span> (異或) 運算，以精確地、批次地操作、提取或檢查目標值中的一個或多個位。</p></blockquote><h2 id="基本概念"><a class="markdownIt-Anchor" href="#基本概念"></a> 基本概念</h2><p>掩碼利用位運算的特性，透過設定掩碼中的特定位為 <code>1</code> 或 <code>0</code>，來控制目標值中對應位的行為。 具體來說，掩碼可以用來提取某些位的值，清除某些位的值，反轉某些位的值，或者設定某些位的值。</p><h3 id="提取位"><a class="markdownIt-Anchor" href="#提取位"></a> 提取位</h3><p>透過與運算（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="monospace">&amp;</mi></mrow><annotation encoding="application/x-tex">\mathtt{\&amp;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61111em;vertical-align:0em;"></span><span class="mord"><span class="mord mathtt">&amp;</span></span></span></span></span>）和一個掩碼，可以提取目標值中特定位置的位。例如，假設我們有一個 8 位的二進位制數 <code>10101100</code>，我們想提取其中的第 3 位（從右數起，0 開始計數）。我們可以使用掩碼 <code>00000100</code>：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  10101100  (目標值)</span></span><br><span class="line"><span class="section">&amp; 00000100  (掩碼)</span></span><br><span class="line"><span class="section">------------</span></span><br><span class="line"><span class="code">  00000100  (結果)</span></span><br></pre></td></tr></table></figure><p>結果 <code>00000100</code> 表示第 3 位是 <code>1</code>。</p><p>這一技巧可以用來提取多位，比如想要提取某個數的低 4 位，可以使用掩碼 <code>00001111</code>。</p><h3 id="清除位"><a class="markdownIt-Anchor" href="#清除位"></a> 清除位</h3><p>透過與運算（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="monospace">&amp;</mi></mrow><annotation encoding="application/x-tex">\mathtt{\&amp;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61111em;vertical-align:0em;"></span><span class="mord"><span class="mord mathtt">&amp;</span></span></span></span></span>）和一個掩碼，可以清除目標值中特定位置的位。例如，假設我們有一個 8 位的二進位制數 <code>10101100</code>，我們想清除其中的第 3 位。我們可以使用掩碼 <code>11111011</code>：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  10101100  (目標值)</span></span><br><span class="line"><span class="section">&amp; 11111011  (掩碼)</span></span><br><span class="line"><span class="section">------------</span></span><br><span class="line"><span class="code">  10101000  (結果)</span></span><br></pre></td></tr></table></figure><p>結果 <code>10101000</code> 表示第 3 位被清除為 <code>0</code>。</p><p>清除就是不提取某些位 lol</p><h3 id="反轉位"><a class="markdownIt-Anchor" href="#反轉位"></a> 反轉位</h3><p>透過異或運算（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo lspace="0em" rspace="0em">∧</mo></mrow><annotation encoding="application/x-tex">\mathtt{\wedge}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord"><span class="mord">∧</span></span></span></span></span>）和一個掩碼，可以反轉目標值中特定位置的位。例如，假設我們有一個 8 位的二進位制數 <code>10101100</code>，我們想反轉其中的第 3 位。我們可以使用掩碼 <code>00000100</code>：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  10101100  (目標值)</span></span><br><span class="line"><span class="section">^ 00000100  (掩碼)</span></span><br><span class="line"><span class="section">------------</span></span><br><span class="line"><span class="code">  10101000  (結果)</span></span><br></pre></td></tr></table></figure><p>結果 <code>10101000</code> 表示第 3 位被反轉。</p><h3 id="設定位"><a class="markdownIt-Anchor" href="#設定位"></a> 設定位</h3><p>透過或運算（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="monospace">∣</mi></mrow><annotation encoding="application/x-tex">\mathtt{|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">∣</span></span></span></span></span>）和一個掩碼，可以設定目標值中特定位置的位。例如，假設我們有一個 8 位的二進位制數 <code>10101000</code>，我們想設定其中的第 3 位為 <code>1</code>。我們可以使用掩碼 <code>00000100</code>：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  10101000  (目標值)</span></span><br><span class="line"><span class="section">| 00000100  (掩碼)</span></span><br><span class="line"><span class="section">------------</span></span><br><span class="line"><span class="code">  10101100  (結果)</span></span><br></pre></td></tr></table></figure><p>結果 <code>10101100</code> 表示第 3 位被設定為 <code>1</code>。</p><h2 id="構造掩碼"><a class="markdownIt-Anchor" href="#構造掩碼"></a> 構造掩碼</h2><p>構造合適的掩碼是使用技巧的關鍵。</p><ol><li>單個位: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="monospace">1</mn><mo>≪</mo><mi mathvariant="monospace">n</mi></mrow><annotation encoding="application/x-tex">\mathtt{1 \ll n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6502100000000001em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord mathtt">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≪</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathtt">n</span></span></span></span></span><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="monospace">1</mn><mo>≪</mo><mn mathvariant="monospace">5</mn></mrow><annotation encoding="application/x-tex">\mathtt{1 \ll 5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6502100000000001em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord mathtt">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≪</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathtt">5</span></span></span></span></span> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="monospace">00100000</mn></mrow><annotation encoding="application/x-tex">\mathtt{00100000}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61111em;vertical-align:0em;"></span><span class="mord"><span class="mord mathtt">0</span><span class="mord mathtt">0</span><span class="mord mathtt">1</span><span class="mord mathtt">0</span><span class="mord mathtt">0</span><span class="mord mathtt">0</span><span class="mord mathtt">0</span><span class="mord mathtt">0</span></span></span></span></span>) 是第 5 位的掩碼。</li></ol></li><li>連續低位: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn mathvariant="monospace">1</mn><mo>≪</mo><mi mathvariant="monospace">n</mi><mo stretchy="false">)</mo><mo>−</mo><mn mathvariant="monospace">1</mn></mrow><annotation encoding="application/x-tex">\mathtt{(1 \ll n) - 1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathtt">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≪</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathtt">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathtt">1</span></span></span></span></span><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn mathvariant="monospace">1</mn><mo>≪</mo><mn mathvariant="monospace">8</mn><mo stretchy="false">)</mo><mo>−</mo><mn mathvariant="monospace">1</mn></mrow><annotation encoding="application/x-tex">\mathtt{(1 \ll 8) - 1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathtt">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≪</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathtt">8</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathtt">1</span></span></span></span></span> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="monospace">0</mn><mi mathvariant="monospace">x</mi><mi mathvariant="monospace">F</mi><mi mathvariant="monospace">F</mi></mrow><annotation encoding="application/x-tex">\mathtt{0xFF}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61111em;vertical-align:0em;"></span><span class="mord"><span class="mord mathtt">0</span><span class="mord mathtt">x</span><span class="mord mathtt">F</span><span class="mord mathtt">F</span></span></span></span></span>) 是低 8 位的掩碼。</li></ol></li><li>全 1 掩碼: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∼</mo><mn mathvariant="monospace">0</mn></mrow><annotation encoding="application/x-tex">\mathtt{\sim 0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61111em;vertical-align:0em;"></span><span class="mord"><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathtt">0</span></span></span></span></span> (即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>)<ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="monospace">0</mn><mi mathvariant="monospace">x</mi><mi mathvariant="monospace">F</mi><mi mathvariant="monospace">F</mi><mi mathvariant="monospace">F</mi><mi mathvariant="monospace">F</mi><mi mathvariant="monospace">F</mi><mi mathvariant="monospace">F</mi><mi mathvariant="monospace">F</mi><mi mathvariant="monospace">F</mi></mrow><annotation encoding="application/x-tex">\mathtt{0xFFFFFFFF}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61111em;vertical-align:0em;"></span><span class="mord"><span class="mord mathtt">0</span><span class="mord mathtt">x</span><span class="mord mathtt">F</span><span class="mord mathtt">F</span><span class="mord mathtt">F</span><span class="mord mathtt">F</span><span class="mord mathtt">F</span><span class="mord mathtt">F</span><span class="mord mathtt">F</span><span class="mord mathtt">F</span></span></span></span></span> (假設 32 位)</li></ol></li><li>全 0 掩碼: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="monospace">0</mn></mrow><annotation encoding="application/x-tex">\mathtt{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61111em;vertical-align:0em;"></span><span class="mord"><span class="mord mathtt">0</span></span></span></span></span></li></ol><h2 id="條件掩碼"><a class="markdownIt-Anchor" href="#條件掩碼"></a> 條件掩碼</h2><p>在 CSAPP Data Lab 中，我們有一道題目要求用位運算實現三目運算子 <code>x ? y : z</code>。我們可以使用條件掩碼來實現這一點。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">conditional</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> &#123;</span><br><span class="line">  <span class="type">int</span> mask = !!x;          <span class="comment">// mask 為 1 如果 x 非零，否則為 0</span></span><br><span class="line">  mask = ~mask + <span class="number">1</span>;       <span class="comment">// mask 為 0xFFFFFFFF 如果 x 非零，否則為 0x0</span></span><br><span class="line">  <span class="keyword">return</span> (y &amp; mask) | (z &amp; ~mask);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>這段程式碼的邏輯是：</p><ol><li>計算 <code>mask = !!x</code>，如果 <code>x</code> 非零，<code>mask</code> 為 <code>1</code>，否則為 <code>0</code>。</li><li>透過 <code>mask = ~mask + 1</code>，將 <code>mask</code> 轉換為全 1 (<code>0xFFFFFFFF</code>) 或全 0 (<code>0x0</code>)。</li><li>返回 <code>(y &amp; mask) | (z &amp; ~mask)</code>，如果 <code>x</code> 非零，結果為 <code>y</code>，否則為 <code>z</code>。</li></ol><h2 id="總結"><a class="markdownIt-Anchor" href="#總結"></a> 總結</h2><p>掩碼是一種強大的位運算技巧，可以用來精確地操作和檢查資料中的特定位。</p><p>透過合理構造掩碼，我們可以高效地實現各種位操作，如提取、清除、反轉和設定位。在實際程式設計中，掌握掩碼的使用能夠幫助我們編寫出更高效、更簡潔的程式碼。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | CSAPP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS </tag>
            
            <tag> C </tag>
            
            <tag> 位運算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>整數溢位與未定義行為</title>
      <link href="/2025/10/13/bitlab-optimizer/"/>
      <url>/2025/10/13/bitlab-optimizer/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>在做 CSAPP Data Lab 的時候，關於整數溢位，遇到一些問題。</p><h2 id="題幹"><a class="markdownIt-Anchor" href="#題幹"></a> 題幹</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * isTmax - returns 1 if x is the maximum, two&#x27;s complement number, </span></span><br><span class="line"><span class="comment"> *     and 0 otherwise </span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | +</span></span><br><span class="line"><span class="comment"> *   Max ops: 10</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>題目要求，僅僅使用運算子 <code>! ~ &amp; ^ | +</code> 來判斷一個數是否是最大的二的補碼（<code>int</code> 範圍內），即 <code>0x7fffffff</code>。如果是，輸出 1；否則，輸出 0。</p><h2 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h2><p>由於我們不能使用移位操作（很多人會直接 <code>1&lt;&lt;31 - 1</code>），可以考慮整數溢位的特殊性質。</p><p>具體地，我們有 <code>0x7fffffff + 1 = 0x80000000</code>，符號改變。</p><p>而 <code>0x80000000 + 0x80000000 = 0</code></p><p>我們可以得到 <code>x = 0x7fffffff</code> 滿足 <code>x + 1 + x + 1 = 0</code></p><p>而對於其他數字，假設 <code>y = x + k</code> 其中 <code>k</code> 非零，則有 <code>y + 1 + y + 1 = 2*k</code></p><p>此時，我們發現，對於 <code>y=-1</code> 也有 <code>y + 1 + y + 1 = 0</code>，需要排除掉</p><p>其他情況下，非零數轉換為 <code>bool</code> 型別自動變為 <code>1</code></p><p>我們不難寫出以下程式碼：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="type">int</span> p1 = x+<span class="number">1</span>;</span><br><span class="line">  <span class="type">int</span> p2 = p1 + p1;</span><br><span class="line">  <span class="keyword">return</span> !(p2) &amp; !!(p1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="發現問題"><a class="markdownIt-Anchor" href="#發現問題"></a> 發現問題</h2><p>這段程式碼在我本地（macOS，Apple clang version 17.0.0 (clang-1700.3.19.1), Target: arm64-apple-darwin25.0.0) 上執行，使用命令 <code>clang main.c</code> 是沒有任何問題的。</p><p>但是，檢查到 CSAPP 提供的 Makefile，有</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Makefile that builds btest and other helper programs for the CS:APP data lab</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">CC = gcc</span><br><span class="line">CFLAGS = -O -Wall</span><br><span class="line">LIBS = -lm</span><br><span class="line"></span><br><span class="line"><span class="section">all: btest fshow ishow</span></span><br><span class="line"></span><br><span class="line"><span class="section">btest: btest.c bits.c decl.c tests.c btest.h bits.h</span></span><br><span class="line"><span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> <span class="variable">$(LIBS)</span> -o btest bits.c btest.c decl.c tests.c</span><br><span class="line"></span><br><span class="line"><span class="section">fshow: fshow.c</span></span><br><span class="line"><span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> -o fshow fshow.c</span><br><span class="line"></span><br><span class="line"><span class="section">ishow: ishow.c</span></span><br><span class="line"><span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> -o ishow ishow.c</span><br><span class="line"></span><br><span class="line"><span class="comment"># Forces a recompile. Used by the driver program. </span></span><br><span class="line"><span class="section">btestexplicit:</span></span><br><span class="line"><span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> <span class="variable">$(LIBS)</span> -o btest bits.c btest.c decl.c tests.c </span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">rm -f *.o btest fshow ishow *~</span><br></pre></td></tr></table></figure><p>注意到，編譯器使用了 <code>-O</code> flag，即 <code>O1</code> 最佳化。</p><p>此時執行這段程式碼，對於 <code>0x7fffffff</code> 輸出 <code>0</code>，懷疑可能是編譯器最佳化時，假設未定義行為（整數溢位）不會發生，將 !p2 最佳化。<code>p1 + p1</code> 的形式過於簡單。</p><h2 id="未定義行為"><a class="markdownIt-Anchor" href="#未定義行為"></a> 未定義行為</h2><p>未定義行為（UB），根據 <code>cppreference</code> 的定義：</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span> behavior - There are <span class="literal">no</span> restrictions <span class="literal">on</span> the behavior <span class="keyword">of</span> the program.</span><br></pre></td></tr></table></figure><p>有符號整數溢位是一種常見的未定義行為。</p><blockquote><p>Because correct C++ programs are free of undefined behavior, compilers may produce unexpected results when a program that actually has UB is compiled with optimization enabled.</p></blockquote><p>也就是說，編譯器最佳化會對未定義行為產生意料之外的結果</p><p><code>cppreference</code> 給出了一個整數溢位的例子：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">foo</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">1</span> &gt; x; <span class="comment">// either true or UB due to signed overflow</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>編譯之後卻變成了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo(int):</span><br><span class="line">        mov     eax, 1</span><br><span class="line">        ret</span><br></pre></td></tr></table></figure><p>意思是，不管怎麼樣都輸出 <code>1</code></p><h2 id="觀察出錯程式碼"><a class="markdownIt-Anchor" href="#觀察出錯程式碼"></a> 觀察出錯程式碼</h2><p>我們透過 <code>gcc -S</code> 輸出編譯後的彙編程式碼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">_Z6isTmaxi:</span><br><span class="line">.LFB2:</span><br><span class="line">.cfi_startproc</span><br><span class="line">endbr64</span><br><span class="line">movl$0, %eax</span><br><span class="line">ret</span><br><span class="line">.cfi_endproc</span><br></pre></td></tr></table></figure><p>我們看到，編譯器直接把這個函式返回值改成了 <code>0</code>，不管輸入什麼，與我們的錯誤原因推斷是相同的。</p><h2 id="修改"><a class="markdownIt-Anchor" href="#修改"></a> 修改</h2><p>我們可以嘗試構造一個更復雜的、不易被簡單規則匹配的表示式，躲過 <code>O1</code> 級別的最佳化。</p><p>核心思路不變，仍然是利用 <code>Tmax + 1 = Tmin</code> 這個特性。我們來觀察一下 <code>Tmax</code> 和 <code>Tmin</code> 在二進位制下的關係：</p><ul><li><code>Tmax</code> = <code>0x7fffffff</code> = <code>0111...1111</code></li><li><code>Tmin</code> = <code>0x80000000</code> = <code>1000...0000</code></li></ul><p>一個非常有趣的性質是 <code>Tmax + Tmin = -1</code> (<code>0xffffffff</code>)。</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  0111 1111 ... 1111  (Tmax)</span></span><br><span class="line"><span class="section">+ 1000 0000 ... 0000  (Tmin)</span></span><br><span class="line"><span class="section">-------------------------</span></span><br><span class="line"><span class="code">  1111 1111 ... 1111  (-1)</span></span><br></pre></td></tr></table></figure><p>基於這個觀察，我們可以設計一個新的檢查方案：如果一個數 <code>x</code> 是 <code>Tmax</code>，那麼 <code>x + (x+1)</code> 的結果就應該是 <code>-1</code>。取反後 <code>~(-1)</code> 則為 <code>0</code>。</p><p>我們可以寫出如下的修改版程式碼：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="built_in">map</span> = x + <span class="number">1</span>;</span><br><span class="line">  <span class="type">int</span> res = ~(<span class="built_in">map</span> + x);</span><br><span class="line">  <span class="keyword">return</span> !res &amp; (!!<span class="built_in">map</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>這段程式碼的邏輯是：</p><ol><li>計算 <code>map = x + 1</code>。對於 <code>x = Tmax</code>，這裡同樣會發生有符號溢位，<code>map</code> 變為 <code>Tmin</code>。<strong>這依然是未定義行為（UB）</strong>。</li><li>計算 <code>res = ~(map + x)</code>。如果 <code>x</code> 是 <code>Tmax</code>，這一步就是 <code>~(Tmin + Tmax)</code>，結果為 <code>~(-1)</code>，即 <code>0</code>。</li><li><code>return !res &amp; (!!map)</code>。<code>!res</code> 為 <code>!0</code>，即 <code>1</code>。<code>!!map</code> 部分和之前的版本一樣，是為了排除 <code>x = -1</code> 的情況（此時 <code>map</code> 為 0， <code>!!map</code> 為 0，最終返回 0）。</li></ol><p>這段程式碼在 <code>-O</code> 最佳化下<strong>可能</strong>會得到正確的結果。</p><h2 id="為什麼這個可能有效"><a class="markdownIt-Anchor" href="#為什麼這個可能有效"></a> 為什麼這個“可能”有效？</h2><p>我們必須清醒地認識到，新版本的程式碼本質上沒有解決未定義行為的問題，它只是“僥倖”地繞過了當前編譯器版本的特定最佳化策略。</p><ul><li><strong>程式碼模式的複雜性</strong>：<code>p1 + p1</code> (<code>(x+1)+(x+1)</code>) 是一個非常簡單直白的模式，最佳化器很容易建立一個“如果 <code>p1</code> 非零，則 <code>p1+p1</code> 結果也非零”的最佳化規則。而 <code>~((x+1)+x)</code> 混合了加法和位運算，模式更復雜，可能沒有觸發編譯器中已有的、基於UB的最佳化捷徑。</li><li><strong>最佳化的機會主義</strong>：編譯器最佳化並不是要窮盡所有的數學可能，而是應用一系列已知的高效模式。我們的新程式碼恰好不在這些常見模式的“黑名單”上。</li></ul><p>所以，這個修改版只是一個更具迷惑性的“偽裝”。它在特定環境下能工作，但其行為是不被C語言標準所保證的，在不同的編譯器或未來的GCC版本下，它隨時可能失效。</p><h2 id="結論如何正確面對未定義行為"><a class="markdownIt-Anchor" href="#結論如何正確面對未定義行為"></a> 結論：如何正確面對未定義行為</h2><p>透過 <code>isTmax</code> 這個小小的函式，我們可以一窺C語言中未定義行為的危險性以及現代編譯器最佳化的強大。作為開發者，我們應該得到以下啟示：</p><ol><li><strong>不要依賴未定義行為</strong>：永遠不要編寫依賴於UB的程式碼，即使它“在你的機器上看起來能跑”。程式碼的健壯性來源於對語言標準的嚴格遵守，而非僥倖。</li><li><strong>相信編譯器，但要驗證</strong>：編譯器非常聰明，它會嚴格按照語言規範進行最佳化。當你發現最佳化後的程式碼行為不符合你的“直覺”時，首先應該懷疑自己的程式碼是否觸碰了UB的紅線。</li><li><strong>善用工具</strong>：<ul><li>始終開啟編譯器警告 (<code>-Wall -Wextra</code>) 並將警告視為錯誤 (<code>-Werror</code>)，這能幫你發現許多潛在問題。</li><li>使用執行時檢測工具，如GCC/Clang的 <strong>UndefinedBehaviorSanitizer (UBSan)</strong>。只需在編譯時加上 <code>-fsanitize=undefined</code>，它就能在程式執行時精確地捕獲有符號整數溢位等UB，是除錯這類問題的神器。</li></ul></li></ol><p>對於CSAPP Data Lab這道題來說，它的目的正是為了讓我們在“規則的鐐銬”下舞蹈，從而深刻理解整數表示、運算和編譯器行為。而我們在實際工程中，最安全、最清晰的寫法永遠是第一選擇。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | CSAPP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS </tag>
            
            <tag> C </tag>
            
            <tag> 系統 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快速排序 幾種劃分方法討論</title>
      <link href="/2025/09/10/qsort/"/>
      <url>/2025/09/10/qsort/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>最近在複習資料結構與演算法，聊聊快速排序的幾種劃分演算法。</p><h2 id="快速排序思路"><a class="markdownIt-Anchor" href="#快速排序思路"></a> 快速排序思路</h2><p>快速排序是一種基於分治策略的排序演算法。</p><p>對於待排序陣列，其核心操作是：</p><ol><li>選取一個基準數<code>pivot</code></li><li>將陣列分為兩塊，一塊小於等於基準數，另一塊大於等於基準數（注意 基準數作為分界點）</li><li>遞迴地對於分出來的兩個數字再次進行快速排序</li></ol><p>不斷地進行劃分，遞迴，最後能保證整個陣列有序。</p><h2 id="基準數的選取"><a class="markdownIt-Anchor" href="#基準數的選取"></a> 基準數的選取</h2><p>一般來說，基準數有幾種選取方法：</p><ol><li>選取第一個數或者最後一個數：這樣做，如果陣列已經排好序，則每次劃分都是基準數和剩餘數，時間複雜度升至<code>O(n^2)</code></li><li>隨機選擇一個數</li><li>選取中位數：這樣做始終能對原陣列進行等分，尋找中位數是線性時間的。</li></ol><p>下面以最無腦的方法1為例。</p><h2 id="幾種劃分方法"><a class="markdownIt-Anchor" href="#幾種劃分方法"></a> 幾種劃分方法</h2><p>主要的劃分方法有：</p><ol><li>樸素劃分</li><li>Lomuto 劃分</li><li>Hoare 劃分</li></ol><p>中國大陸教材中經常出現的是第三種，即 Hoare 劃分，也叫哨兵劃分。</p><h3 id="樸素劃分"><a class="markdownIt-Anchor" href="#樸素劃分"></a> 樸素劃分</h3><p>思路很無腦。直接開一個新陣列，把比 <code>pivot</code> 小的放左邊，比 <code>pivot</code> 大的放右邊，最後把陣列複製回到原陣列。需要 <code>O(n)</code> 的額外空間。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> N; <span class="comment">// 陣列長度</span></span><br><span class="line"><span class="type">int</span> A[N];</span><br><span class="line"><span class="type">int</span> tmp[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Native_Partition</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> pivot = A[left];</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> idx = left;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = left; i &lt;= right; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (A[i] &lt; pivot)</span><br><span class="line">            tmp[idx++] = A[i];</span><br><span class="line">    &#125;  <span class="comment">// 先將小於等於 pivot 的複製進入</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> pid = idx;</span><br><span class="line">    tmp[idx++] = pivot;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = left; i &lt;= right; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (A[i] &gt; pivot)</span><br><span class="line">            tmp[idx++] = A[i];</span><br><span class="line">    &#125;  <span class="comment">// 再將大於 pivot 的複製進入</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = left; i &lt;= right; i++) &#123;</span><br><span class="line">        A[i] = tmp[i];</span><br><span class="line">    &#125; <span class="comment">// 複製回到 A</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="lomuto-劃分"><a class="markdownIt-Anchor" href="#lomuto-劃分"></a> Lomuto 劃分</h2><p>Lomuto 劃分即使用單個指標，從左到右掃描陣列，交換，維持劃分順序。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Lomuto_Partition</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> pivot = A[right];</span><br><span class="line">  </span><br><span class="line">    <span class="type">int</span> i = left - <span class="number">1</span>; <span class="comment">// 維護的劃分中最右側的比 pivot 小的元素的下標</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遍歷陣列，把所有比 pivot 小的元素全部移動到左邊</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = left; j &lt;= right - <span class="number">1</span>; j++) &#123;  <span class="comment">// 遍歷到 right - 1 可以對 pivot 進行保護，使得 pivot 不與自己對比，使邏輯更清晰，但或許沒必要</span></span><br><span class="line">        <span class="keyword">if</span> (A[j] &lt; pivot) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            <span class="built_in">swap</span>(A[i], A[j]);</span><br><span class="line">        &#125; <span class="comment">// j 維護的是遍歷時下標，當發現一個比 pivot 小的數時，如果 i + 1 == j 則不動，否則說明之前存在一個數比 `pivot` 大需要交換，則及時進行交換</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 把 pivot 移回來</span></span><br><span class="line">    <span class="built_in">swap</span>(A[i + <span class="number">1</span>], A[right]);  </span><br><span class="line">    <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="hoare-劃分"><a class="markdownIt-Anchor" href="#hoare-劃分"></a> Hoare 劃分</h2><p>Hoare 劃分採用雙指標，進行交換。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Hoare_Partition</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> pivot = A[left];</span><br><span class="line">    <span class="type">int</span> pid = left;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right &amp;&amp; A[right] &gt;= pivot) &#123;</span><br><span class="line">            right--;</span><br><span class="line">        &#125; <span class="comment">// 先從右往左掃描，保護 pivot</span></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right &amp;&amp; A[left] &lt;= pivot) &#123;</span><br><span class="line">            left++;</span><br><span class="line">        &#125; <span class="comment">// 再從左往右掃描</span></span><br><span class="line">        <span class="built_in">swap</span>(A[left], A[right]); <span class="comment">// 交換不正確的數</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 跳出迴圈時，left = right 說明找到了 pivot 的位置</span></span><br><span class="line">    <span class="built_in">swap</span>(A[pid], A[left]);</span><br><span class="line">    <span class="keyword">return</span> pid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>掃描順序對於結果有影響。<code>pivot</code> 在最左邊時，應該先從右往左掃描。</p><p>如果先從左往右掃，找第一個大於 <code>pivot</code> 的數 a，而第一個小於 <code>pivot</code> 的數在 a 左側，此時進行 pivot 和 <code>A[left]</code> 的交換，會導致交換錯誤。故應該優先保證 <code>pivot</code> 左側都小於等於 <code>pivot</code>，即先尋找第一個小於 <code>pivot</code> 的數，這樣交換是安全的。</p><h2 id="快速排序演算法"><a class="markdownIt-Anchor" href="#快速排序演算法"></a> 快速排序演算法</h2><p>對於某劃分函式 <code>partition(int st, int end) -&gt; pivot: int</code> 有</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> N; <span class="comment">// 陣列長度</span></span><br><span class="line"><span class="type">int</span> A[N]; <span class="comment">// 待排序陣列</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">qsort</span><span class="params">(<span class="type">int</span> st, <span class="type">int</span> end)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(st &gt;= end) <span class="keyword">return</span>; <span class="comment">// 遞迴終止條件</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> pivot = <span class="built_in">partition</span>(st, end);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遞迴</span></span><br><span class="line">    <span class="built_in">qsort</span>(st, pivot<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">qsort</span>(pivot<span class="number">+1</span>, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 中文 | 程式設計 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 演算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>等待</title>
      <link href="/2025/03/29/waiting/"/>
      <url>/2025/03/29/waiting/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>此生此夜不長好，明月明年何處看？</p><p>雨巷獨行，秉燭對月。我走遍了整座城市，卻再也找不到那個獨特的角落。或許只是那盞燈或那半掩的門扉，在人生之中卻像風暴裡海上的信標，似這江南春雨中雲霧朦朧處，簷下的紙燈。舊夢重溫，幼時在夏日熟睡，蟬鳴聒噪，也第一次為我定義了等待的焦慮。吊扇之下徘徊的影，是否還停留在多年前原地踟躕。這種焦慮如影隨形，如何能擺脫呢？</p><p>紀念我的第一次等待，或許也是一切不幸的開始。手術室的無影燈下，護士讓我在門口先坐著等候。手術檯上是誰？高臺之上，一個迷茫的影。望不見，只感覺平靜，右手的暗痛，倉促奔走多時後的終點。手術室。幾分鐘前在門外稱重，一小時前乘汽車到來。回憶與夢夾雜。什麼時候開始？你從一數到一百吧。那護士肯定覺得我不會，竟然用這種無聊的方式來哄騙我。到底要等多久？年幼的我真的在數數，一二三四五……不知道數了多久，忽然間沒了意識，麻醉。下一個記憶片段便是走出醫院，我或許躺在病床上被推出去，但我只記得醫院的天花板，那玻璃天窗外明媚的陽光。回家的計程車，父親的笑容，遙遠的記憶，毛毯，被石膏束縛的右手，對話，呢喃。我在哪裡？我等待了多久？那年我三歲。</p><p>後來在家旁的公交車站，那個盛夏，上小學之前，我在傍晚等待父母歸來。或許是基因編碼的本性，在黃昏來的，天昏地暗，當暮色蠶食最後一縷殘陽，當夏蟬為墜落的太陽唱起輓歌，當路燈亮起，車燈流動，我也感受到一種從未有過的感受，如同草葉被風拂過，卻難以恢復平靜，露水撒了一地，又如同臥鋪火車在午夜停止，靜悄悄的深夜裡，窗外的暴雨和風吟，下鋪的男人低聲夢語。公交車站旁是公路的起點，站後有一條河，河對岸是一眼望不盡的工廠。不知道多少車駛過，向路的盡頭極目遠眺，外婆的藍布衫在暮靄裡洇開。空氣低沉，凝固，路燈忽明忽暗。我沒有數一二三，我靜靜地聽，靜靜地看。這裡沒有人也沒有聲音，只有蟬還在一遍一遍重複著那陳年老歌，每年不變的曲目。還有風吹過暗處的森林。</p><p>後來過去多少年，還有多少年，一直等待，那種感覺，或許被稱為不安，被我帶走了，從時間的起點帶走了。為什麼空間的障礙已經被科學打破，時間的鄉愁永遠難以撫慰？那麼誰來拯救我迷失在多年之前的靈魂？誰來尋回我年幼無知，落在公交車站旁的安心？</p><p>夢遊水鄉，我在橋邊等待一個人。是誰呢？來了才知道。槳聲像細雨，低聲講述江南的故事。多少年運河，多少年前煙波畫舫，文人墨客，一壺濁酒慰平生。多少年前傳來了多少年後還會傳唱的船歌。多少年前的多少年後在傳承多少年後的多少年前的回憶。時間本無經緯，記憶自繡羅衣。那麼等待也是。今天的等待，明天的等待。今天等待明天，那明天會不會等待今天？</p><p>你要等誰？水鄉夢斷，油紙傘下，蒼老的容顏，道不盡平生的悲歡，古今都作漁樵閒話，盡付笑談中。老者喟然長嘆，似要給你講述一生走南闖北的艱辛，那也是生活。你覺得你準備就緒了，你覺得你等待多年終於等到了人生的頓悟的時刻，那老者，只求你一壺酒一文錢，便把整個下午整個人生的經驗都告訴你了。轉頭一看，卻只聽得風聲雨聲，和思緒如同奔流著的不息江河，在低聲呢喃。</p><p>你還會等待，這卷青詞從千年前汴河燈影裡便開始書寫，在一千年後也不會完結。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 散文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>記夢（DeepSeek 輔助創作）</title>
      <link href="/2025/03/13/dreams/"/>
      <url>/2025/03/13/dreams/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>憶起一場夢 太累了 寫得很爛 使用 DeepSeek 處理文章中的一些重複的段落</p><p>青石階蜿蜒向上，盡頭處懸著座褪色的廟宇。香火薰染的簷角垂著銅鈴，風起時聲響像隔世的嘆息。你隨人潮挪動腳步，鞋底碾碎階縫裡冒出的野蕨，一千零一個背影在你前方搖晃，恍若黃泉路上執傘的魂靈。</p><p>排隊的過程中，有人給你講起民間神話地方傳說，談天說地。從子夜飲沆瀣，至天明，山霧濡溼睫毛，長庚星與殘月相望，你忽然記不起為何在此。你好像失去了感知。你不關心周圍發生什麼。你只是等待。你不知道你在等待什麼，但是既然有等待的意義，那或許是有益的吧，這你倒是相信，你在等待什麼？你不知道？你還真不知道。那你為什麼要等？別問。你幻想到達之後的場景，腦海中醞釀一切計劃，那跨過褪色門檻的剎那，即將到來的意義。老僧傳授給你畢生的幸福，你參透人生之後一定要跨過遠方的山，回到家鄉，或者去旅行，或者去修行，或者？你首先要等待。</p><p>你等待。等待一千天，一萬年，等到你白髮蒼蒼。你立在廟門口。一座平常的寺廟，什麼也沒有。</p><p>推開褪色的木門，供桌上只有半截蠟燭。蒲團裂了口，露出裡面的草絮。你是不是白等了？</p><p>但你還是不能走進寺廟。守門的老僧面色凝重，好像幾百年前就站在這裡，不允許來訪者進入，而是設定層層關卡。老僧活像一尊石獅。你於是發問：</p><p>我什麼時候能進去？</p><p>先數到一百。</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百。</p><p>不夠虔誠 再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百</p><p>數錯了 再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百</p><p>還是錯了 再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百</p><p>依然錯了 再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百</p><p>數錯的太多了 再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百</p><p>再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百</p><p>再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百</p><p>不行。再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百</p><p>還是不行。再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十。三十一。三十二。三十三。三十四。三十五。三十六。三十七。三十八。三十九。四十四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九一百</p><p>……</p><p>你數了千遍萬遍，又是多少個日日夜夜，直到你用盡全部氣力，奄奄一息。</p><p>我什麼時候能進去？</p><p>現在還不行。繼續數。</p><p>你為什麼要進去為什麼難道說裡面真的有你想要的嗎你為什麼在這裡為什麼要等待為什麼要數數為什麼數錯為什麼不離開為什麼不放棄為什麼石階吃掉了你的童年卻吐出露水為什麼苔蘚在靜脈裡修建廟宇為什麼數到七十九時心臟會長出年輪為什麼烏鴉總在第九十九聲啼哭裡分娩銅鈴為什麼指甲縫滲出的血珠會自己滾成佛珠為什麼山霧把肋骨醃製成經幡為什麼白髮垂落時聽見蝴蝶振翅為什麼掌紋裂開的溝壑裡遊著初生的你為什麼不離開因為腳踝已生出根鬚為什麼不放棄因為每次呼吸都在石階刻下新的等高線為什麼野蕨從眼眶鑽出時帶著乳香為什麼銅鏽味的月光正在翻譯你腐爛的夢為什麼山鬼的傳說卡在喉骨為什麼等待本身成了你唯一會誦的經文為什麼廟門推開時湧出的是你三歲時的哭聲為什麼所有答案都在脊椎骨裡結冰為什麼你還在問為什麼心跳總在測量與虛妄的距離為什麼黎明前的黑暗有鐵鏽味為什麼記憶的根系總在腐爛處萌發新芽為什麼疼痛在骨縫裡豢養螢火為什麼沉默的舌苔上結滿未爆的驚雷為什麼時間的褶皺裡藏著所有未被選擇的自己為什麼候鳥的歸途比遺言更執著為什麼傷口癒合時會聽見星體坍縮的私語為什麼孤獨有海潮的鹹澀為什麼自由的邊界生長著荊棘的經緯線為什麼呼吸成為最昂貴的抵押物為什麼月光把往事醃製成琥珀為什麼希望是永不結痂的潰瘍為什麼死亡練習曲總在早餐時播放為什麼活著需要不斷吞嚥自己碎掉的倒影為什麼答案永遠比疑問早衰為什麼我們仍在所有破碎的映象裡打撈完整的指紋為什麼宇宙的胎動與子宮的回聲共振為什麼墓碑是站立的河床為什麼末班車總在淚腺決堤時到站為什麼鐘擺切割的光陰都帶著血絲為什麼最後的救贖藏在第一個傷口結出的珍珠裡為什麼墜落的花瓣在胃裡修建天文館為什麼遷徙的候鳥總在掌紋迷路時投下陰影為什麼結痂的傷口自動生成星圖密碼為什麼潰散的晨霧要偷走瞳孔最後的焦距為什麼發芽的骨縫裡傳出潮汐的舊唱片為什麼褪色的誓言在血管豢養髮光水母為什麼腐爛的果核仍在拓印子宮胎動為什麼凍結的時針以融水形態滲入骨髓為什麼爆裂的沉默把聲帶鍛造成青銅編鐘為什麼逃亡的月光在脊背鑿刻甲骨文為什麼解體的雲層選擇在舌根重新聚合成讖語為什麼鏽蝕的刀鋒偏要收割自己種下的光芒為什麼塌縮的夢境總在黎明前孵化成帶鱗片的疑問為什麼溺亡的鐘擺仍在切割記憶的臍帶為什麼所有動詞都在抵達終點前蛻變成墓碑的副詞</p><p>為什麼在這裡為什麼要等待為什麼要數數為什麼數錯為什麼不離開為什麼不放棄為什麼……</p><p>你繼續數。三十二遍時指甲掐破了掌心，七十五遍時數混了雨點數，第九十九遍總被烏鴉叫打斷。有天摸到滿頭白髮，才驚覺數數聲已和心跳一樣重。</p><p>再來</p><p>一二三四五六七八九十十一十二十三十四十五十六十七十八十九二十二十一二十二二十三二十四二十五二十六二十七二十八二十九三十三十一三十二三十三三十四三十五三十六三十七三十八三十九四十四十一四十二四十三四十四四十五四十六四十七四十八四十九五十五十一五十二五十三五十四五十五五十六五十七五十八五十九六十六十一六十二六十三六十四六十五六十六六十七六十八六十九七十七十一七十二七十三七十四七十五七十六七十七七十八七十九八十八十一八十二八十三八十四八十五八十六八十七八十八八十九九十九十一九十二九十三九十四九十五九十六九十七九十八九十九。</p><p>這下數對了？</p><p>錯了，更錯了，這一切盡是荒誕。</p><p>但你早已經身處寺廟之內了。你早就知道答案了。你不知道嗎？</p><p>十九是晚自習教室的舊掛鐘，二十八是鑰匙斷在鎖孔的夜晚，三十七是母親喊你吃飯的聲音，五十七是月光在異地旅館的窗簾遊蕩，六十六是第一次失戀那晚的星星。</p><p>但這寺廟裡什麼都沒有啊，為什麼還相信？你到底追求的是什麼？是相信本身還是等待本身，都沒有意義。或者說等待本身就是意義？</p><p>我不懂。你說什麼？</p><p>數數本身就是人生，人生本身就是答案。這數數和等待都不是目的啊。那什麼是目的？沒有目的？還是全是目的？</p><p>四化作你七歲掉落的乳牙卡在門檻，十三變成母親分娩時的汗珠滲進木紋，六十八正以你脊椎鈣化的速率在瓦片上結霜。三十七粒星光在左肺葉發芽，五十九滴雨珠在右腎結晶，而那個永恆缺席的&quot;一百&quot;，原來是你初生時剪斷的臍帶。</p><p>你說什麼？可你為什麼要數數？你為什麼？啊？你喝多了吧。</p><p>當山風突然調轉方向，你發現自己的白髮正逆向生長成青絲。石階上所有碾碎的野蕨突然開始倒放人生，第一千零一個信徒的背影裡，你看見自己正從廟門倒退著走回起點，而數數聲化作一串露珠，叮叮噹噹墜入你三歲時的奶瓶。</p><p>風突然捲走破廟，你站在岔路口。左邊有人繼續爬石階，右邊有人採野花。你踩了踩腳下新冒的蕨菜，轉身朝沒人的山坡走去。</p><p>露水打溼布鞋時，你想起七歲那年追過的紅蜻蜓——它此刻正停在前方某根草葉上，翅膀載著三十年光陰。</p><p>最後，夢破碎了，醒過來。你不需要數了，你來去自由。你去哪裡？</p><p>祝我十八歲生日快樂。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> DeepSeek </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>午夜飛行</title>
      <link href="/2025/02/22/midnight_flight/"/>
      <url>/2025/02/22/midnight_flight/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>你乘火車回到故鄉。</p><p>車廂裡昏暗的燈光，顫抖著拼寫出別離的感傷。窗外是多少山川歲月。傾倒的電線杆，望不到盡頭的平原，水壩，大江東去，沿著車門一直伸展向世界的盡頭。你所知道的只有這窗外的世界。多少片雪花落下，你不知道。你只知道故鄉只存在於記憶深處，只在夢中重現。你只知道夢中有村莊，有微笑，有炊煙冉冉升起。都消散在風雨之中。</p><p>他在多媒體螢幕上點開下一部電影。數十小時的睏倦從指尖生長到全身上下的每一根神經。惶恐在太平洋上空盤旋。為什麼不承認錯誤？為什麼匆匆下結論？什麼也不懂。他想起午夜登山，山間的雲氣，霧裡望月，日出，寒冷潮溼。手腳麻木，如浸溼在風雨裡。他還是害怕。雲間的那束暗紅色的光，在飛機窗外跳躍閃爍，令人膽寒。</p><p>你在終點站前的車站下車。小販兜售童年，你不記得是2011或是2013，火車上販賣的廉價塑膠拼圖或是動車模型。世界新生伊始，江山如畫，在那時畫卷還未展開。你以為世界燦爛光明，你相信任何人，你充滿了美好的夢想。動車還未修建，公路還未開始規劃。盤山公路，數小時的行程，炸土豆，停頓歇息，繼續上路。</p><p>他回憶為什麼要遠行。制服書寫正義，正義竟然也讓勝利者來定義，一切都由他們來定義。起初，他不相信。他在懸崖峭壁上如履平地，他不相信那些噩夢和神話。他甘願相信那些美夢和空頭支票，他默默承受，他學著眾人的模樣，在淺灘上奔跑。但他不知道生活是為了什麼，他沒有印象，只是希望向前奔跑。他認為自己有無限廣闊的天地。</p><p>你追隨祖先走向大海。那艘鉅艦未能帶走你那遠代的先輩，信仰竟成為自己的棺木。路的盡頭是一棵大樹，你不知道為何總是對之生出莫名的敬畏。你其實從未到過這裡，你從未和大山有過關聯。這大山不屬於你，你這外來者。但這是你的先祖曾紮根，曾生長的地方，曾經結束自己的一生，又曾堅守，曾被背叛。你沒有記憶，歷史的意義就是選擇遺忘，或者，被迫忘記。</p><p>他不禁戰慄，但機艙裡並不寒冷。細想從來，他什麼也沒做錯，卻要受懲罰。他不知道這正義是否是正義，他只相信自己的權利，他只相信那與生俱來的權利。無理的規則多著呢，他不理解，也沒有人解釋。或許從來都不會有人質疑。但他嚇都嚇死了。刪除一切記錄，過去，好像從未發生。他什麼都沒做錯啊。他不相信，他不理解，但很多事情都無法理解。是誰錯了？他什麼都沒做錯啊。</p><p>你說你如履薄冰，總是小心謹慎。你總是罵他不小心，但他確實沒有犯錯誤。但你也開始恍惚，你不知道現在是什麼年代。揹負著五千年重擔，只能忍痛前行，捍衛長城，或者固步自封，自鳴得意，或者這二者是在說同一件事情。你不繼續說下去，讓聽者意會，你選擇沉默。</p><p>他希望變成飛鳥，不受束縛，繞過太陽，飛向太空。他希望變成大海，衝破殘陽，回到淺灘。他不懂什麼叫愛情，他沒有經驗，他只能靠幻想。愛情比太陽更高尚，因為真實，因為自由。他回到水鄉，在烏篷船裡做那些好夢。船隨著江濤規律搖晃，或許正好押韻於江南的詩行。但多少韻律都說不出他的悵然若失，他把一切夢幻寄託於那好夢，最終都成泡影。今宵酒醒何處，楊柳岸，曉風殘月。他不懂，他對月抒懷，他抒不了懷。</p><p>你永遠都回不到過去。過去的決定就是既成的事實，你只能接受，但你有時接受不了。接受不了也只能接受，有的是方法讓你接受，溫水煮青蛙，直到你低下頭，教會你跪下來說話。你不信邪，你非要挑戰，你非要試著唱反調。你自認為高貴，自認為獨立於世間。你會發現你錯了，你會發現你窒息在空氣中。</p><p>天明前啟程，城外多少朝代。他很崇拜那位詩人，像那位哲人一樣，簡直就是聖人。但他不相信權威，不相信個人的能力能夠絕對凌駕於科學之上。一代一代的積壓，民族的形狀定型。他不敢相信，他不甘心，他非要試試。他太天真。在午夜，他還是會回想起那天，他已經下定決心。</p><p>你回不去了，你只能逆風向前。你被欺騙，你自我欺騙，也被別人欺騙。你好像在精神上被強姦了，被迫做自己不願意相信的事情，但你不得不做，你不得不背上沉重的行囊，隨著眾人一起朝一個方向行走。你只能接受。他什麼都沒做錯啊。</p><p>你發現他是貪生怕死之輩，只願意維持現狀。現狀是一潭死水，他竟然只想苟且偷生，完全聽憑別人擺佈。你呼喚他前行，午夜飛行，你不知道飛向哪裡。他什麼都沒做錯啊。你只能追隨祖先，祖先為你留下直覺和歷史，你只能選擇追隨感覺。</p><p>他在午夜渡過這條河流，彼岸是什麼，他不知道。冰冷的河水如藤蔓纏住他的小腿，刺痛他的神經，讓他不敢再往前。他必須渡河，而不是停下來。他沒有回頭路，他不願意再接受。他想起天明時看過的日出，驕陽似火，真理和真理之間只能有一個真理。真的是這樣嗎？或許不用毀滅，或許有更好的辦法。金閣寺不用毀滅。他是對的嗎？</p><p>你不再做夢，夢中只有惶恐。你放棄了信仰，你不再相信，你不再接受，你站起來，除去身上的灰塵。你要去哪裡啊？你還相信嗎？</p><p>你吶喊。你做了一個夢，夢裡你吶喊。你找不到家了，你好像沒有家。你在沙漠公路上獨自前行，這條路沒有盡頭。總算沒有人追趕你了，但你要去哪裡呢？你往前走和往後走似乎是同一個方向。你要去哪裡呢？</p><p>下了一夜的雪。他看不到故鄉，也看不到目的地。午夜飛行，他還未落地。下了一夜的雪嗎？</p><p>淺灘上，一輪明月，美好得讓人願意獻出生命。但這些都不值得拯救，地面上的人不值得拯救。他放棄了使命，不空談夢想，他先拯救自己。人生如夢。他第一次承認自己畏懼死亡。</p><p>你不相信夢想，你不相信陳見，你不相信權力和暴力，你不相信太陽，你不相信神話，你不相信別人，你不相信規則，你不相信故鄉，你不相信過去，你不相信飛行，你不相信雲，你不相信歷史，你不相信直覺你不相信冰塊你不相信大海你不相信微塵你不相信革命你不相信政治你不相信謊言你不相信幻覺不相信收音機不相信信標不相信城牆不相信詩人不相信江山不相信愛情不相信生活不相信文化不相信天氣。你什麼都不相信。你還相信什麼？你還相信相信嗎？</p><p>他沒必要相信什麼。他也不相信你，你只是午夜飛行的幻覺，只存在於過去，只屬於天空。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 散文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>橋樑</title>
      <link href="/2025/01/07/bridge/"/>
      <url>/2025/01/07/bridge/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>紀念一段往事</p></blockquote><h1 id="橋樑-小滿-202421-於北京"><a class="markdownIt-Anchor" href="#橋樑-小滿-202421-於北京"></a> 橋樑 / 小滿 2024.2.1 於北京</h1><p>白塔之上<br />寒鴉拼湊夜空<br />首都地鐵四號線<br />匆匆駛向終點<br />是否通往明天的美夢</p><p>橋樑之下<br />雪與風相伴行走<br />惶恐化身暮靄<br />使落木飄零，放逐<br />來自幻想的春天</p><p>冰和天空銜接<br />聯結了曉風殘月與<br />昨夜的決絕<br />深秋的紅葉終究飄向<br />冬天<br />記憶氾濫，凝固<br />月光沒能到達目的地<br />而是灼燒<br />盈虧之間的傷痕</p><p>橋樑糾結，坍塌<br />海風將它托起<br />帶回撿拾泡沫的沙灘<br />那日<br />踟躕的光線<br />把夕陽和頭髮<br />攪成了一團</p><p>我總企盼有人重建橋樑</p><hr /><p>寫給恍惚中度過的寒冷的秋冬</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 詩歌 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>黎明 或 2012</title>
      <link href="/2025/01/07/2012-twilight/"/>
      <url>/2025/01/07/2012-twilight/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>舊詩一首</p></blockquote><p>淺灘上 一群猴子說教<br />太陽未生的角落<br />玻璃杯破碎 火球燃燒<br />門外守著 枯萎的向日葵<br />熟稔的幽谷<br />光在其中窒息</p><p>然後 我嗅到了炊煙<br />黎明未造訪的人間<br />雞鳴、柴香中的生活<br />人在其中重生<br />停電的山村迴歸原始<br />黑夜吞噬<br />一盆熱汽和滾燙的水<br />卻是思鄉的罪因</p><p>你說：一切往事都在夢中<br />幻影中 我聽見——<br />摩托和戒尺<br />喧譁的收音機<br />黎明在流血<br />傷痕滾燙 淌著東方的雲<br />可我卻期待黎明殞命：<br />獻祭給了今天 才有明天</p><p>小滿 2024/1/23 夜</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 詩歌 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RECAP2024: 水檻臥聽雨</title>
      <link href="/2024/12/31/recap2024/"/>
      <url>/2024/12/31/recap2024/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>獻給 2024，和夢中的水鄉。</p></blockquote><p>2024年的盡頭，希望寫下這些文字，腦海中卻是虛空，難以回想起2024年發生的一切。這一年，太多變化，太多茫然，太多草率。選擇總是覺得被動，在一個個被動的選擇中拼湊出的2024。又想起上半年水鄉中做的一場幽夢，階前點滴的細雨，一直飄到2025的黎明。</p><p>那是夢中的水鄉，細雨中，趕向最後一班烏篷。水檻中平臥聽雨，憑欄遠眺千年前流淌而至的京杭運河，卻難以遣心。夢來的太恍惚，恍惚到2024年就如斜陽中彷徨的曲巷，猛然驚醒，才發覺這似夢非夢的都是真實的昨日。</p><p>不願在水鄉的幻想中迷失。一場雨下了三百六十五個日夜。向前，左轉，再左轉，右轉，左轉……小巷石磚，經受過多少年雨水。來不及撐起油紙素傘，也等不得細細品味這水鄉的韻味。夏天的雨退行，行人退行，青瓦退行，三兩枝竹退行。古琴洞簫在沉默中遁形，都市在水鄉迷宮的出口等待。末班車的尾燈在水霧中變得模糊，似一團硃紅的胭脂，從水鄉戲臺潑進城市的生活……</p><h2 id="2012"><a class="markdownIt-Anchor" href="#2012"></a> 2012</h2><p>黎明在流血，傷痕裡淌出東方的雲。玻璃杯破碎，火球滾燙，淺灘上一群猴子無力地說教。這是世界末日前太陽為生的角落。</p><p>為什麼最後的蒙特祖瑪臣服於新西班牙，活人的祭祀仍在持續？為什麼古代文明衰落，瑪雅人的預言流傳至今？黎明殞命，把昨日獻祭，迎接新的光明。或有預感，2012就是2024。舊世界的終結會是新世界的開始。</p><p>太陽已將生命留給2023的白晝。你是將遭審判的囚徒，決絕將赴星月的刑場。2023年底，我化身為星光或者泡沫，去追隨你的腳步。我祈禱直覺帶領我尋覓你、追隨你。</p><p>於是我的生命化為大海，在海風中，來到這2024。</p><h2 id="寒鴉和橋樑"><a class="markdownIt-Anchor" href="#寒鴉和橋樑"></a> 寒鴉和橋樑</h2><p>白塔之上，寒鴉拼湊夜空；首都地鐵四號線，匆匆駛向終點。落葉被放逐歸根。月光沒能到達目的地，而是灼燒，盈虧之間的傷痕。那日，踟躕的光線，把夕陽和頭髮，攪成了一團。</p><p>在北京，我仍然相信2023的直覺。圓明園的湖水凍成晶瑩的鏡面。我曾相信2024年也將如冰面一樣澄澈光潔 我不能懂得十萬里長城的無奈，用不變丈量未來，繪製出新一年的藍圖。終是一汪死水。</p><p>浮沉。北京的寒鴉帶我回到那個冬季，漫步在中關村，在西單，在王府井。我不知道我的生命中是否還有北方，但那個冬天我願意相信未來。</p><p>在天壇，祈年殿，雪花一片一片在天上流浪，飄舞似無所依附。我曾寄希望於雪花，曾認為找尋到了那一片雪花。它曾穿越風雪，休憩在我的窗前。而我曾用雙手輕輕捧起，卻發現雪花溶入了冬天的夢……</p><h2 id="水鄉溫柔"><a class="markdownIt-Anchor" href="#水鄉溫柔"></a> 水鄉溫柔</h2><p>水鄉溫柔，何處是我家？</p><p>在錯覺和現實交織的世界，繁花染遍大地，像一把火燃盡了整個春天。陽光燦爛，水鄉並未給我選擇，而是將我領向一片未知之地。我把這位置視為家，似乎找到了征途的歇腳處，找到了海邊的永不褪去的泡沫。</p><p>在烏鎮，迷失在水鄉迷宮之中；在紹興，凌晨踏上泥濘的山路，目睹黎明的再一次復甦。徹夜未眠。初夏的夜比現實更寒冷，山路崎嶇比生命更曲折。只能徹底脫離對外界的依賴，成為極夜中的微光，引導著自己前行。</p><p>黑暗中舉起手電，盤山公路上高歌。山上其實什麼也沒有啊！而我憑何找到慰藉，憑何找到光明？再次踏上蛻變之路，悟以往之不諫。我錯了。我質疑過存在的存在，懷疑既成事實的真實，並尋求顛覆不存在的鐐銬，走向歧路。</p><p>人生不是刻舟求劍，而且動態的、運動的。向前行，草木欣欣向榮，新的山巔上放聲高歌，成為太陽，照亮長夜。不再相信，卻更加相信。</p><h2 id="午夜飛行"><a class="markdownIt-Anchor" href="#午夜飛行"></a> 午夜飛行</h2><p>《新世界交響曲》慷慨激昂，卻也流露出不穩定。午夜飛行，飛向紐約、亞特蘭大和西雅圖。新大陸從天際線上升起，為何舊大陸便消失得無影無蹤。</p><p>在紐約，時代廣場和布魯克林橋，哥倫比亞大學校門外車水馬龍，90號州際公路上凌晨的寒風與自然的呼吸。浦東機場，離別有了新的形狀。</p><p>鄉愁從此有了新的定義。望向從未登陸的領土，思念從未到過的故鄉。宿命或者偶然，我又將踏上征途。此刻我卻比任何時刻都熱愛自己的土地，炎黃子孫的土地。</p><p>不斷成長，不斷蛻變。在香港漫步，棉絮一樣的霧掩蓋中環的摩天大樓，去遠郊的山上徒步旅行，石澳村的海浪與泡沫點亮盛夏；在澳門，朝陽和金沙呈現同一顏色。上海圖書館，夕陽闖入二樓大廳，講述盛夏的另一個故事——一場大雨。</p><p>晚風和暮雲，午夜飛行。</p><h2 id="後記"><a class="markdownIt-Anchor" href="#後記"></a> 後記</h2><p>末班車怕是趕不上了。2024年的後半年，在矛盾和困惑中度過，卻也大步向前走去。一個決定，一個決定未來10年的方向的決定，一個我未敢做出的決定。帷幕拉開，終究要面對，而所有的延遲都是徒勞。未來走向何處？我不知道，保留了決定的權利，而任自己在磨礪中不斷蛻變。</p><p>2025年，不需要任何人的指引，擺脫真正的束縛，自由生活。不去做那些美夢，放下所有矛盾，一切都隨水鄉的煙雨飄散去了。</p><p>仍然需要幻想，但既已理清了這一些迷霧，也應堅定向前走去。昨天與明天一樣飄渺，倒不如看著腳下的路，這近在眼前的真實。</p><p>不再隨風、隨雨、隨大海，而是跟隨自己，獨立於世間，去追尋，去探索。</p><p>向山行，向山行，翻山越嶺，沒有終點，沒有答案。</p><p>水檻臥聽雨已成為往昔。2025，我將星夜兼程，片刻不息。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 年度回顧 </tag>
            
            <tag> 散文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>太陽、潮落</title>
      <link href="/2023/12/31/sun-tides/"/>
      <url>/2023/12/31/sun-tides/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>太陽<br />請給冬日動人的悲憫<br />你是空有光明的夜燈<br />無力帶給寒天一絲暖意</p><p>太陽<br />請把生命留在白晝<br />你是將遭審判的囚徒<br />決絕將赴星月的刑場</p><p>太陽，偉大的事業未竟<br />你曾搏擊北風，怒斥冬的不公<br />你曾笑對雪花妖冶的輕蔑<br />你是荒嶺上的黃花<br />註定你的努力不合時宜</p><p>我在太陽中看見了我的生命<br />吶喊，口旁升騰的霧氣<br />是傳書於你的白鴿<br />聆聽我的呼喚，太陽<br />我心意已決<br />請與我在海邊坐待潮落</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 詩歌 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RECAP2023: 泡沫</title>
      <link href="/2023/12/28/foams-the-year/"/>
      <url>/2023/12/28/foams-the-year/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>浪宣告朗，日光下，<br />我試著抓住大海 —— 它<br />卻後退，化身成點點泡沫。<br />2023.8.10 《泡沫》</p></blockquote><p>從夜夢中驚醒，已是黃昏。昨夜暖風似酒，酒醒時暮靄酡紅。踏上駛向未知的火車，身後，殘陽血濺寒天。瞭望窗外，時間向後劃去似溢彩流光，在這光影之中，我看見了我的即將湮滅在過往的深夜裡的2023。</p><p>2023，用一整年時間，獨立海邊，用一顆石子擊打浪花，用一雙手企圖留住海潮。海風是一位吟遊詩人，奔走四方，帶來大海另一邊的不同時空的故事——時空錯亂，吟唱中我心漸靜，雙手空空。竭盡全力，撲向大海，攥住浪花——斜陽下，徒然攥住一手細沙，日光卻告訴我這是黃金。海波泛起銀光，似星海盪漾、轉動，卻從不能裝進口袋，帶進我的生活。</p><p>可是我仍矢志不渝，在海邊，十二個月，追隨海潮啊。</p><p>盛夏在青島的碧海青天下留下自己的足跡，我的一年便停留在了那個下午的細雨之中。青島車站，至今仍然保留著殖民地時期的風貌。磚紅色的屋頂，靜立在月色海風中，沉醉在浪濤的朦朧樂聲中——那是不遠處棧橋邊的大海。意猶未盡，在清晨的細雨空濛中，嗅著雨水中海草的腥味，那時陷入囹圄。舊的秩序已然崩塌。不願面對的人群，永遠說不出的心中的話語堆積，內心深處精神的孤獨、缺氧，漸漸迷失在這片人生森林的迷霧中。</p><p>海風已熟習我一年來的故事，時間線錯亂的故事經她們之口平靜訴說。</p><p>在朝陽升起的地方，睜開雙眼，柔焦，模糊的光影。我不再遺憾去年的流星雨，在新的一年開始的時候，一頭撞向束縛我的桎梏——內心的無形的冰塊。解凍，冰流潺湲。用身體中從夜中吸收的力量，向外邁步。</p><p>高樓之上，我受盡了曾以為伴的虛偽的恆星的炙烤。我手握劍柄，斬下那帷幕，所謂的光和熱不再為我所聞。我囿於此，引來他的夥伴，試圖滲透進我的身體，闖入我的陋舍——那閃爍的光。我曾以為那是我向往的泡沫的光影。</p><p>借五月假期之餘，我回到楊浦，再會舊友。還望來時的路，始終留戀，四平路黃昏時的街燈，可是我不能再走在那路上了，可是我不能再去同濟書店，看由粉轉紫的彩霞，幻想地鐵站中的驚喜奇遇。我看真切了，似夢似幻的過往，亦似往日居家的日子裡從飄渺中飛來的隱約笛聲。</p><p>在初秋，分道揚鑣，而我也將走在我的道路上。分別的必然中，我回憶起相遇的偶然。去年在秋季的機房中相遇，如今聽見那時的耳機裡今日還在流淌的歌聲，仍不時憶起你。想起春日裡徘徊在機械零件中，春寒料峭，在車間中工作到深夜的日子。最終踟躕於做出那個出國參賽的選擇。逃過的數節課，工地辦公室裡的外賣，朝夕相處的日子。團委活動室棋盤上的故事，被偷走的象棋，“黑貓、白貓”的秘密。以至於後面的一個月，以及後面的半年，迷茫和野蠻生長。複雜的外面的世界，我不會忘記過往的緊鎖心扉。我必須選擇，於豔陽墜入大海之時，躍入海水之中。我的氣息化成海風，我把生命獻祭給大海，我的生命是大海，我得到了重生。</p><p>在天津，在北方，夕陽破碎，灑在林間枯枝之上，我第一次享受到恆星衰亡後的溫熱。這溫暖由我自己創造。我成了我自己的太陽，這功勞也不在別人。答辯之時，找回一年前許下的從容。我將消滅一切阻礙前行的聲音，我將消失在煙雨中，成為雲海中的霧氣，飄忽不定。北方沒有煙雨，只有枯枝、敗葉、寒風。</p><p>我用時間尋找鬆弛。有幸在滿隴桂雨之中遇見了別樣的杭州，在蘇州品那一碗熱霧騰騰湯麵，在前灘偶遇晚霞的裂紋。蘇子愀然對月，卻在惠州再會了蘇堤——玩月，豐、平二湖。春曉，此心安處是吾鄉？自我在四方遊歷中重新獲得定義。</p><p>那些有規律的自然的律動，是海潮給我的諄諄教誨。海潮漲落，我的心趨於平靜。靜謐的清晨，眺望大海及遠方。海是印象派的交響樂，海是詩人未寫完的詩行……細雨初歇。在中山路遇見一個少女，淺黃色漁夫帽下輕煙蔽月般看不真切的面容，緩步邁向咖啡店。她停下，把手機架在對面的牆上，小步跑向店門，在咖啡店門口的小桌上坐下，捧上一束花，調整儀態，微微一笑。她是在給自己拍照。一個人的旅行。雨後的陽光灑在咖啡館的正門邊，女孩剛才拍照的位置，玻璃檯面反射出久違的光。而人生會是一場漫長的旅行……</p><p>在四月的隔離教室中，追隨光的腳步，唱起四月的歌聲。正午的陽光，擾亂我的思緒。驚異於一年來學業長進，這卻不是我出發時尋求的海浪。南京的長江邊，朝陽下水鳥驚飛，淺紫色天空下的中山碼頭，我們一行人在江邊打水漂。在夫子廟嘗過一鍋熱氣騰騰的粉絲，回憶中我再次來到那些重新認識自己的日子。江州的另一畔，巨輪駛來——仍遺憾從未到訪過長江大橋和橋上攜帶夏天的火車……返校之後，走廊中的光影，我恍然得知慘痛的事實。</p><p>12月的上海，遊園會上的重逢和小攤上操勞的資訊組同學。一年前的相遇，如今我也成為“學長”，卻仍然是第一次嘗試。前路漫漫，缺乏經驗指路。忘不了遊園會的人群中，科目三的表演。鍋裡的熱氣騰騰不能打動固執的土豆，在必然的失敗中，我們獲得了部分勝利。文藝匯演，接二連三的彩排，嘗試找到一個平衡點，度過漸漸熟悉的生活。舞臺聚光燈下，演出圓滿，觀眾席中飛來的熒光棒砸向謝幕演出的我們，不再寒冷。</p><p>​學農和自己製作的魚米飯、夜晚宿舍中的休整和抽象、與技術老師閒談中結束的文藝匯演…離隊時的稻田，一隊人手持甘蔗，結隊行阡陌，夕陽無限。寒空下地平線被點亮。暮色中，農戶的秸稈燃燒，輕煙冉冉升起。黃昏已至，我是否應該回到家鄉的土屋，享受那真切屬於我的炊煙？半透明的殘陽被煙遮蔽，彷徨，自由。</p><p>海風在呢喃。請告訴我2023的答案。一事無成？一路意外收穫。</p><p>那我用何指引我的生活？前路比過往悠長，面向即將拉開的人生帷幕，缺乏力量和勇氣。</p><p>2023將盡，海風仍不時撫過我的面頰，眼瞼微潤。海潮依舊漲落。下海，最後一次試圖追上浪潮，試圖一把抓起她，質問她，請教她。海潮拒絕我天真的問詢，拒絕給予任何指引。我乞求的答案竟是泡沫。</p><p>泡沫，泡沫，2024請離開海岸，縱身跳入大海，化身大海，大海是答案，我的生命將是大海。</p><p>泡沫的銀光中，悵然若失的一年溜走了。</p><p>我卻會把泡沫視為2023最好的饋贈。</p><p>2024，相信直覺，相信自己。</p><p>Power Up.</p><p>還會繼續憶起2023年海風的無形教誨</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 年度回顧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>題解 P1622 釋放囚犯</title>
      <link href="/2023/10/18/Luogu-P1622/"/>
      <url>/2023/10/18/Luogu-P1622/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p><a href="https://www.luogu.com.cn/problem/P1622">題目連結</a></p><h2 id="題面"><a class="markdownIt-Anchor" href="#題面"></a> 題面</h2><h3 id="題目描述"><a class="markdownIt-Anchor" href="#題目描述"></a> 題目描述</h3><p>Caima 王國中有一個奇怪的監獄，這個監獄一共有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> 個牢房，這些牢房一字排開，第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> 個緊挨著第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 個（最後一個除外）。現在正好牢房是滿的。</p><p>上級下發了一個釋放名單，要求每天釋放名單上的一個人。這可把看守們嚇得不輕，因為看守們知道，現在牢房中的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> 個人，可以相互之間傳話。如果某個人離開了，那麼原來和這個人能說上話的人，都會很氣憤，導致他們那天會一直大吼大叫，搞得看守很頭疼。如果給這些要發火的人吃上肉，他們就會安靜點。</p><h3 id="輸入格式"><a class="markdownIt-Anchor" href="#輸入格式"></a> 輸入格式</h3><p>第一行兩個整數 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span></span></span></span> 表示釋放名單上的人數；</p><p>第二行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span></span></span></span> 個整數，表示要釋放哪些人，保證按遞增的順序給出。</p><h3 id="輸出格式"><a class="markdownIt-Anchor" href="#輸出格式"></a> 輸出格式</h3><p>僅一行，表示最少要給多少人次送肉吃。</p><h3 id="樣例-1"><a class="markdownIt-Anchor" href="#樣例-1"></a> 樣例 #1</h3><h4 id="樣例輸入-1"><a class="markdownIt-Anchor" href="#樣例輸入-1"></a> 樣例輸入 #1</h4><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">20 </span><span class="number">3</span></span><br><span class="line"><span class="symbol">3 </span><span class="number">6</span> <span class="number">14</span></span><br></pre></td></tr></table></figure><h4 id="樣例輸出-1"><a class="markdownIt-Anchor" href="#樣例輸出-1"></a> 樣例輸出 #1</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">35</span><br></pre></td></tr></table></figure><h3 id="提示"><a class="markdownIt-Anchor" href="#提示"></a> 提示</h3><h4 id="樣例說明-1"><a class="markdownIt-Anchor" href="#樣例說明-1"></a> 樣例說明 #1</h4><p>先釋放 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>14</mn></mrow><annotation encoding="application/x-tex">14</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">4</span></span></span></span> 號監獄中的罪犯，要給 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>13</mn></mrow><annotation encoding="application/x-tex">13</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span></span></span></span> 號監獄和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>15</mn></mrow><annotation encoding="application/x-tex">15</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">5</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn></mrow><annotation encoding="application/x-tex">20</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span></span></span></span> 號監獄中的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>19</mn></mrow><annotation encoding="application/x-tex">19</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">9</span></span></span></span> 人送肉吃；再釋放 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span></span></span></span> 號監獄中的罪犯，要給 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span> 號監獄和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>13</mn></mrow><annotation encoding="application/x-tex">13</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span></span></span></span> 號監獄中的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>12</mn></mrow><annotation encoding="application/x-tex">12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span></span></span></span> 人送肉吃；最後釋放 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> 號監獄中的罪犯，要給 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> 號監獄和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span> 號監獄中的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span> 人送肉吃。</p><h4 id="資料規模與約定"><a class="markdownIt-Anchor" href="#資料規模與約定"></a> 資料規模與約定</h4><ul><li>對於 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">50\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mord">%</span></span></span></span> 的資料，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>P</mi><mo>≤</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">1 \le P \le 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>Q</mi><mo>≤</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">1 \le Q \le 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span>；</li><li>對於 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">%</span></span></span></span> 的資料，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>P</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">1 \le P \le 10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>Q</mi><mo>≤</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">1 \le Q \le 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo>≤</mo><mi>P</mi></mrow><annotation encoding="application/x-tex">Q \le P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>，保證釋放的人所在的牢房編號按遞增的順序給出。</li></ul><h2 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h2><p>題意即求釋放列表中所有罪犯的費用之和最小，每次釋放，罪犯<code>i</code>到他兩邊<strong>空牢房</strong>之間的所有人，都需要消耗一塊肉。每次釋放一個罪犯，可以想到區間 DP，狀態 <code>f[l][r]</code> 表示從<code>l</code>到<code>r</code>號罪犯全部釋放所需要消耗的肉塊總數。</p><p>之後思考狀態轉移方程。要求最小值，<code>f[l][r]</code> 初始值 <code>INT_MAX</code>。<code>f[l][r] = min of f[l][m-1] + f[m+1][r] + Pos[r+1] - Pos[l-1] -2</code> ，其中 m 屬於區間 <code>[l,r]</code>，列舉合併點，即此次釋放的罪犯，罪犯兩側到<code>l</code>和<code>r</code>號罪犯的消耗<code>f[l][m-1]</code>和<code>f[m+1][r]</code>。<code>Pos[i]</code>定義<code>i</code>號罪犯的編號。這裡其實是一種反向的思路，m點應該是最先釋放的（？<code>Pos[r+1] - Pos[l-1] -2</code>即此區間兩側最近的罪犯之間的人數，減去區間兩端。即區間合併的額外費用。<strong>注意</strong>要在<code>Pos</code>陣列中定義<code>Pos[Q+1]=N+1</code>。</p><h2 id="程式碼"><a class="markdownIt-Anchor" href="#程式碼"></a> 程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;climits&gt;</span> <span class="comment">// For INT_MAX</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Pos[<span class="number">110</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">110</span>][<span class="number">110</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> P, Q;</span><br><span class="line">    cin &gt;&gt; P &gt;&gt; Q;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i&lt;=Q; i++)&#123;</span><br><span class="line">        cin &gt;&gt; Pos[i];</span><br><span class="line">    &#125;</span><br><span class="line">    Pos[Q<span class="number">+1</span>] = P<span class="number">+1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k&lt;=Q; k++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i+k<span class="number">-1</span>&lt;=Q; i++)&#123;</span><br><span class="line">            <span class="type">int</span> y = i+k<span class="number">-1</span>;</span><br><span class="line">            f[i][y]=INT_MAX; <span class="comment">// 初始值</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> m = i; m&lt;=y; m++)&#123;</span><br><span class="line">                f[i][y] = <span class="built_in">min</span>(f[i][m<span class="number">-1</span>] + f[m<span class="number">+1</span>][y], f[i][y]); </span><br><span class="line">            &#125;</span><br><span class="line">            f[i][y] +=  Pos[y<span class="number">+1</span>] - Pos[i<span class="number">-1</span>] <span class="number">-2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; f[<span class="number">1</span>][Q] &lt;&lt; endl; <span class="comment">// 答案即把 1...Q 所有的罪犯全部釋放（合併）</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="小結"><a class="markdownIt-Anchor" href="#小結"></a> 小結</h2><p>本題難點在於建模，區間DP部分比較典型。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>題解 P5888 傳球遊戲</title>
      <link href="/2023/10/16/Luogu-P5888/"/>
      <url>/2023/10/16/Luogu-P5888/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>題目連結：<a href="https://www.luogu.com.cn/problem/P5888">P5888</a></p><h2 id="題面"><a class="markdownIt-Anchor" href="#題面"></a> 題面</h2><h3 id="題目背景"><a class="markdownIt-Anchor" href="#題目背景"></a> 題目背景</h3><p>羊城有善蹴鞠者。會足協之杯，於校園之東北角，施兩球場，蹴鞠者站球場中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 人，一球，二門，三裁判而已。觀眾團坐。少傾，但聞球場中哨聲一響，滿坐寂然，無敢譁者。</p><p>當是時，傳球聲，微微風聲，隊員疾跑聲，教練呼喊聲，拉拉隊助威聲，一時齊發，眾妙畢備。滿場觀眾無不伸頸，側目，微笑，默嘆，以為妙絕。</p><p>未幾，我球員施一長傳，彼球員截之，望我龍門衝來。</p><p>但見守門員 oql 立於門，若有所思——</p><h3 id="題目描述"><a class="markdownIt-Anchor" href="#題目描述"></a> 題目描述</h3><p><strong>原來他在想這麼一個問題：</strong></p><p>場上的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 個球員圍成一圈，編號從 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ，剛開始球在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 號球員手中。一共 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 次傳球，每次傳球必須傳給一個人，但不能傳到自己手中。求第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 次傳球以後傳回 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 號球員的方案數。</p><p>但他覺得這個問題太簡單了，於是加了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 條限制，每條限制形如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a,b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span></span></span></span>，表示 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> 號球員不能將球傳給 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span> 號球員。</p><p>為了使得 oql 的注意力轉移回球場上，你需要在最短的時間內告訴他這個方案數是多少。</p><p>你只需要告訴他答案對 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>998244353</mn></mrow><annotation encoding="application/x-tex">998244353</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord">9</span><span class="mord">8</span><span class="mord">2</span><span class="mord">4</span><span class="mord">4</span><span class="mord">3</span><span class="mord">5</span><span class="mord">3</span></span></span></span> 取模後的結果。</p><h3 id="輸入格式"><a class="markdownIt-Anchor" href="#輸入格式"></a> 輸入格式</h3><p>輸入資料包括 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 行：</p><p>第一行三個整數 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo separator="true">,</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">n,m,k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>，分表代表球員數，傳球次數，限制條數。</p><p>接下來 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 行，每行兩個整數 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i,b_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，表示 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 號球員不能將球傳給 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">b_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 號球員。</p><p>資料保證不會出現不同的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i,j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> 使得 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><msub><mi>a</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">a_i=a_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>i</mi></msub><mo>=</mo><msub><mi>b</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">b_i=b_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>。</p><h3 id="輸出格式"><a class="markdownIt-Anchor" href="#輸出格式"></a> 輸出格式</h3><p>輸出一個整數，表示 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 輪後傳回 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 號球員的合法方案數對 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>998244353</mn></mrow><annotation encoding="application/x-tex">998244353</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord">9</span><span class="mord">8</span><span class="mord">2</span><span class="mord">4</span><span class="mord">4</span><span class="mord">3</span><span class="mord">5</span><span class="mord">3</span></span></span></span> 取模後的結果。</p><h3 id="樣例-1"><a class="markdownIt-Anchor" href="#樣例-1"></a> 樣例 #1</h3><h4 id="樣例輸入-1"><a class="markdownIt-Anchor" href="#樣例輸入-1"></a> 樣例輸入 #1</h4><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">2 </span><span class="number">1</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="樣例輸出-1"><a class="markdownIt-Anchor" href="#樣例輸出-1"></a> 樣例輸出 #1</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0</span><br></pre></td></tr></table></figure><h3 id="樣例-2"><a class="markdownIt-Anchor" href="#樣例-2"></a> 樣例 #2</h3><h4 id="樣例輸入-2"><a class="markdownIt-Anchor" href="#樣例輸入-2"></a> 樣例輸入 #2</h4><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">3 </span><span class="number">3</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="樣例輸出-2"><a class="markdownIt-Anchor" href="#樣例輸出-2"></a> 樣例輸出 #2</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="樣例-3"><a class="markdownIt-Anchor" href="#樣例-3"></a> 樣例 #3</h3><h4 id="樣例輸入-3"><a class="markdownIt-Anchor" href="#樣例輸入-3"></a> 樣例輸入 #3</h4><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">7 </span><span class="number">13</span> <span class="number">5</span></span><br><span class="line"><span class="symbol">1 </span><span class="number">3</span></span><br><span class="line"><span class="symbol">4 </span><span class="number">5</span></span><br><span class="line"><span class="symbol">5 </span><span class="number">4</span></span><br><span class="line"><span class="symbol">6 </span><span class="number">1</span></span><br><span class="line"><span class="symbol">2 </span><span class="number">2</span></span><br></pre></td></tr></table></figure><h4 id="樣例輸出-3"><a class="markdownIt-Anchor" href="#樣例輸出-3"></a> 樣例輸出 #3</h4><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">443723615</span></span><br></pre></td></tr></table></figure><h3 id="提示"><a class="markdownIt-Anchor" href="#提示"></a> 提示</h3><p>對於 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">10\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">%</span></span></span></span> 的資料，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">k=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>。</p><p>對於另外 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>15</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">15\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">5</span><span class="mord">%</span></span></span></span> 的資料，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mn>500</mn></mrow><annotation encoding="application/x-tex">n\leq 500</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mord">0</span></span></span></span>。</p><p>對於另外 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">20\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">%</span></span></span></span> 的資料，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mn>5</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">n\leq 5\times 10^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span>。</p><p>對於另外 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">20\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">%</span></span></span></span> 的資料，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>≤</mo><mn>300</mn></mrow><annotation encoding="application/x-tex">k\leq 300</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mord">0</span></span></span></span>。</p><p>對於 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">%</span></span></span></span> 的資料，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">1\leq n\leq 10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>m</mi><mo>≤</mo><mn>200</mn></mrow><annotation encoding="application/x-tex">0\leq m\leq 200</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo>×</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mn>5</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">0\leq k \leq \min(n\times(n-1),5\times 10^4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo>≤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1\leq a_i,b_i\leq n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>，<strong>不保證 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i,b_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 不相等</strong>。</p><h2 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h2><p>首先看到題目，如果沒有<code>k</code>限制，顯然是DP。</p><p>設計狀態 <code>f[i][j]</code> 表示第<code>i</code>局遊戲傳到<code>j</code>的方法數，顯然滿足 DP 的要求（無後效性、最優子結構等）。</p><p>得到狀態轉移方程：<code>f[i][j] = sum of f[i-1][k]</code>。其中<code>k</code>表示能夠傳到<code>j</code>的所有人。</p><p>但每次遍歷<code>k</code>還是太麻煩，題目中顯然能夠傳到<code>j</code>的人數大於受限人數。所以我們採用做差的方法，使用<code>f[i][j] = sum of f[i-1][k] - f[i-1][m]</code>，此時<code>k</code>表示所有人，<code>m</code>表示不能傳球的人。所有人的方法數和可以使用一個變數記錄。</p><p>但是我們發現，題目中<code>n</code>的範圍到<code>1e9</code>，顯然無法開這麼大的陣列去算。</p><p>思考發現，題中限制數很少，只有<code>5e4</code>，最壞情況（限制中，<code>a</code>、<code>b</code>均不同），存在約束的人數也只有<code>1e5</code>，剩下的是毫無限制的“自由人”，因此可以簡化問題，成為“自由人”、自己（即1）和“限制人”的傳球遊戲。</p><p>“自由人”可以“自傳球”，需要注意。而且這樣做之後，編號會混亂，我們需要建立一個<code>map</code>重新建立編號。</p><p>還有什麼最佳化方法？</p><p>滾動陣列，可以將<code>f</code>壓縮！</p><h2 id="程式碼實現"><a class="markdownIt-Anchor" href="#程式碼實現"></a> 程式碼實現</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MOD 998244353</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">    <span class="type">int</span> next, to;</span><br><span class="line">&#125;NDS[<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> head[<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>&#123; <span class="comment">// 表示 a 不能收到 b 的球</span></span><br><span class="line">    NDS[cnt].to = b;</span><br><span class="line">    NDS[cnt].next = head[a];</span><br><span class="line">    head[a] = cnt++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; P;</span><br><span class="line"><span class="type">int</span> DP[<span class="number">2</span>][<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; Dict;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="built_in">sizeof</span>(head));</span><br><span class="line">    <span class="type">int</span> n,m,k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i&lt;=k; i++)&#123;</span><br><span class="line">        <span class="type">int</span> a,b;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="comment">// remap</span></span><br><span class="line">        <span class="type">int</span> ida, idb;</span><br><span class="line">        <span class="keyword">if</span>(!(ida = Dict[a])) P.<span class="built_in">push_back</span>(Dict[a] = ida = Dict.<span class="built_in">size</span>());</span><br><span class="line">        <span class="keyword">if</span>(!(idb = Dict[b])) P.<span class="built_in">push_back</span>(Dict[b] = idb = Dict.<span class="built_in">size</span>());</span><br><span class="line">        <span class="keyword">if</span>(ida != idb) <span class="built_in">add</span>(idb,ida);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Sp: 1 -&gt; 可能不是限制人，但是也需要單獨更新狀態！</span></span><br><span class="line">    <span class="keyword">if</span> (!Dict[<span class="number">1</span>]) P.<span class="built_in">push_back</span>(Dict[<span class="number">1</span>] = Dict.<span class="built_in">size</span>());</span><br><span class="line">    <span class="type">int</span> Nc = Dict.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">int</span> Fc = n - Nc, idf = Dict.<span class="built_in">size</span>()<span class="number">+1</span>;</span><br><span class="line">    <span class="comment">// 記錄此次和上一次的 Sum of f</span></span><br><span class="line">    <span class="type">int</span> sum = <span class="number">1</span>, sum2 = <span class="number">0</span>;</span><br><span class="line">    DP[<span class="number">0</span>][Dict[<span class="number">1</span>]] = <span class="number">1</span>; <span class="comment">// 初值 -&gt; 只能從 1 開始傳球</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i&lt;=m; i++)&#123;</span><br><span class="line">        <span class="type">int</span> cur = i&amp;<span class="number">1</span>; <span class="comment">// 滾動陣列</span></span><br><span class="line">        <span class="type">int</span> prev = <span class="number">1</span>-cur;</span><br><span class="line">        sum2 = sum;</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j : P)&#123;</span><br><span class="line">            DP[cur][j] = ((sum2 - DP[prev][j])%MOD + MOD)%MOD;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> x = head[j]; x!=<span class="number">-1</span>; x=NDS[x].next)&#123; <span class="comment">// 排除不能傳球的人</span></span><br><span class="line">                <span class="type">int</span> y = NDS[x].to;</span><br><span class="line">                <span class="keyword">if</span>(y==j) <span class="keyword">continue</span>;</span><br><span class="line">                DP[cur][j] = ((DP[cur][j] - DP[prev][y])%MOD + MOD) % MOD;</span><br><span class="line">            &#125;</span><br><span class="line">            sum += DP[cur][j]; <span class="comment">// 更新 sum</span></span><br><span class="line">            sum %= MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        DP[cur][idf] = (<span class="number">1LL</span> * sum2 * Fc % MOD - <span class="number">1LL</span> * DP[prev][idf] % MOD)%MOD; <span class="comment">// 自傳球</span></span><br><span class="line">        sum = (sum % MOD + DP[cur][idf] % MOD) % MOD;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; DP[m&amp;<span class="number">1</span>][Dict[<span class="number">1</span>]]%MOD &lt;&lt; endl; <span class="comment">// 輸出結果</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="更多注意事項"><a class="markdownIt-Anchor" href="#更多注意事項"></a> 更多注意事項</h2><p>這道題我在取模的時候調了很久 -&gt; “C++負數取模還是負數，應該將其變成正數”</p><h2 id="小結"><a class="markdownIt-Anchor" href="#小結"></a> 小結</h2><p>本題是一個動態規劃問題，難點在於模型的建立。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>殘陽似火</title>
      <link href="/2023/10/12/tsingtao-sunset/"/>
      <url>/2023/10/12/tsingtao-sunset/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>“我的生命將是大海。”</p><hr /><p>青島車站，至今仍然保留著殖民地時期的風貌。磚紅色的屋頂，靜立在月色海風中，沉醉在浪濤的朦朧樂聲中——那是不遠處棧橋邊的大海。候車大廳靜悄悄，耳畔不時傳來廣播的聲響，也似輕煙一般飄渺，混雜著些泡麵佐料的濃香，浮向大廳的遠處。</p><p>這便是作別的日子，而這樣的日子卻總是意猶未盡。手指摩擦、轉動手中返程的車票，不時看向手錶上的時間——啟程還有一個半小時。總覺得少了點什麼，於是跑向車站內的小店，又空手而歸。大海，是大海，作別大海，託付給她的不安被打包返還。</p><p>那天清晨的細雨空濛，風卻險些從我手中奪過那把隨我走遍江南的雨傘。在濱海棧道上行走，新鮮的雨水混著海草的腥味，這是大海的饋贈，喚醒還未完全甦醒的我的靈魂。道旁的樹用綠葉為這場夏日的開場儀式奏樂，窸窣窣，窸窣窣；海岸線上巖黃色的礁石屹立在大海之濱，沉思。近來可好？我的生活正在把我拖入泥濘，這裡危機四伏，舊的秩序已然崩塌。不願面對的人群，永遠說不出的心中的話語堆積，內心深處精神的孤獨、缺氧，漸漸迷失在這片人生森林的迷霧中。這便是那些為我定製的精神危機，我必須時刻鬥爭。礁石孤立無援，守在海岸的前線，聽憑浪濤處置。</p><p>但浪濤仍是正義的。擊打在這些巨石上，唰的巨響，濺起數米的水花，仍是治癒人心的。那些有規律的自然的律動，是海潮給我的諄諄教誨。但這些無形的空洞的響聲，又有什麼資格給予我未曾得到的生命力量？海潮漲落，我的心趨於平靜。靜謐的清晨，眺望大海及遠方。海是印象派的交響樂，海是詩人未寫完的詩行……細雨初歇。</p><p>向中山路走去，已經是正午。保留殖民地時期風貌的小街——精緻的商品店、咖啡廳擠在單行道的兩側。牆邊掛滿了爬山虎，店門口的風鈴和老式腳踏車，在微風中明朗清脆，便聞到一陣咖啡的幽香，嘴邊感知到驅走今晨微寒的溫熱。在這裡小憩片刻吧。遠處走來一個少女，淺黃色漁夫帽下輕煙蔽月般看不真切的面容，緩步邁向咖啡店。便似飄散開奶香拿鐵的甘甜，飲甘醉如燻，陶醉在細雨中微酡。她停下，把手機架在對面的牆上，小步跑向店門，在咖啡店門口的小桌上坐下，捧上一束花，找到更美的姿勢，微微一笑。她是在給自己拍照。一個人的旅行也能如此！雨後的陽光灑在咖啡館的正門邊，女孩剛才拍照的位置，玻璃檯面反射出久違的光。而人生會是一場漫長的旅行……</p><p>時候不早，於是離開這裡，想在返程前再看一次大海。海風仍撫過我的面頰，眼瞼微潤。海潮依舊漲落。下海，我試圖追上浪潮，試圖一把抓起她，質問她，請教她——我的生命需要方向。撲向大海，跌跟頭，再爬起來，一把攥著漲來的海浪，手心冰涼，卻發現是一捧金沙。海潮拒絕我熱情的問詢，拒絕救濟迷失的靈魂。我乞求的答案竟是泡沫。</p><p>阿圖姆甦醒，金紅色的殘陽，決然墜入深海。他果斷選擇了毀滅，選擇了鳳凰涅槃。殘陽如火，大海也在海浪山崩地裂的哭喊中被夕陽的鮮血染成橘紅色。隕落，金閣寺的火焰還未熄滅，碧海澄空在生命的火焰中熊熊燃燒。我想把我的生命此刻獻祭給大海，寄希望於大海，期冀在運動中重塑生命。星海燦爛在夏日的毀滅中醞釀，“夜空一無所有，為何給我安慰？”海洋的呼吸滯礙我生命的前行。</p><p>生命本就是空虛的，一切也都是徒勞。夕陽在跟大海殊死拼搏中墜亡，何嘗不是一種價值的創造？或許陽光會在另一面出現——那是遠方的新世界。收拾行囊，準備第二天的征途，風的呢喃中，忘卻生命之流中阻力與痛苦……</p><p>車站裡寂靜無人，旅途已經完結，但人生的真正旅程甚至不能說已經開始。面對完全的未知和任由天命擺佈的無奈，路途仍然由我們規劃。</p><p>踏上列車，窗外夜空澄淨無瑕，點點星光，這是星海的水波——我把海潮帶走了，帶向世界的每個角落，帶向天涯海角，帶向每一個夜晚和清晨。</p><p>海潮汩汩不停歇……</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 散文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>再會</title>
      <link href="/2023/10/05/farewell/"/>
      <url>/2023/10/05/farewell/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>懶得寫簡介，你們自己點進去看 doge</p><hr /><p>初秋的幽風再不能喚醒，<br />心中將乾涸的冰流，<br />直到那西湖——野徑清夜的迴風<br />舞雪在我心中翩躚。</p><p>煙霞嶺的桂香，<br />飄向幽谷和雪巘，<br />平湖秋月和斷橋殘雪。<br />蘇子愀然對月，<br />卻在惠州再會了蘇堤——<br />玩月，豐、平二湖。<br />春曉，此心安處是吾鄉？</p><p>再會，上海的南京路，<br />一年前初秋的暖夜，<br />我曾如御西風，<br />也學那道家列子<br />——大都會的夜不眠。</p><p>再會，當我發覺那將逝的、已逝的，<br />天下的美好，絕不能<br />再喚起我心中一絲快慰。<br />棧橋上殘陽似火，我的生命在海浪、<br />在驟風細雨中熊熊燃燒：<br />生的火焰、死的火焰、<br />溝口的金閣寺的火焰。</p><p>再會，認真地，<br />再會，我親愛的朋友和敵人，<br />素昧平生的人。<br />殘酷的祛魅，意義的失去。<br />如今秋風與殘陽縈繞我心——這是天譴。</p><p>湖上一輪明月，<br />太陽將在那後山誕生。<br />再會，那理性的感性的、<br />自然的和非自然的。<br />再會，舊的世界和秩序……</p><p>再會，我不願面朝大海，<br />再會，春暖花開。<br />再會，自私的我將把祝福留給自己<br />——我不是數十年前那位偉大的詩人，更不會像他一樣期待明天，<br />今日事今日畢。<br />置之死地而後生，<br />再會，支離破碎的自己。</p><p>世界在哲人的一聲高呼中崩塌，<br />新的意義在廢墟中出生。<br />那嬰孩的啼哭，Nirvana……<br />再會，為了再次相會。</p><p>那麼，<br />再會，朋友，<br />別來無恙啊。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 詩歌 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>飢餓藝術家 卡夫卡</title>
      <link href="/2023/08/14/kafka-hunger/"/>
      <url>/2023/08/14/kafka-hunger/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>《飢餓表演藝術家》是卡夫卡曾計劃印刷的短篇故事合集，他死後才出版。其中與合集同名的小說，也是最受他珍重的幾個短篇小說之一。</p><p>故事情節大致如下：</p><p>多年前流行著一種飢餓藝術，人們爭著來觀看。飢餓藝術家往往為了藝術的榮譽感，自覺不去進食，而公眾卻會推選看守人員，看守人員也有意給他留空能偷偷吃東西。藝術家表現出自己捱餓的能力，希望消除人們的懷疑，可總有人不以為然。飢餓表演往往40天就結束，是為了能夠保障收入最大化。經理會表現出對藝術家的讚歎，那至高無上的榮譽，人們的歡呼迎接，藝術家是不以為然的。那一切狂歡都是為了經理的營收。飢餓藝術家希望再餓一會，挑戰極限。經理用各種解釋和照片，使公眾相信他的一套說辭。公眾或許憐憫，或許懷疑，把藝術家當作江湖騙子。藝術家是不滿意的，是不被理解的。</p><p>多年之後，當大街小巷飢餓表演不再風靡，人們又去追捧馬戲團的表演，去看那籠中馴服的野獸。飢餓藝術被拋棄了？沒有人會關注那舊事物那“江湖騙子”的消亡。藝術家也許應當轉行，可他熱愛這樣的表演，告別了經理，前往大馬戲團工作。馬戲團裡，他被安置在前往獸場的交通要道。人們在休息時間，趕去觀看野獸的時候才或許會注意到他。他仍然表演，挑戰自己的極限，可惜連記錄他捱餓時間的工作人員都也離去。沒有人在意他的成績。人們更願意去看野獸，人們把這飢餓藝術說是騙人的玩意兒。</p><p>表演結束，管事發現了籠子，發現了籠子裡的藝術家。他還在堅持，他不願意進食。“我只能捱餓，我沒有別的辦法。”“因為我找不到適合自己口味的食物。假如我找到這樣的食物，請相信，我不會這樣驚動視聽，並像你和大家一樣，吃得飽飽的。”他死了，他很堅定，他要繼續餓下去。</p><p>籠子裡換上了一隻小豹，人們更愛看這隻小豹，不捨得離去……</p><p>這就是卡夫卡《飢餓表演藝術家》的情節。靠著捱餓表演換來觀眾的藝術家，在這種表演流行的時候不被理解，當表演不再流行便被人遺忘。他卻堅持這種藝術，他認為飢餓是實現自己的方式，他找不到其他的方式，“只能捱餓，沒有別的辦法”。</p><p>“飢餓表演”、“40天捱餓”，故事荒誕，卻引人深思，道出了深刻的真理。一個人，找到了他的熱愛，實現他價值的道路，便願意為此反抗世人不解的眼光，並願意為此付出生命。一生的孤獨落寞，一生的痛苦，在實現價值的時刻都不足掛齒。這件東西對於飢餓表演藝術家來說是飢餓表演，對於卡夫卡而言便是寫作。寫作對於卡夫卡來說很重要，他認為寫作是“一種祈禱的形式”。</p><p>據說在卡夫卡去世前一個多月，他在病榻上閱讀本篇清樣時，不禁淚流滿面，可見於書中主人公發生共鳴。</p><p>卡夫卡出生於奧匈帝國。他曾受過律師這門職業的培訓，在他完成法學課程後在受聘於一家保險公司工作，任職後的空餘時間，卡夫卡開始寫短篇故事。對於工作剩餘的時間，卡夫卡經常會抱怨難有較充裕的業餘時間從事寫作，因為自己不得不將大量時間去工作。他後悔對他的Brotberuf（“日常工作”，即“生計”）投入了過多的關注。因為歐洲當時對猶太人的壓迫排擠，卡夫卡時常曾抱怨自己身為一名猶太人。他對猶太人處境的低下、被動的埋怨與不滿也對他作品的風格有影響，但卡夫卡自認為身為猶太人卻對自己沒有起多大的幫助。卡夫卡在世時並不有名，大多數作品都是去世之後發表的，他在辭世之後才變得有名。</p><p>或許卡夫卡也是這樣一位“飢餓藝術家”，用自己獨特的荒誕文學希望實現自己的價值。生前並不被大眾看好，遺囑中本希望把作品銷燬，作品卻被朋友發表，才被世人所知。</p><p>他熱愛寫作，敬畏文字，工作之餘進行自己的“飢餓表演”。</p><p>因為除了寫作，他別無他法。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文學評論 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python 中的 zip() 和 enumerate()</title>
      <link href="/2023/08/10/python-zip-enumerate/"/>
      <url>/2023/08/10/python-zip-enumerate/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>最近要用 Python 做一些小專案，記錄一些學習心得。以及這個部落格再不更新技術文章，就變成文學部落格了，顯然和初衷相違背（）</p><h2 id="zip"><a class="markdownIt-Anchor" href="#zip"></a> zip()</h2><p><code>zip()</code> 函式用於將可迭代的物件作為引數，將物件中對應的元素打包成一個個元組，然後返回由這些元組組成的物件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zipped = <span class="built_in">zip</span>(a, b, c)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zipped</span><br><span class="line">&lt;<span class="built_in">zip</span> <span class="built_in">object</span> at <span class="number">0x00000278786975C0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(zipped)</span><br><span class="line">[(<span class="number">1</span>, <span class="number">4</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">5</span>, <span class="number">5</span>), (<span class="number">3</span>, <span class="number">6</span>, <span class="number">6</span>)]</span><br></pre></td></tr></table></figure><p>這樣做的一種應用方式是在遍歷的時候，可以同時遍歷多個陣列：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i, j, k <span class="keyword">in</span> <span class="built_in">zip</span>(a, b, c):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i, j, k)</span><br><span class="line">...</span><br><span class="line"><span class="number">1</span> <span class="number">4</span> <span class="number">4</span></span><br><span class="line"><span class="number">2</span> <span class="number">5</span> <span class="number">5</span></span><br><span class="line"><span class="number">3</span> <span class="number">6</span> <span class="number">6</span></span><br></pre></td></tr></table></figure><p>如果遇到陣列不等長，會以最短的長度為準。</p><p>如果要按照最長的長度，可以使用另一個函式 <code>zip_longest()</code>，不多贅述。</p><h2 id="enumerate"><a class="markdownIt-Anchor" href="#enumerate"></a> enumerate()</h2><p><code>enumerate()</code> 函式用於將一個可遍歷的資料物件(如列表、元組或字串)組合為一個索引序列，同時列出資料和索引。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>seasons = [<span class="string">&#x27;Spring&#x27;</span>, <span class="string">&#x27;Summer&#x27;</span>, <span class="string">&#x27;Fall&#x27;</span>, <span class="string">&#x27;Winter&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">enumerate</span>(seasons))</span><br><span class="line">[(<span class="number">0</span>, <span class="string">&#x27;Spring&#x27;</span>), (<span class="number">1</span>, <span class="string">&#x27;Summer&#x27;</span>), (<span class="number">2</span>, <span class="string">&#x27;Fall&#x27;</span>), (<span class="number">3</span>, <span class="string">&#x27;Winter&#x27;</span>)]</span><br></pre></td></tr></table></figure><p>這也可以在遍歷的時候使用。</p><h2 id="注意事項"><a class="markdownIt-Anchor" href="#注意事項"></a> 注意事項</h2><p>這兩個函式使用的時候，需要匯入模組 <code>itertools</code>，否則會報錯。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 程式設計 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技巧 </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>泡沫</title>
      <link href="/2023/08/10/foams/"/>
      <url>/2023/08/10/foams/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>只恨一切都成了泡沫……</p></blockquote><p>浪宣告朗，日光下，<br />我試著抓住大海——它<br />卻後退，化身成點點泡沫。</p><p>海波泛起星光閃爍，<br />如秋波傳情勾起那些緬邈之懷。<br />這次，要抓牢——<br />海無情，夕有情，<br />斜陽下，攥住一手細沙，金黃。</p><p>奔走，奔走，向大海，<br />跟隨泡沫的蹤跡。<br />前行，浪宣告朗，<br />拽住浪花似TA的衣袖，<br />只恨，跌倒，潮退，<br />失去。<br />迷茫。</p><p>泡沫，泡沫，<br />如今我兩手空空。<br />“雖不能至，然心嚮往之。”<br />或許會隨波流浪，<br />去大海深處，<br />去尋覓你，<br />尋覓浪聲依舊。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 詩歌 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>“救救孩子……”——談魯迅和《狂人日記》</title>
      <link href="/2023/08/08/kuangrenriji/"/>
      <url>/2023/08/08/kuangrenriji/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>“救救孩子……” 漸弱的呼喊，魯迅在狂人的絕望中收束全篇。這種無力卻格外讓人感覺似有一股刺骨之寒，或能於鐵屋中驚起更多較清醒的“不幸者”。</p><h2 id="鐵屋中覺醒"><a class="markdownIt-Anchor" href="#鐵屋中覺醒"></a> 鐵屋中覺醒</h2><p>魯迅“到N進K學堂“，研習格致、算學之類。眼界開闊了，方才醒悟中醫或許並非治人之病的良方，而還有更多像他的父親一樣得不到科學的治療的國人。於是他赴日留學，專攻醫術。某日，他觀看的日俄戰爭的影片中，同樣是中國人，“一個綁在中間，許多站在左右，一樣是強壯的體格，而顯出麻木的神情。”“據解說，綁著的是替俄國做了軍事上的偵探，正要被日軍砍下頭顱來示眾，而圍著的便是來賞鑑這示眾的盛舉的人們。“人們歡呼。在中國，日俄的衝突而被日本人斬首示眾的中國人，中國人在旁觀，中國人在高呼”萬歲“。魯迅心中震顫，便下定決心”改變他們的精神“，”提倡文藝運動“。</p><p>這是《吶喊》自序所述。或許驅使魯迅下定如此決心的，並非如此一次觀影經歷，而是長期以來所見、所思。中國人病了，病在精神上，病得不輕。</p><p>他想尋找同志。器物救國的道路指引下，“東京的留學生很有學法政理化以至警察工業的，但沒有人治文學和美術。” 最後邀集了幾人，願出雜誌《新生》，卻在出版之前各自退出。寂寞，魯迅如是形容。沒有人贊和，沒有人反對。根本沒有反響。悲哀啊，寂寞啊。魯迅面對的是一片荒原。“這經驗使我反省，看見自己了：就是我決不是一個振臂一呼應者雲集的英雄。”</p><p>寂寞的痛苦中，魯迅在S會館抄古碑，甘願讓自己的生命暗暗地消去。這是他的麻醉，許多年，直到錢玄同來訪——此時他們正辦《新青年》，對著荒原吶喊。“你抄這些有什麼用？”“沒有什麼用。”……“我想，你可以做點文章……”錢玄同希望魯迅為《新青年》撰稿。</p><p>“假如一間鐵屋子，是絕無窗戶而萬難破毀的，裡面有許多熟睡的人們，不久都要悶死了，然而是從昏睡入死滅，並不感到就死的悲哀。現在你大嚷起來，驚起了較為清醒的幾個人，使這不幸的少數者來受無可挽救的臨終的苦楚，你倒以為對得起他們麼？”<br />“然而幾個人既然起來，你不能說決沒有毀壞這鐵屋的希望。”<br />希望？希望。希望！希望照亮困頓。魯迅最終答應，於是便有了此篇《狂人日記》。</p><p>在寂寞裡賓士，吶喊……</p><h2 id="狂人的妥協"><a class="markdownIt-Anchor" href="#狂人的妥協"></a> 狂人的妥協</h2><p>在序言中，魯迅寫道這狂人是他中學時良友之弟，患”迫害狂“之類，寫下的日記。”語頗錯雜無倫次，又多荒唐之言“。如今病癒，卻赴某地候補了。</p><p>全文實在荒唐，卻讓人害怕。狂人起先覺得這趙家的狗多看他兩眼，需小心。之後又覺趙貴翁和那路上的人，似怕他，又似想害他，需提防。隨即，路上孩子、街上的女人、家裡的人、哥哥……一切的人，都被他所懷疑。他覺著全村的人似乎有要吃他的陰謀。最後卻發現自己不僅是“受害者”，也是“加害者”，和他們一樣——或許妹子就是被哥哥所食，或許她的肉或在飯菜裡也被全家人食用。便發出“沒有吃過人的孩子，或者還有？”之問，是對這個吃人世界之外的淨土的追尋。</p><p>吃人並非是吃的盡是肉體，也可以是精神。吃人並非一定需要尖牙利齒，也可以用“仁義道德”取而代之。</p><p>凡事總須研究，才會明白。古來時常吃人，我也還記得，可是不甚清楚。我翻開歷史一查，這歷史沒有年代，歪歪斜斜的每葉〔頁〕上都寫著“仁義道德”幾個字。我橫豎睡不著，仔細看了半夜，才從字縫裡看出字來，滿本都寫著兩個字是“吃人”！<br />狂人到底還是語無倫次。易牙和桀紂並非同時代的人，《本草綱目》並不是《本草拾遺》。但吃人的歷史沒有年代。古代，有“易子而食”，易牙可以把兒子蒸了先給齊桓公；當代，打兒子可以“咬幾口出氣”，“給知縣打枷過的，也有給紳士掌過嘴的，也有衙役佔了他妻子的，也有老子娘被債主逼死的”也都可以理所應當。“去年城裡殺了犯人，還有一個生癆病的人，用饅頭蘸血舐。””大惡人，給大家打死了；幾個人便挖出他的心肝來，用油煎炒”吃，可以壯壯膽子。”從盤古開天闢地開始吃人，吃到易牙的兒子，吃到現在。“好人”可以吃“惡人”，“惡人”活該被吃。理由便是“仁義道德”。</p><p>狂人意識到了“吃人”的事實，找身邊的人，希望勸轉他們，卻被當成了“瘋子”。或許這與魯迅的寂寞之痛也是相通的。意識到自己也是食人者後，感嘆“難見真的人！”這是一個人吃人的社會，希望便給了下一代。</p><p>“救救孩子……”</p><p>可惜，抱有如此希望，已經發現瞭如此真相，在“病癒”之後，他卻候補，聽候委用，願入朝做官。這或許又是一種妥協？發現吃人真相的異類，在吃人的社會中，如此謀求生存。</p><p>在鐵屋裡醒來，又在裝睡罷了？</p><p>希望、責任，給予下一代人。</p><h2 id="救救孩子"><a class="markdownIt-Anchor" href="#救救孩子"></a> “救救孩子……”</h2><p>下一代人不應受到“吃人文化”的摧殘，應當摒棄這些錯誤的保守的所謂“仁義道德”。孩子不再吃人，社會也不再會是“吃人的社會”。“救救孩子”中蘊含“孩子救救”的祈禱。</p><p>“這人肉的筵宴現在還排著，有許多人還想一直排下去。掃蕩這些食人者，掀掉這筵席，毀壞這廚房，則是現在的青年的使命。” 引用魯迅《燈下漫筆》作結。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文學評論 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>想念</title>
      <link href="/2023/06/10/xiangnian/"/>
      <url>/2023/06/10/xiangnian/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>好久不見啊！</p><p>古羅馬的鬥獸場，數千年矗立在地中海沿岸的小城。濛濛細雨，如遊絲，洗濯時間長河中穿梭著的風塵僕僕的旅客。</p><p>或許想起在煙雨江南，於靉靆之下縵立，遠眺城牆之外。人們總是刻意忽視時間，以為出了這城便是鄉。城門啟，誰知，還鄉，物是人非。</p><p>鄉愁，一如浪潮襲擊海邊的漁村，無情地將我拽入不見底的深淵，黑暗的虛空。一說是時間的鄉愁，想念幼時河邊遊遺失的安心。山腳下的村莊飄來了裊裊炊煙，鄉間蒸飯和熱油下鍋的氣息，勾引我千里之外的魂魄。記憶中我還是個孩童，手握竹竿，站立在山間公路的轉角。山路十八彎，那就是我的故鄉。</p><p>外婆怎麼還沒有喊我回去吃飯？外公怎麼沒有騎著摩托從水電站回來？記得那時深夜，轟鳴聲悠長，打破夏日鳴蟬。空氣中凝固的不安的氣息解凍，隨即是柴門聞犬吠，風雪夜歸人。向山行，向山行，爺爺卻讓父親走出大山。</p><p>那天，外公載我遊遍深山，縣界的隧道、縣外的群山，白溢寨和千丈巖，國家公園。緊握他的衣袖，疾風起，敞開外公的衣裳，軍綠色的夾克。那時尚未老去，路邊點起一支菸。隨風飄，一縷長煙細，似那天的雲靄。</p><p>後來，在山上的爺爺家，那夜難眠。離了父母，幼小的孩童，素未謀面的血親。窗外螢火蟲閃爍，也像外公的煙燼，如今何處去尋那夜啊！野草微搖，農舍內燒開的熱水上水氣瀰漫。轟鳴，外公接我回去。</p><p>許多年的故事，許多年的分別，漸忘了回家的路。回不去的是那時歲月。未變的是群山。</p><p>也思念舊時老友，那時校園漫步，無話不談。花團錦簇，蜂蝶飛舞，也如我們閒行的身影。深夜的資訊，聞知重逢的良機，急行，趕向過往的煙雲中。往事如煙，往事並不如煙。初見，相視無言。熟稔地挑起熟悉的話題，冰冷中見真情。</p><p>那時或在夕陽西下之時，暮色之下慢跑。少年在微光中，希望在夢想中。天色漸暗，燈起，前路初現。後來邁步衢上，回首向來蕭瑟處，也無風雨也無晴。歸去，歸不去。校園芳草依舊，故人不再。未變。真的沒有改變嗎？變化的是時間，是韶光。逝者如斯，如今我卻思念，思念那些流水年華。</p><p>回到故鄉，重返校園，時間的鄉愁責罰無罪的我。天啊，為什麼鞭笞時間中無辜的行人，用不盡的情感之潮，澆滅我向前的火種。總要向前行，卻無法阻止自己向後看。勇氣，向著未知。失去的歲月、人、事，一切，回憶中變得絢麗。</p><p>又是一年盛夏，從故鄉乘高鐵歸來。夕陽下，原野平靜，我心難平。慢一點，遠去的大山不再停留。或許遠方還有人在思念。相思，苦澀。落日，無情。</p><p>誰怕，此心安處是吾鄉？</p><p>想念……</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 散文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>淺灘</title>
      <link href="/2023/03/30/bank-of-sea/"/>
      <url>/2023/03/30/bank-of-sea/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>秋潮漲落，<br />在那心的橋樑。<br />彼岸還有草露甘香。<br />春泥，<br />是明天的味道。</p><p>明天？回答今日的困惑——<br />海的女兒，<br />帶來獨木扁舟，<br />和那風的號角。</p><p>淺灘上，<br />思緒是雨燕，<br />盤旋徘徊在碧海青天。<br />飛去！遠行！<br />散不去的是層霧迷濛。</p><p>潮起，潮落，<br />潮水在我腦海的淺灘起落。<br />潮水啊，何時平息在大海的盡頭？<br />——大海一刻不停，在歡唱：<br />“生生不息……“</p><p>秋潮帶走了我，<br />淺灘上，<br />我還是我的我，<br />我的生命將是大海。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 詩歌 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蟬 · 夏</title>
      <link href="/2023/03/25/summer/"/>
      <url>/2023/03/25/summer/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="一"><a class="markdownIt-Anchor" href="#一"></a> 一</h2><p>六月的鳴蟬嘒嘒，微弱卻唱響夜空。</p><p>路旁的小樓上，沐心倚著陽臺的欄杆，遠眺萬里澄澈的夜空。偌大的城市。車水馬龍，光線在飛馳而過的喧鬧聲中劃過眼前的夜。她又在極目遠眺。但早就沒有什麼人讓她這樣等待了，她也不再是當年的孩童了。<br />沐心家在郊區，上海的郊區。遠方的鐵道線路，路旁樹叢中窸窸窣窣的夏夜之歌，沐心心裡卻是另一番景象。此時她正看著稀少的來往車輛，發著呆。她喜歡這樣，在夜晚思考。但她的確沒有思考什麼。<br />“那些……所以……” 她似在嘀咕著。這心中湧動的問與答不小心說了出口。<br />臉龐淡紅，她忽地四下望，慌亂中險些將手中的筆丟到輕盈的夏季的空氣中，墜落。好在四周沒有人。畢竟那很是尷尬呢。<br />綠化帶上，花叢中飄來淡淡清香。<br />回到起居室內，牆壁上貼著幾面鏡子。夏季新雨過後，燥熱卻仍帶溼潤的空氣早已給鏡面蒙了一層紗。不知是深夜的恍惚，還是水霧幻境，亦或者是幻覺，沐心在鏡中看見了自己的倩影，似在清澈的夢境中漂浮。奇怪，明明是夏季，南方夏日，心裡實在是一絲寒冷，太涼了。鏡中，她看見了眼角帶著一些滿溢的溫熱的溼潤。或許是水汽，或許……她莞爾一笑，或是笑情緒真是捉摸不透。<br />但剛才面對廣袤深空，感受大地和城市脈搏，她確是有些言語未說出口。蟬鳴替她講完了口邊的千言萬語。<br />橫道線，柏油路，黑白漆。入夜，染上了淡藍，彷彿被水蒙蓋一般奇妙。<br />交通訊號燈還在閃爍。</p><h2 id="二"><a class="markdownIt-Anchor" href="#二"></a> 二</h2><p>淚眼迷濛中，她又開始遠望。她看見的不是山，不是海，不是墜入大地的夕陽。她看見了虛空，夜晚。星稀疏，一顆、兩顆——那是飛機。<br />高處風疾。她扣上毛線衫的扣子，雙手在胸前輕撫。很是清涼。觸控耳旁，髮絲不經意間滑過那手。碧發微寒。<br />蟬鳴還未歇。<br />夜晚帶她去往十多年之前。<br />那時，在公路道口，夾竹桃盛開的地方，外婆帶著她等待晚歸的父母。<br />那時，經濟發展迅速，這樣的千年古國展露出蓬勃生機。這座國際大都市，上海，自然吸引了許多投機者，創立企業。她的父母便是這樣的人，不過，他們算是後來者。不知有沒有趕上末班車了。沐心只在政治課上偶然瞭解了這些，那些政治課也不知她是如何度過時光的。<br />不過她記得，每個這樣的黃昏，她都和外婆在這裡等待。那時她五歲。<br />悶熱的天氣，潮溼的襯衫，實在是讓人喘不過氣來。夕陽把碧空染成火的顏色，高速路邊綠樹成蔭。道口有一個公交車站，卻少有行人。這是終點站。<br />她不在乎來往的車輛，不在乎來往的行人。她極目遠眺，希望見到一個騎摩托車的身影。那是父親。<br />她若有所思，發呆的習慣或許是從這一刻開始的。<br />蟬鳴窸窸窣窣，知了知了……<br />外婆通常不會說話，這是她的性格。沐心很少瞭解到外婆的故事，卻只是知道外婆是母親從遠在山區的老家叫來照看她的。不過那時外婆也還年輕。<br />“媽媽她們快回來了，很快的。”<br />“嗯……“<br />等待中，夕陽已從樹梢落入地平線，斗轉星移，繁星點點。她看著來往車輛，鳴笛聲也像水流般從她耳側淌過。天空中還是有飛機，但她沒有興趣。她看向昏暗的樹林，似乎感覺有什麼可怕的東西要衝出來。那或許是外婆口中傳說的野獸，嚇唬小孩子的什麼東西。她或許從沒有信以為真。但那些恐懼是有名字的，就是她心中的不安。<br />陽光沉入大地，她心裡卻只是想，他們怎麼還不回來，他們什麼時候回來。從小一個人成長，也不懂得與人們交流。她很是不安。<br />蟬鳴越來越急了，她心煩意亂。<br />這時微風拂面，她的髮絲飄搖。遊絲一般的悶熱依然縈繞，擔憂陰魂不散。<br />但遠處騎著黑色摩托的熟悉身影到來，她心中的石頭沉下來了。蟬鳴聲不息，窸窸窣窣。她的眼淚都快落下來了。<br />後面的事，她的記憶便不太清晰了。但那種缺乏安全感的混亂，卻被她帶走了，直到今天。</p><h2 id="三"><a class="markdownIt-Anchor" href="#三"></a> 三</h2><p>她往往是沉默的，她看似少年老成，內心活動卻異常豐富。她不善與人相處，卻又渴求一種她自己也說明不清的東西。她曾在回憶中搜尋，在散步時追問。沒有答案。所以她在痛苦什麼？所以她在追尋什麼？<br />鐵道線上，地鐵飛馳而過打斷了她的思緒。<br />地鐵？初中時期，沐心就每天乘地鐵上學。地鐵飛馳而過，空氣的清澈聲響，讓她倍感親切。<br />曾經有一陣子，沐心確實以為自己得到了自己想要的東西。<br />一頭烏黑秀髮的少年，成績也是不錯呢。性格活潑，又有一些調皮。他那時在班上也很受歡迎吧。少年名叫晨星，是沐心的同班同學，性格卻完全相反。但不知什麼機緣巧合，兩個人相識了，相處還算是愉快。不過如今沐心也記不得什麼了，斷絕往來，只能嘆息人性虛偽咯。<br />不過，他們曾經每週的書店之旅，卻實在是難忘。<br />學校門口，桂花盛開。學校在上海的老城區，學校是一所老學校。放學時間，同學都圍在門口小賣店，談論最新的電影、小說，嬉戲打鬧。馬路上車流不斷，天空是淺粉色。<br />放學之後，他們會去快餐店買那幾元錢的小吃，也會去書店閒逛。書店邊是一所大學，學校裡樹林茂盛，那時也快到了櫻花盛開的季節。<br />那時，沐心的整個世界崩塌了。她只記得自己病了，心病了。冰冷的世界，冷漠的人潮，她只覺得人性冷淡，覺得世界陌生，覺得處處敵對。暗淡無光的眸子中，淚光常掛。但連淚光也是無力的。只有那嘆息聲中還能聽得出一些希望。<br />書店之行就是她生活中的光。<br />“我喜歡川端康成，我要做那樣的小說家。”<br />“嗯，他的書確實不錯。我也喜歡。”<br />晨星介紹自己熱愛的數目，沐心便看到了少年朝氣，有的時候還為這種感覺感動呢。<br />那段時間，沐心差點自殺了。那段時間，她確實死了，但她重生了。<br />還記得她“回來”之後，面對十一月冰冷的夜空，在南京路上輕盈的步伐，和朋友逛街探店，臉上的歡笑。<br />夕陽斜照，步行街上，她感覺在微風中，她要飛起來了。<br />草木微動，澄空微寒。</p><h2 id="四"><a class="markdownIt-Anchor" href="#四"></a> 四</h2><p>蟬鳴聲不歇的夏季，沐心這次有些迷茫。<br />她經歷了太多，比眼前馬路上來往的車輛數多多了。無數次的等待，無數次陪伴和冷落。她還在追尋什麼，她嚮往的生活是什麼？<br />她自己也不知道。<br />獨立？自由？愛？<br />她缺少家庭的溫暖，缺少真實的交流。對，確實是這樣。<br />但她又確實不缺少什麼。<br />蟬鳴聲窸窸窣窣。她的思忖永無休止。<br />她仇恨嗎？有一點。<br />但她早已知道，過去的世界已經在幻夢中走向消亡。<br />門鈴聲響。父親夜晚回家。<br />她好像幻聽。“抱歉，久等了。“<br />沒有聲音。<br />”回來了。“<br />無數次的等待，無數次的不安。<br />幼時曾擔心而哭泣。長大後，這一切都有了新的含義。<br />未來想來會不會覺得幼稚？<br />但在這些經歷中，她變了。<br />……<br />蟬鳴聲不息，空氣悶熱。視窗亮起昏暗的燈火。那是遠方的村莊。她睡去了，淚光比夜空澄澈。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小說 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微風</title>
      <link href="/2023/03/12/breeze/"/>
      <url>/2023/03/12/breeze/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>少年的長髮，飄揚在微風明朗的五月。</p><p>氣息中還帶有一絲土壤的味道，絮飛揚，花灑地。昨夜的雨是否浸溼了嬌嫩的綠葉，沉睡的草木醒來，便是瘋狂滋長。入夏，蟬鳴。<br />斗轉星移的深邃海洋，飛鳥劃過夜空。空中若隱若現的漣漪，像那些出海的日子，海鷗濺起片片水花，如同敲擊冰面的冰花。<br />少年就這樣望。在窗邊望，在小院思。院門外雞狗聲未歇，在看不到的角落，或許行人驚醒了沉睡的生機。但哪有什麼行人？半夜三更。……<br />少年要去赴那六月的邀約，回到想象中水墨山水的西湖。湖上的蓬舟，水上的浮木，船伕用船槳在水中留下的草書筆畫，是否如蘭亭的碑文。未有形先有情。濁酒一杯，徹夜不眠。湖上附著的水汽的薄膜，如蒞仙界。少年想起了少女的素娟，柔轉、飛舞，牽動的情思。然而透過西湖的霧色面紗，黑暗難以辨識的遠山上還有昏黃的燈火。山外是否有人家？山中行，耕作、飲酒、作詩，砍柴餵馬。天下遨遊，睥睨萬物。<br />可惜少年在那個五月出發去了遠方。那是一種生命中或許只能有一次的奇妙旅行。穿過意識深處的山野，在荒郊城外的林間小路行走，踏上天空。天空或許有侷限。囚禁在這裡，在樹林、在空間穿梭，在時間。少年困在現在，現在擺脫不了少年的束縛。莫名的苦痛，眼角的淚花。變幻莫測的時空，這個世界上必然有能容少年之地？沉入深海。<br />湖光山色，天快亮了。船上是少女的笑顏。粉色的天空，淺藍的湖水，純潔的白霧。碧竹編成的蓬舟，如今歷經滄桑，泛黃。忽然飄起了雪花，一片一片，粉白的澄空中，一片一片。<br />少女起身，船頭眺望。一望無際的湖山。少年是否長存天地之間？逍遙自在，山間村居。少女不知道，但或許少年在她中存在，誰知道呢。一段未有人訴說的故事，或許來年春天向我們講述？<br />少女的長髮，飄揚在微風明朗的十二月。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 雜文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>觀星</title>
      <link href="/2023/02/01/stargazing/"/>
      <url>/2023/02/01/stargazing/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>二月快樂！</p></blockquote><p>今夜的我<br />沒有篝火 山歌和露水<br />立在窗前好似身處一片虛無<br />觸不可及的，是<br />那飄渺的月的詩行<br />和纏綿悱惻的繁星的歌謠，<br />都隨我進入那清風入夜而歸。</p><p>何歸也？<br />窗前的虛無，<br />天真的人們把他稱作“星空”。<br />那是人類的終極宿命，<br />從參宿四出發，<br />半人馬座、小熊座、雙魚座。<br />總有一個地方，<br />覓遍那枯腸，<br />也要尋得恰如其分的比喻，<br />傾訴跨越光年的思忖。</p><p>光年之外，<br />琴聲來自光年之外，<br />那一刻我變成了光，<br />光變成了宇宙。<br />那是 137 億年前的訊息，<br />今夜向我訴說，<br />或許如《百年孤獨》一般，<br />命中註定和羊皮卷，<br />正等待我破譯。</p><p>地球上，<br />詩人寫下詩行，<br />被天地之間的人們傳唱；<br />宇宙間，<br />銀河裡盛滿了今夜我心中的淚，<br />而我的空虛也有宇宙廣大。<br />今夜，<br />我當織女，<br />而那逝去的過往便是我的牛郎，<br />只恨過往再難相遇。</p><p>世事繁雜，<br />車水馬龍，<br />攪亂我<br />綿延至數個天文單位外的<br />聯結，<br />是同那宇宙，<br />和那過往的雲靄。<br />在世界尋不得自己的位置，<br />我願遠去，<br />去那星雲之間，<br />做一顆即將誕生的恆星，<br />光熱，照亮世間的層霧。</p><p>今夜的你<br />沒有篝火 山歌和露水，<br />兩手空空來敲我的家門，<br />何妨？<br />好在還有封存的記憶。<br />遠行，<br />去脫離著輪迴，<br />掙脫指數級的孤獨的束縛。</p><p>遠行，<br />不知東方既白。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 詩歌 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浮塵</title>
      <link href="/2023/01/26/dust/"/>
      <url>/2023/01/26/dust/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>最近嘗試隨便亂寫點詩歌。</p><p>微塵，<br />浮沉，<br />孤身行大漠的旅人。<br />跨越了半個世紀的風雪，<br />休憩在我的窗前。</p><p>行大漠，<br />越風雪，<br />如今在太陽的怒吼下，<br />飛舞，<br />浮沉，<br />像個不懂事的孩子。</p><p>微塵<br />浮沉，<br />微不足道的力量，<br />卻敢向那太陽挑釁，<br />從不篤信是那太陽給了他生命和舞蹈。</p><p>跨越了半個世紀的風雪<br />休憩在我的窗前，<br />又用那剩下的半個世紀，<br />完成未竟的事業，<br />挑戰太陽，<br />飛舞，<br />浮沉。</p><p>東方的太陽，<br />強壯的戰士，<br />沉沒在西方的深海。<br />火種熄滅。<br />熄滅，<br />浮塵，<br />黑暗中舞蹈。</p><p>黑暗中孕育著新的太陽。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 詩歌 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>復活</title>
      <link href="/2023/01/11/revival/"/>
      <url>/2023/01/11/revival/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>歲月如梭；來日方長。<br />幻想自己的模樣，並被如今嚇一跳。是時候啟航了，這一次去更遠的地方，用更好的航海術。</p></blockquote><p>光，是流水劃過我的眼眸。睜開雙眼，柔焦，模糊的光影。眼角之間，好像有什麼粘稠作一團的東西，阻礙著光線的生長。眼角還有淚痕，彷彿昨夜一場夢境初醒，卻信以為真，身臨其境，不能自拔，深陷其中而感受到的虛弱。是的，我無法抬起我的雙臂，使出全身力氣，不能控制我的雙腿。我的身體脫離了束縛，或者說，我的靈魂脫離了束縛。肉體存在於很遠的地方，要等待醒來的召喚，解除夜的夢的封鎖。在夢境裡，無法做出選擇，對著變化的世界，旋轉，眩暈。光絲在眼中生長擴散，舒展開的肌肉，雙眉。醒來之後又有一個夢，夢裡還有夢，環環相扣，人生只不過是眾多夢境中的一個，何必分清虛實。</p><p>起身，又是一個清晨，嘆息已經註定了一天的重複的單調。穿衣，刷牙，洗臉，整理，打扮，重複的早餐，三明治配牛奶。仍有氣無力開啟電腦，Telegram、微信、Visual Studio Code。很好，不出所料的沒有新資訊。手機上，微信群裡的聲音卻已經讓人厭倦，甚至讓人想要解除安裝微信，清空所有聯絡。不過是一些交流群、同學群，卻沒有勇氣，或者說沒有興趣點開那空白的輸入框。就像新建檔案卻不知道填寫什麼標題，刪除，再新建，永無休止才發現一個上午的時間早已流失；就像站立的荒蕪的水泥地上，而這水泥地正在你的腳下崩裂，墜入黑暗的深淵，在邊境之地徘徊，懸浮，卻沒有勇氣向下一看驚喜地發現離地半米，有驚無險。人或許是危險的，就像孤身一人行走在原始森林，對周圍的風吹草動擔驚受怕，哪怕只是一隻弱小的螞蟻。畢竟是一個人。過去，行走在人潮湧動的商業區，南京東路，看著來往的人流，交通警察維持秩序，店員售賣琳琅滿目的商品。燈火通明，夜空被霓虹招牌點亮，燈下嫋嫋的煙靄，路邊攤的燒烤，遠處的香味。那一個晚上或許只是一場夢。接近人潮，不安，抗拒，這樣的喧鬧只讓人心神不寧，甚至不願與那店員交易換取心儀的紀念商品。這種縈繞的思忖，反覆湧動如同這來往的不斷地人潮，腦海中，一個開啟就無法關閉的收音機，播放我聽不懂的語言，蜂鳴。緊接著是靜穆，遠處來往的地鐵。溺亡，在自己創造的聲音的海洋中。但今天，我祈禱免受折磨，免於崩潰。</p><p>正午，日光擊在窗前，我心中一顫，好像聽到了太陽的搏擊。地面是紙屑，卻像五月的碎玻璃。但那或許只是我的謊言。那天玻璃杯無故墜地破碎。那天重拾起封印的記憶。想起以前，能有一個在自己控制之內的圈子，便就能滿足，便把自己鎖起來，獨享安寧。想到往昔的隱者，自耕自食。回不去又何必在談起。於是寫下，逃離舒適圈，說起，自己不再能滿足的醜話。誰知是如今的窘迫。幸於能收穫一線庇護，一絲未來的希冀吧。由是感激。雖然有時甚至覺得上天不公，背叛了我，私自選擇了我的誕生，選擇了我的社會身份，選擇了一切，但來了總不能留下遺憾。是嗎？</p><p>手機上有了新通知？起身，彈出座位，一把抓住手機，扯下充電線，按開螢幕，劃出通知欄，卻發現是垃圾郵件。不知道在期待什麼啊！微信上，重複發出的表情，解釋說自己變了，辯解說自己開心。狡辯。也罷，往事如煙。長期行走在痛苦的邊緣，過去是否真正互相理解？不過站在當今看過去，就連最悲慘的都被珍惜。也是可笑，人類如何能做到有這麼多情感，我又如何能做到如此在意？我不在意，我要逃離那個地方，逃離這個紛繁的世界。我要回到我的世界。</p><p>冰雪融化，卻是在午後。太陽似乎要吞噬這座內心的冰城，而水流也已近乾涸。破開生活的繭，破開自己已知的世界，走向未知。此刻我是那個好奇的初生的生命，探索從未涉足的領域，社會的領域。開啟圍欄，開啟窗戶，像鳥飛向遠方。重生，或許是復活。但是生與死沒有界限，生即是死，死即是生。如此說，這是我的第5783次。手起刀落，斬斷流動的人潮，斬斷隔膜，剷除混響的收音機。我瘋了，但我沒瘋。這個世界上有太多的人，他們瘋了？當世界上所有人都不能理解我的內心，他們瘋了還是我瘋了？他們不正常還是我不正常？沒有人是對的，沒有人是錯的。切斷這個夢的天際，讓我重新控制我的身體。太久的沉寂，我需要醒來。向外界邁出新的一步，這一次步態堅定。試圖融入，試圖改變，試圖接受。永恆的不是閉塞，而是永珍更新的生氣。並慶祝我此刻的存在。是的，謝天謝地我活下來了。不說改變世界的空話，先提升自己。</p><p>還是想起某一個午後，約定去書店。那時候的內心世界陰沉，你是一束光照進了我，穿透了我，我醒了，我悟了。翻動書本，立志一起追逐天邊的太陽；在夜晚也會歌唱，圍爐夜話，談論瑣碎的小事。買一瓶奶茶，把它弄灑，還有河流上的風。五彩斑斕的世界，從痛苦的記憶中走出，感受到生活的真實。我真實存在著。你不懂，我以為你懂了。這是無意之舉。或許又有一天，午後，卻因為一點點小分歧，餐盤打翻在空中，我的悔恨從此不再離開。但那不是你，但那是我未能送上的歉意，是我欠下的一筆債，無處去還。默默祈禱自己的轉變。不在意，不評論。只談論自己，太久不奮力拼搏，如今的我要為生存，為生活反抗，反抗世界，反抗天地。並且但願我不是孤身一人。</p><p>身體中充滿力量，前進的動力，那些過去或許一起說過的話。沒有道路就創造道路，沒有條件就創造條件，沒有方法就創造方法。“騙誰呢。”但如今的確可以再拿出來，想著許諾的未來邁進了，但是想到少了點什麼。</p><p>復活？你說只是來到了下一層煉獄。</p><p>煉獄就煉獄。我喜歡這裡，因為不經受考驗，就不再會有成長。我感恩痛苦，感恩打擊；我祈禱痛苦，祈禱夜幕降臨，縱使繁星點點無法入眠，腦海中思緒不受控制，不受限制。</p><p>夜幕真的降臨了。Wish you were here. 但 You are always here 不是嗎。可能吧。但我要遠航了，去那遙遠的地方。帶上希望。復活。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 雜文 </tag>
            
            <tag> 情感 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【摘錄 | 轉載】普魯斯特 《追憶似水年華》第一卷 《在斯萬家那邊》（一）</title>
      <link href="/2023/01/03/in-search-of-lost-time-excerpt-1/"/>
      <url>/2023/01/03/in-search-of-lost-time-excerpt-1/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>摘錄一些最近正在拜讀的作品。</p><h2 id="p46~50"><a class="markdownIt-Anchor" href="#p46~50"></a> P46~50</h2><p>就這樣，在很長一段時期內，每當我半夜夢中回憶及貢佈雷的時候，就只看到這麼一塊光明，孤零零地顯現在茫茫黑暗之中，象騰空而起的焰火，象照亮建築物一角的電光，其餘部分都沉沒在黑夜裡。這塊光明上尖下寬：下面是小客廳、餐廳、花園中幽暗小徑的開頭一截（無意中造成我哀愁的禍首斯萬先生要從那面走來）和門廳（我要由此而踏上樓梯的第一級），而攀登起來令我心碎的樓梯則構成這個不規則稜錐體的非常狹窄的錐幹；頂部是我的臥室、臥室外的過道、過道口的玻璃門，我的母親就是從那裡進來的。總之，老在晚上那個鐘點見到、同周圍事物完全隔絕、在黑暗中孤零零地顯現的，就是這麼一幕簡而又簡的佈景（等於一般老式劇本的開頭為供外省演出參考而作的佈景提示），為了重演我更衣上床的那出戏，這些道具是少得不能再少了；似乎貢佈雷只有樓上樓下，由一部小小的樓梯連線上下，似乎只有晚上七點鐘這一個時辰。說實話，倘若有人盤問我，我或許會說貢佈雷還 有別的東西，別的時辰。但，那將是我有意追憶，動腦筋才想到的一鱗半爪；而有意追憶所得到的印象並不能儲存歷歷在目的往事，反正我決不會自願地去回想貢佈雷的其他往事。它們在我的心目中其實早已死了。</p><p>永遠消亡了？可能吧。</p><p>這方面偶然的因素很多，而次要的偶然，例如我們偶然死去，往往不允許我們久久期待首要的偶然帶來的好處。</p><p>我覺得凱爾特人的信仰很合情理。他們相信，我們的親人死去之後，靈魂會被拘禁在一些下等物種的軀殼內；例如一頭野獸，一株草木，或者一件無生物，將成為他們靈魂的歸宿，我們確實以為他們已死，直到有一天——不少人碰不到這一天——我們趕巧經過某一棵樹，而樹裡偏偏拘禁著他們的靈魂。於是靈魂顫動起來，呼喚我們，我們倘若聽出他們的叫喚，禁術也就隨之破解。他們的靈魂得以解脫，他們戰勝了死亡，又回來同我們一起生活。</p><p>往事也一樣。我們想方設法追憶，總是枉費心機，絞盡腦汁都無濟於事。它藏在腦海之外，非智力所能及；它隱蔽在某件我們意想不到的物體之中（藏匿在那件物體所給予我們的感覺之中），而那件東西我們在死亡之前能否遇到，則全憑偶然，說不定我們到死都碰不到。</p><p>這已經是很多很多年前的事了，除了同我上床睡覺有關的一些情節和環境外，貢佈雷的其他往事對我來說早已化為烏有。可是有一年冬天，我回到家裡，母親見我冷成那樣，便勸我喝點茶暖暖身子。而我平時是不喝茶的，所以我先說不喝，後來不知怎麼又改變了主意。母親著人拿來一塊點心，是那種又矮又胖名叫“小瑪德萊娜”的點心，看來象是用扇貝殼那樣的點心模子做的。那天天色陰沉，而且第二天也不見得會晴朗，我的心情很壓抑，無意中舀了一勺茶送到嘴邊。起先我已掰了一塊“小瑪德萊娜”放進茶水準備泡軟後食用。帶著點心渣的那一勺茶碰到我的上顎，頓時使我混身一震，我注意到我身上發生了非同小可的變化。一種舒坦的快感傳遍全身，我感到超塵脫俗，卻不知出自何因。我只覺得人生一世，榮辱得失都清淡如水，背時遭劫亦無甚大礙，所謂人生短促，不過是一時幻覺；那情形好比戀愛發生的作用，它以一種可貴的精神充實了我。也許，這感覺並非來自外界，它本來就是我自己。我不再感到平庸、猥瑣、凡俗。這股強烈的快感是從哪裡湧出來的？我感到它同茶水和點心的滋味有關，但它又遠遠超出滋味，肯定同味覺的性質不一樣。那麼，它從何而來？又意味著什麼？哪裡才能領受到它？我喝第二口時感覺比第一口要淡薄，第三口比第二口更微乎其微。該到此為止了，飲茶的功效看來每況愈下。顯然我所追求的真實並不在於茶水之中，而在於我的內心。茶味喚醒了我心中的真實，但並不認識它，所以只能泛泛地重複幾次，而且其力道一次比一次減弱。我無法說清這種感覺究竟證明什麼，但是我只求能夠讓它再次出現，原封不動地供我受用，使我最終徹悟。我放下茶杯，轉向我的內心。只有我的心才能發現事實真相。可是如何尋找？我毫無把握，總覺得心力不逮；這顆心既是探索者，又是它應該探索的場地，而它使盡全身解數都將無濟於事。探索嗎？又不僅僅是探索：還 得創造。這顆心靈面臨著某些還 不存在的東西，只有它才能使這些東西成為現實，並把它們引進光明中來。</p><p>我又回過頭來苦思冥想：那種陌生的情境究竟是什麼？它那樣令人心醉，又那樣實實在在，然而卻沒有任何合乎邏輯的證據，只有明白無誤的感受，其它感受同它相比都失去了明顯的跡象。我要設法讓它再現風姿，我透過思索又追憶喝第一口茶時的感覺。我又體會到同樣的感覺，但沒有進一步領悟它的真相。我要思想再作努力，召回逝去的感受。為了不讓要捕捉的感受在折返時受到破壞，我排除了一切障礙，一切與此無關的雜念。我閉目塞聽，不讓自己的感官受附近聲音的影響而分散注意。可是我的思想卻枉費力氣，毫無收穫。我於是強迫它暫作我本來不許它作的鬆弛，逼它想點別的事情，讓它在作最後一次拚搏前休養生息。爾後，我先給它騰出場地，再把第一口茶的滋味送到它的跟前。這時我感到內心深處有什麼東西在顫抖，而且有所活動，象是要浮上來，好似有人從深深的海底打撈起什麼東西，我不知道那是什麼，只覺得它在慢慢升起；我感到它遇到阻力，我聽到它浮升時一路發出汩汩的聲響。</p><p>不用說，在我的內心深處搏動著的，一定是形象，一定是視覺的回憶，它同味覺聯絡在一起，試圖隨味覺而來到我的面前。只是它太遙遠、太模糊，我勉強才看到一點不陰不陽的反光，其中混雜著一股雜色斑駁、捉摸不定的漩渦；但是我無法分辨它的形狀，我無法象詢問唯一能作出解釋的知情人那樣，求它闡明它的同齡夥伴、親密朋友——味覺——所表示的含義，我無法請它告訴我這一感覺同哪種特殊場合有關，與從前的哪一個時期相連。</p><p>這渺茫的回憶，這由同樣的瞬間的吸引力從遙遙遠方來到我的內心深處，觸動、震撼和撩撥起來的往昔的瞬間，最終能不能浮升到我清醒的意識的表面？我不知道。現在我什麼感覺都沒有了，它不再往上升，也許又沉下去了；誰知道它還 會不會再從混沌的黑暗中飄浮起來？我得十次、八次地再作努力，我得俯身尋問。懦怯總是讓我們知難而退，避開豐功偉業的建樹，如今它又勸我半途而廢，勸我喝茶時乾脆只想想今天的煩惱，只想想不難消受的明天的期望。</p><p>然而，回憶卻突然出現了：那點心的滋味就是我在貢佈雷時某一個星期天早晨吃到過的“小瑪德萊娜”的滋味（因為那天我在做彌撒前沒有出門），我到萊奧妮姨媽的房內去請安，她把一塊“小瑪德萊娜”放到不知是茶葉泡的還 是椴花泡的茶水中去浸過之後送給我吃。見到那種點心，我還 想不起這件往事，等我嚐到味道，往事才浮上心頭；也許因為那種點心我常在點心盤中見過，並沒有拿來嚐嚐，它們的形象早已與貢佈雷的日日夜夜脫離，倒是與眼下的日子更關係密切；也許因為貢佈雷的往事被拋卻在記憶之外太久，已經陳跡依稀，影消形散；凡形狀，一旦消褪或者一旦黯然，便失去足以與意識會合的擴張能力，連扇貝形的小點心也不例外，雖然它的模樣豐滿肥腴、令人垂涎，雖然點心的四周還 有那麼規整、那麼一絲不苟的縐褶。但是氣味和滋味卻會在形銷之後長期存在，即使人亡物毀，久遠的往事了無陳跡，唯獨氣味和滋味雖說更脆弱卻更有生命力；雖說更虛幻卻更經久不散，更忠貞不矢，它們仍然對依稀往事寄託著回憶、期待和希望，它們以幾乎無從辨認的蛛絲馬跡，堅強不屈地支撐起整座回憶的巨廈。</p><p>雖然我當時並不知道——得等到以後才發現——為什麼那件往事竟使我那麼高興，但是我一旦品出那點心的滋味同我的姨媽給我吃過的點心的滋味一樣，她住過的那幢面臨大街的灰樓便象舞臺佈景一樣呈現在我的眼前，而且同另一幢面對花園的小樓貼在一起，那小樓是專為我的父母蓋的，位於灰樓的後面（在這以前，我歷歷在目的只有父母的小樓）；隨著灰樓而來的是城裡的景象，從早到晚每時每刻的情狀，午飯前他們讓我去玩的那個廣場，我奔走過的街巷以及晴天我們散步經過的地方。就象日本人愛玩的那種遊戲一樣：他們抓一把起先沒有明顯區別的碎紙片，扔進一隻盛滿清水的大碗裡，碎紙片著水之後便伸展開來，出現不同的輪廓，泛起不同的顏色，千姿百態，變成花，變成樓閣，變成人物，而且人物都五官可辨，鬚眉畢現；同樣，那時我們家花園裡的各色鮮花，還 有斯萬先生家花園裡的奼紫嫣紅，還 有維福納河塘裡飄浮的睡蓮，還 有善良的村民和他們的小屋，還 有教堂，還 有貢佈雷的一切和市鎮周圍的景物，全都顯出形跡，並且逼真而實在，大街小巷和花園都從我的茶杯中脫穎而出。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 摘錄 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 轉載 </tag>
            
            <tag> 小說 </tag>
            
            <tag> 意識流 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Time - Pink Floyd - The Dark Side of the Moon</title>
      <link href="/2022/12/29/time-lyric/"/>
      <url>/2022/12/29/time-lyric/</url>
      
        <content type="html"><![CDATA[<p>Having pored over the lyrics, I have these comments:</p><p>Nobody to show us the way, nobody to tell you when to run, no chance to catch up with the sun. It’s late and you’ve been getting closer to death.</p><p>So get home and see the rain. Paralyzed, missed out on the sunshine and at last forever wandering.</p><h2 id="links"><a class="markdownIt-Anchor" href="#links"></a> Links</h2><p><a href="https://www.youtube.com/watch?v=Qr0-7Ds79zo">YouTube</a> | <a href="https://en.wikipedia.org/wiki/Time_(Pink_Floyd_song)">Wikipedia</a></p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 音樂 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌詞 </tag>
            
            <tag> EN </tag>
            
            <tag> 搖滾 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【轉載】靜夜思變調</title>
      <link href="/2022/12/22/jingyesibiandiao/"/>
      <url>/2022/12/22/jingyesibiandiao/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>轉載一首好詩。</p><blockquote><p>故鄉，留下一段回憶，過去的我在現在的我在未來的我，縈繞，懷念。可惜故鄉，可恨昨天只隔數小時，卻比月還遙遠。</p><p>畢竟，一秒鐘的距離便是到宇宙毀滅的距離了。</p><p>生命是瞬間。</p></blockquote><h2 id="原文熊秉明-靜夜思變調"><a class="markdownIt-Anchor" href="#原文熊秉明-靜夜思變調"></a> 原文：熊秉明 ·《靜夜思變調》</h2><h3 id="一-序"><a class="markdownIt-Anchor" href="#一-序"></a> 一 序</h3><p>大詩人的小詩<br />從椽筆的毫端落出來<br />像一滴偶然<br />不能再小的小詩<br />而它已岸然存在<br />它已是我們少不了的<br />它在我們學母語的開始<br />在我們學步走向世界的開始<br />在所有的詩的開始<br />在童年預言未來成年的遠行<br />在故鄉預言未來遠行人的歸心<br />遊子將透過童年預約的鄉思<br />在月光裡俯仰悵望<br />於是聽見自己的聲音伴著土地的召喚<br />甘蔗田 棉花地 紅色的大河<br />外婆家的小橋石榴．．．．<br />織成一支魔笛的小曲</p><h3 id="二"><a class="markdownIt-Anchor" href="#二"></a> 二</h3><p>一個古老的詩國<br />有一個白髮的詩人<br />拈一片霜的月光<br />凝成一首小詩<br />給所有的孩子們唱<br />一代一代地唱<br />會須一飲三百杯<br />老詩人撈月去了<br />小詩留在月光裡悠揚<br />在故鄉悠揚<br />在他鄉悠揚</p><h3 id="三"><a class="markdownIt-Anchor" href="#三"></a> 三</h3><p>祖父的老花眼鏡邊<br />折射出菜油燈黃黃的火苗<br />床前明月光<br />疑是地上霜<br />祖父的花白鬍子裡<br />漏出嫋嫋烈草煙味的青煙<br />舉頭望明月<br />低頭思故鄉<br />爺爺，我會背了。」<br />眼鏡後面的眼角上有一點淚<br />鬍子後面的嘴裡沒有牙<br />孩子，玩去吧！」</p><h3 id="四"><a class="markdownIt-Anchor" href="#四"></a> 四</h3><p>床前明月光<br />疑是地 上霜<br />舉頭 望 望 明 明 月<br />低頭 思故 思故 思故鄉<br />床前月光<br />疑地上霜<br />舉頭明月<br />低頭思鄉<br />床前光<br />地上霜<br />望明月<br />思故鄉<br />月光<br />是霜<br />望月<br />思鄉<br />月<br />霜<br />望<br />鄉</p><h3 id="五"><a class="markdownIt-Anchor" href="#五"></a> 五</h3><p>姐姐 你還記得嗎？<br />在月光裡<br />你曾玲瓏地望<br />床前明月光<br />疑是．．．真是．．．<br />真是霜一樣的月光呵<br />後面的兩句呢？<br />我帶它們走了<br />走了半個世紀<br />走到沒有土瓜和雞棕的地方<br />沒有麥粑粑和過橋米線．．．．<br />舉頭望明月<br />低頭．．．舉頭．．．</p><h3 id="六"><a class="markdownIt-Anchor" href="#六"></a> 六</h3><p>床前明月光<br />疑是地上霜<br />祖父教的第一首唐詩<br />於是拍著雙手<br />踏著院子的石板<br />著迷地唱<br />明月光 地上霜<br />地上霜 明月光<br />孩子已作了祖父<br />過去的孩子在今天的祖父心裡<br />頑童一樣著迷地唱<br />思故鄉 思故鄉<br />思故鄉 思故鄉</p><h3 id="七"><a class="markdownIt-Anchor" href="#七"></a> 七</h3><p>月光裡的故鄉<br />月明瞭的故鄉<br />故鄉時的明月<br />故鄉思的月光<br />什麼時候起<br />迷作一片朦朧<br />鄉 即是 月<br />月 即是 鄉<br />迷迷 疑疑<br />望望 茫茫<br />注滿眼底<br />溢位眼外<br />月月鄉鄉<br />圓了的月啊<br />月了的鄉</p><h3 id="八"><a class="markdownIt-Anchor" href="#八"></a> 八</h3><p>在時間的那一頭<br />在世界的那一頭<br />拍著手 拉著手<br />孩子唱<br />望明月 問明月<br />月光光 明月鄉<br />在時間的這一頭<br />在世界的這一頭<br />舉頭 低頭<br />滿頭霜<br />滿頭霜<br />滿眼老花的月亮<br />滿面粼粼的月光</p><h3 id="九"><a class="markdownIt-Anchor" href="#九"></a> 九</h3><p>低頭思故鄉<br />馬鍋頭他們一定<br />還在橫斷山脈裡<br />橫斷著山的脊樑<br />高山的風和日敲他們的銅臉<br />水牛一定還在紅河水裡<br />輕盈地浮沉黑鐵的犄角<br />甘蔗的汁比紅河水更濃<br />煉成霜色的冰糖<br />每一個結晶的面都閃閃地唱<br />床前明月光</p><h3 id="十"><a class="markdownIt-Anchor" href="#十"></a> 十</h3><p>昨天母親來信說<br />我好 你好嗎？<br />我給母親回信<br />我好 您好嗎？<br />月亮是蒼白的<br />月亮不說話<br />故鄉比月<br />更遠 一倍</p><h3 id="十一"><a class="markdownIt-Anchor" href="#十一"></a> 十一</h3><p>疑是霜 疑是霜<br />悄然落在書頁上是一絲閃閃的白髮悄然<br />落在書頁上不再是青色的髮絲了那曾是<br />父親的白髮使我心驚的悄然落在書頁上<br />而今是我自己的白髮悄然落在書頁上而<br />今只有我自己的白髮了悄然落在書頁上．．<br />舉頭望 舉頭望</p><h3 id="十二"><a class="markdownIt-Anchor" href="#十二"></a> 十二</h3><p>低頭思故鄉<br />我已回去<br />我已回不去<br />我已不回去<br />我已在路上<br />秦時明月漢時關<br />我已渴斃<br />我已骨折<br />絲綢的路<br />駱駝、石頭和骷髏的路<br />床前明月光</p><h3 id="十三"><a class="markdownIt-Anchor" href="#十三"></a> 十三</h3><p>床前明月光<br />節節骨痛的床<br />沒有床的稻草墊<br />沒有稻草的泥地<br />沒有泥地的水門汀<br />水溼的枕頭<br />火熱的枕頭<br />沒有枕頭的<br />驚醒的失眠的<br />眼閃著月光<br />疑是地上霜</p><h3 id="十四"><a class="markdownIt-Anchor" href="#十四"></a> 十四</h3><p>舉頭望 舉頭望<br />中秋月從樓影后面探過來<br />圓了白淨的臉<br />圓了驚異的眼<br />咦 怎麼沒有月餅？<br />怎麼沒有栗子和梨？<br />怎麼沒有柿子和棗？<br />沒有紅的蠟燭？<br />沒有香爐和香？<br />連圓的桌子也沒有<br />握一卷太白詩集在背後<br />靜悄悄地<br />月亮看我<br />我看月亮</p><h3 id="十五"><a class="markdownIt-Anchor" href="#十五"></a> 十五</h3><p>好月光 好月光<br />唱一支歌兒吧<br />咱們唱 松花江上<br />唱咱們都會唱的<br />不行 不行<br />我不能唱 我不能唱<br />一唱聲音就嗚咽了<br />再唱嗓子就哽住了<br />三唱眼晴就什麼也看不見了<br />你們唱 我跟著<br />我的家．．．．<br />在．．．．在<br />在東北松花．．．<br />江上．．</p><h3 id="十六"><a class="markdownIt-Anchor" href="#十六"></a> 十六</h3><p>這是詩<br />這是一首詩<br />這是一首中國孩子學的<br />第一首中國詩<br />大家跟我念<br />床前明月光 疑是地上霜<br />舉頭望明月 低頭思故鄉<br />熟麥的鬈髮<br />海水的眼晴<br />比越女更白<br />琳琅錯亂的回聲<br />太白 大概 大笑了</p><h3 id="十七"><a class="markdownIt-Anchor" href="#十七"></a> 十七</h3><p>三個孩子到中國去了<br />兩個大學生一箇中學生<br />只會說小學生的中文<br />第一次見到北京的老祖母<br />獻上什麼禮物呢？<br />別忘了背一首中國詩<br />床前 明月光<br />疑是 地上霜<br />低頭 思 思 思<br />全家人都笑了<br />九十歲的老祖母<br />笑出眼淚來<br />用寬的袖口揩著</p><h3 id="十八"><a class="markdownIt-Anchor" href="#十八"></a> 十八</h3><p>我走<br />我跑<br />我停下來<br />我走<br />我跑<br />我停下來<br />孩子<br />你是幹什麼啊？<br />媽媽<br />月亮老跟著我</p><h3 id="十九"><a class="markdownIt-Anchor" href="#十九"></a> 十九</h3><p>七十歲的中國人<br />住在赫德森河畔<br />解開領帶<br />泡一杯清茶<br />──黃河之水天上來<br />一口鄉音未改<br />七十歲的中國人<br />放上電剃刀<br />顧盼兩鬢的白髮<br />疑是地上霜的白髮<br />三千丈<br />緣愁似個長<br />七十一歲的中國人<br />舉頭霜<br />低頭霜<br />黃河長<br />明月鄉<br />七十二歲<br />解開領帶<br />泡一杯清茶<br />黃河之水天上來<br />棄我去者不復回<br />七十三歲<br />三川雪滿魂飛苦<br />蜀道之難天梯石棧明月相鉤連<br />何茫然 催心肝<br />七十四 七十五<br />解開領帶<br />泡一杯黃河<br />朝如青絲不可留<br />亂我心者暮成雪<br />七十六 七十七<br />拿起電剃刀<br />斷水水更流<br />長相思 白雲間<br />長相思 彩雲間<br />七十八<br />黃河三千丈<br />何處是故鄉<br />朝辭去 不復回<br />七十九<br />白髮黃河天上來<br />奔流到海不復回<br />八十<br />不復回 不復回<br />黃河<br />黃河<br />天上 天上<br />不復回</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 詩歌 </tag>
            
            <tag> 轉載 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>高樓 幻夢 冰</title>
      <link href="/2022/12/21/tower-dream-ice/"/>
      <url>/2022/12/21/tower-dream-ice/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>去那意識模糊到與現實交織成如糨糊般粘稠一團的地方，看一看那座冰雪的迷宮。同樣的幻境，同樣的夢。反覆。</p><p>在不知何時，單手撐在桌上，光略顯陰暗。今日或許降了雪，冷風吹進暖氣中溫熱的室內。感覺有點悶。那就索性開窗吧！窗外的世界也沒想到那般蕭索了，路燈暗下，也幾乎見不得什麼了，只剩遠處的虛空中高樓頂上還亮著的些許紅光。但我的耳邊聽見了風的牧笛，風的薩克斯，風的交響樂。七月的原野上，遠方傳來的或許也是相似的聲音。日光滲到每一棵小草，給予大地無盡的能量。悠揚的笛聲從遠方飄來，勾引的我的魂魄。</p><p>憑窗佇立，看膩的風景，不過空蕩的街道和週而復始的交通燈。這個世界自己在運動。稀疏到幾乎沒有的車流，來到時還會細緻觀察車牌。許久之前，當我還是一個好奇的幼兒，我更會細緻地看，細緻地望，留心每一個細節。那時的光陰，幾乎都無法感知到流去的速度。如今卻今非昔比了，如今滄海卻以變為桑田了。</p><p>整日積攢下來的重負，沉重，痠痛，脹在我的腦中，堆積在我的前額，壓下我的雙眉，順著臉龐的線條，刺痛的頸椎，脊椎。之後一股股熱流湧動，我的大臂開始無力，我的小腿失去知覺，我的脊背不能承受而彎曲。痛苦地與疲憊對峙，穿過筋疲力盡的峭壁，來到寧靜與永恆的內心森林，直到握筆都似有些抖動。我如一位即將消逝為塵土的老者，精神即將消散的睡眠的幻夢中。或許夢是現實世界的暫時崩塌。畢竟當你閉上眼睛，當你與現實斷開一切的聯絡，起初還能感知到的呼吸和身體與棉被、床罩和那一系列柔和的有些滑溜溜的東西接觸的感覺，之後又如同肉體抽離了一樣的時候，你已經不再以平常的形式存在了。你不存在，你的精神去了另一個世界，幻想的世界。</p><p>眼前已經看不到什麼了，只剩下空洞的靜穆；耳邊不再有音樂，而是無盡的虛空。但我的精神是自由的，可以來往於世界上任何一個角落。我與世界上任何一個人，都建立了一種現實中敢都不敢想，也絕不可能建立的牢固的連結，似乎宇宙大爆炸前就在那裡了。是的，就在那裡。自由穿行，我被賦予了超越人類的能力。我分不清哪個是現實了。</p><p>眼前是北京香山的楓葉，紐約時代廣場的雪花，倫敦的泰晤士河上的遊船，香港的高樓。我發現我身處冰塊之中；我發現我以我幻想的樣子存在，一個本屬於我又不屬於我的軀體，一個本屬於我又不屬於我的形態。我發現我回到了生命誕生之前的地方，光產生的地方，回到了萬物起源的神聖殿堂。意識是流動的液體，思緒是漂流的楓葉，蕩起漣漪。在光的照耀下，意識的水中波光粼粼，蕩起水花。每一刻，都有一個人被照亮。他的精神被點亮，他的肉體被點亮，他被點亮。但這不是蘭亭，沒有流觴曲水的娛樂，更不會有古代的隱者。這是我們內心深處的地方，是我們的靈魂所居的地方，是我們自己又不是我們自己。</p><p>冰塊閃耀，封印了幾個世紀為被人發覺的勝過世界上任何意見雕塑作品的雕花。冰屋裡，透過晶瑩又朦朧的冰幕，隔絕又無比接近地走進她的生命，他的生命，你的生命，我的生命。我發現我是所有人，我發現我誰也不是。一個人睡著了便不再有記憶了，因而我感覺我從未存在過。是的，眼前是不真實的謊言。《波西米亞狂想曲》中，未曾被賦予生命的願景又何嘗不是一種解脫？可惜生命被賦予那刻，就無法挽回地註定了，註定了你的一切。走出冰屋，來到一邊在永恆之光下流淌不息的意識的河川，每一滴水都是鮮活的生命。這時想起，生命的過程是否是另一種水迴圈？逆流而上，卻發現這條河流綿延。這是一條天河，我永遠也達不到終點。</p><p>“嘿！”</p><p>背後有人在呼喚我？轉過身去，卻只見到模糊的人影。那是我？是過去的我？未來的我？是存在的我？不存在的我？那是我？冰在融化，幻夢在崩塌，冰屋在崩塌，水流在乾涸……倏地感覺手心中有一股熱流，額上滿是熱汗，眼前景象仍是虛無和現實的交織。雙腿漸漸恢復力量，但是支撐著的手臂已然麻木。這才發覺又回到窗前。</p><p>倚在窗上，這次，離外面的世界更近了，離裡面的世界更近了，但這種距離永遠不能量化。看向尋常的，現在又不尋常了。曾經有一段時光，甚至希望在遙遠的 2011年，失手墜落的自己真的墜落了。消失在自己的過往，如同月下漂浮的煙靄，畢竟是毫不痛苦的。如今卻太遲了，已經開啟了一趟前往終結的旅途，路途中想都不敢想那一無所有的大限已至的寧靜。但那也會是可怕的，就像在迷失的 2021，痛苦地徘徊在現實和虛幻，拿一本書連線起精神和肉體，不真實的世界，敵對的世界，變得和善。如果我不曾活過，周圍的一切或許都一如現在一樣運作。非也！至少我也改變了身邊的人吧。活著，生命燦爛。</p><p>指著天空，什麼也沒有指向。把窗戶開到最大，把音響上的悠揚的爵士樂開到最大！疾風！暴風！狂風！暴雪！暴雨！吹走我的靈魂！洗滌我的靈魂！救贖我的靈魂！我渴望飛向遠方，飛向平流層，飛出大氣層，飛到外太陽系，飛出宇宙的邊界！我的精神沒有邊界！放下自己的肉體，放下沉重的一切。在夢裡我什麼都能放下，在醒時我什麼都能放下！</p><p>但是夢醒了便不記得夢中事了，但是入夢了就不記得真實了。不過夢也無需要一種理由吧。</p><p>所以睡一覺，回到那個冰屋，什麼都有了。</p><p>所以醒一日，把冰屋放在心裡，什麼都有了。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 散文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RECAP2022: 流星雨</title>
      <link href="/2022/12/16/recap/"/>
      <url>/2022/12/16/recap/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>獻給 2022，和那錯過的英仙座流星雨。</p></blockquote><p>什麼時候才能在紛繁中尋回真正的自我？—— 可惜已經失去了光陰。險些忘記了今年是何年。</p><p>但是至少 2022 要在我的一生中留下痕跡。</p><p>久立窗前，空洞的夜空。清爽的山泉洗滌了我陰鬱中沉淪的靈魂。在父親上高中的地方，綠茵場上，苦苦等待流星雨。據說8月13號夜裡有英仙座流星雨。同一片夜空，同一個世界，不同的時空。那也是我將要作別故鄉的一天。</p><p>夜間，清涼的風，在這群山環抱的村落。幾天前，或在山泉水側垂釣，或在縣城夜市趕集。體態輕盈，行走如飛，來去匆匆。漸漸懂得《田園》中的樂趣，那跳動的音符正是我山行的步伐。只可惜那謝公已不再，也固然尋不到那登山的木鞋。村落的小巷邂逅多年前見過的人，停留在虛掩的院門，看那貓偷食吊掛的醃魚。在停電的日子裡，遠山的輪廓在星空中已經變得模糊，但記憶卻變得清晰。燒烤的薰香從千里之外，從數月之前遊蕩入我的鼻腔、口腔，刺激我的味蕾。</p><p>或許是在汽車上，看著長江三峽的萬噸貨輪，看碧雲藍天，看千里江山。而在火車上，望著遠去的平原，山谷，那幽靜的小徑和喧鬧的都市，水庫、太陽能板和乾涸的小河。空闊的世界！耳機中流淌出來的柴可夫斯基第一鋼琴協奏曲，遠行的這現代的人類奇蹟！自然奇蹟！</p><p>雨水擊打在窗上，夕陽斜照在車站的一角，層雲化身灰暗的三角，指向遙遠的天際。一切都如同離開上海的那天，從颱風逃離。突然告知朋友取消明日的騎車旅行。熟悉的路徑，就和今年二月一樣，也和去年二月一樣。走過蜿蜒的林間小道，沿著黃浦江，直上陸家嘴。世博源的火鍋？不小心用公筷嚐了一口滾燙的牛丸，卻惹你們一笑。冒泡的熱湯，溫暖，深情厚誼在其中昇華。下次當然會更小心！不知不覺竟與過去的你對話，卻不知道如今同學群卻陷入沉寂。畢竟大家都要踏上遠行的征途，何日是歸期？</p><p>幾日前，還在剪輯畢業影片。遠端指導錄製、演唱，擺好動作，調整姿態。卻不記得之前是自招、是中考。雷雨的那天，幾乎徹夜未眠，次日早要靠那濃茶。出考場的時候，頭暈目眩。</p><p>好在完全沒受影響，甚至超常發揮。收到錄取通知的那天，正從故鄉趕來。計劃未來，卻不知道初進校園，陌生的地方，甚至有些不習慣。從社恐，到如今向外邁出了幾步。新的一年要自信。</p><p>夜間逛校園，遠望天鵝湖對岸，確認是否有其他人。雨中漫步，把外套當成雨衣。或許只有我們會傻到這樣做。離譜。</p><p>在機房停課學習 OI，一週更五篇部落格。逐漸從疫情復甦的國家，重複的網課。今年三月，突然接到通知回家，卻是欣喜？自以為是認為可以很好利用時間。誰知開啟了摸魚的生活。也罷，不斷調整，欣賞古典音樂，在陽春三月的雨中用最大的音量播放那異國他鄉，來自紐約的爵士樂。又憶起時代廣場霓虹燈中的雪，可久遠的回憶已經變得朦朧。和同學拓展關係，絲毫不覺得臨近分別為時過晚。確實有些遺憾吧。但是返校之後，在清晨、黃昏的網約車上，每一種天空，每一個日子。也曾和司機交談，走近那些不一樣的人生。Life is tough. 沉溺在試卷中，卻清醒地看見明天——我離未來最近的一段時光。和你在網上打卡拍攝天空，可惜現在不知道你身處何方。</p><p>十二月的天空，有些許悽清。準備英才計劃，還是剛剛得知 NOIP 一等的訊息。臨近聖誕，或許在某個平行宇宙，在永恆的過去的 2021，還有一些人在夜間的校園長跑。或許望著校門外的燈火，會在寒風中拿出手機，播放那一曲 Merry Christmas，會大聲祝福：”馬上 2022 了，一切會更好的！“ 2021對我是痛苦的，但我確實有所得。</p><p>幸運的是，如今也應該會有這樣的聲音。Merry Christmas。</p><p>回到山間，記憶中的氣味逼近。是外婆。是外公夜間騎摩托回到山上的家，留下外婆給我們送行。是遠處已經遠到看不見的燈火亮起，親朋好友在農閒時刻歡聚。是院中的雛雞、豬羊。想起那個在農家小院裡，看著天空，亂按計算器的日子。</p><p>躺在鄉間某個高中的足球場上，嗅著草香，意識遊離。等待流星雨，痛恨沒把相機帶在身邊。一顆，兩顆，三顆……但只見得滿天星斗，似乎有什麼東西閃過，若隱若無。那天或許沒有流星雨，但眼前的映象模糊了，變成了一團，漸漸看不真切了。</p><p>醒來時在上海，2022年，12月，17日。</p><p>不知如何評價這一年，但是我將要改變了，但是我確實改變了。希望明年不要再把 2023 錯認成 2022。我存在過，每一年我都存在過。Carpe diem。</p><p>2023會更好。</p><p>Restart.</p><p>至少還會有流星雨。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 年度回顧 </tag>
            
            <tag> 散文 </tag>
            
            <tag> 情感 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>清夜</title>
      <link href="/2022/12/12/moonlight/"/>
      <url>/2022/12/12/moonlight/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>月起晚風拂，螢光碎火流；不知明朝復今夕。</p></blockquote><p>月升，微光照過灰色的十二月的天空。十二月了？可我的意識還停留在那個蟬鳴的六月。</p><p>門外有孩童在嬉戲；遠方的地鐵列車飛馳，發出空氣摩擦的空洞聲響；窗外昏黃的路燈仍然用橙黃的光將樹染成懷舊的顏色——這一切，像四月。池塘還是靜穆，那輪明月依舊懸在明朗的夜空。</p><p>九天之上或許有天宮？都說天上一日，地上十年。或許仙人也總是逍遙。也能想象，在遠方的故鄉，農夫或許剛剛回到土屋之中，嗅著空氣中帶著的泥土的香味，在冉冉升起的炊煙中休憩。雞犬相聞，微風吹過樹梢，遠山的巨大影子和繁星點點……蜿蜒的山路，還有車輛往來。引擎發出那種低沉的連續的聲響。山腳下，家家戶戶的燈亮起，家家戶戶的燈熄滅……</p><p>但那都不是我。記憶跟不上遺忘的步伐，時間的鄉愁卻見漸變得濃烈。我甚至記不起2021年。多少的過去在時光中淡去，但是那些人和事卻在遺忘中永恆。留不住的。</p><p>月光皎潔，星海盪漾，旋轉、流動。高壓線塔的輪廓依稀可辨，卻和夢的幻境交織結合。久遠的夏日，我曾望著遠山，那山的輪廓模糊。或許那是 2013，或許是 2015，和早已消散在時光裡的故人在山間漫步。甚至認為這是前世的記憶。熟悉的面容在時間裡溶解。</p><p>一顆明星劃過星野，遠處市中心的燈光依舊燦爛。在回鄉的火車上，我看到粉紅色、橙紅色漸變到深邃的夜的藍。遠行的高鐵列車上，我欣賞著晝的關閉，夜的開啟。群山、平原、天空、城市、鄉村都以讓人眼花繚亂的速度劃過眼前，連成一線。我要離了我的故鄉了。</p><p>那是在深秋，操場跑道鋪了一層金黃色的樹葉的地毯。夜空清澈，一群學生在長跑。深紅色跑道、淺黃色的教學樓、深棕色的長椅和一排綠色的松樹，在黑夜中卻顯出一個顏色。校門外的燈火被綠樹的高牆阻隔。但透過升騰著的吸氣、呼氣的霧靄，少年的歌聲嘹亮。如今或許看不到這樣的學生了？當年，這樣的夜晚卻不啻那一天。或許很快，我也終說不去那些人的姓名。</p><p>錯亂的時空。</p><p>月升，水汽中迷濛的窗，映著我的面容。給我開一壺良藥，復活我逝去的時光。我的過去已死，如果再來，我想我仍會這樣選擇。</p><p>也罷，往事如煙。</p><blockquote><p>後記：分了兩天寫，所以有銜接不連貫（</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 散文 </tag>
            
            <tag> 情感 </tag>
            
            <tag> 天氣日記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>割點 Tarjan 演算法</title>
      <link href="/2022/12/03/cut-vertex/"/>
      <url>/2022/12/03/cut-vertex/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>最近學習圖論，寫篇題解記錄一下。</p><h2 id="定義"><a class="markdownIt-Anchor" href="#定義"></a> 定義</h2><ul><li>對於一個無向圖，如果把一個點刪除後這個圖的極大連通分量數增加了，那麼這個點就是這個圖的割點（又稱割頂）。</li></ul><p>這篇部落格主要介紹，Tarjan 演算法用於求 割點。</p><h2 id="割點"><a class="markdownIt-Anchor" href="#割點"></a> 割點</h2><p>Tarjan 演算法，記錄 節點訪問時間戳 <code>dfn</code>，節點能夠回溯到的最早的點的時間戳 <code>low</code>。</p><p>對於某一點：</p><ol><li>如果這個點是根節點，且有兩個以上與它相連的連通分量，那這個點就是割點。</li><li>如果某個點後繼是一個連通分量，而這個點不是根節點，那這個點是割點。</li></ol><h3 id="第一種情況"><a class="markdownIt-Anchor" href="#第一種情況"></a> 第一種情況</h3><p>我們需要記錄根節點 <code>fa</code>，在遍歷的時候，如果重複訪問到了 <code>fa</code>，說明找到了 <code>fa</code> 下面的一個連通分量。</p><h3 id="第二種情況"><a class="markdownIt-Anchor" href="#第二種情況"></a> 第二種情況</h3><p>設當前點 <code>s</code>，對於訪問的下一個節點 <code>y</code>：</p><p>如果 <code>low[y] &gt;= dfn[s]</code>，說明這個點下面有一個連通分量。</p><p>注：這裡類似於 Tarjan 求 SCC 時，我們所做的 <code>min(low[s],dfn[y])</code>。</p><h3 id="程式碼"><a class="markdownIt-Anchor" href="#程式碼"></a> 程式碼</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> fa)</span></span>&#123;</span><br><span class="line">    dfn[s] = low[s] = ++cc;</span><br><span class="line">    <span class="type">int</span> child = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = head[s]; i!=<span class="number">-1</span>; i=NDS[i].next)&#123;</span><br><span class="line">        <span class="type">int</span> y = NDS[i].to;</span><br><span class="line">        <span class="keyword">if</span>(!dfn[y])&#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(y,fa);</span><br><span class="line">            low[s] = <span class="built_in">min</span>(low[s], low[y]); <span class="comment">// 回溯後更新</span></span><br><span class="line">            <span class="keyword">if</span>(low[y]&gt;=dfn[s] &amp;&amp; s != fa) <span class="comment">// 情況 2</span></span><br><span class="line">                cut[s] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(s==fa) <span class="comment">// 情況 1 計數</span></span><br><span class="line">                child++;</span><br><span class="line">        &#125;</span><br><span class="line">        low[s] = <span class="built_in">min</span>(low[s], dfn[y]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(child&gt;=<span class="number">2</span>&amp;&amp;s==fa)&#123;</span><br><span class="line">        cut[s] = <span class="number">1</span>; <span class="comment">// 情況 1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
            <tag> 圖論 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P3147 USACO16OPEN 262144 P 題解</title>
      <link href="/2022/11/23/P3147-262144P/"/>
      <url>/2022/11/23/P3147-262144P/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>DP 系列。</p><h2 id="題面"><a class="markdownIt-Anchor" href="#題面"></a> 題面</h2><p>看題，<a href="https://www.luogu.com.cn/problem/P3147">Luogu</a></p><p>合併相鄰的相同數字，變成數字加一。求獲得的最大值。</p><h2 id="思考"><a class="markdownIt-Anchor" href="#思考"></a> 思考</h2><p>最初想到的是基礎的區間 DP，不做解釋：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> len = <span class="number">2</span>; len&lt;=N; len++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i+len<span class="number">-1</span>&lt;=N; i++)&#123;</span><br><span class="line">        <span class="type">int</span> y = i+len<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k = i; k&lt;y; k++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(DP[i][k] == DP[k<span class="number">+1</span>][y])&#123;</span><br><span class="line">                DP[i][y] = <span class="built_in">max</span>(DP[i][y], DP[i][k] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, DP[i][y]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; ans &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>但是 $ 2 \leq n \leq 262144 $ ，顯然會 MLE。</p><h2 id="最佳化"><a class="markdownIt-Anchor" href="#最佳化"></a> 最佳化</h2><p>借鑑思路，我們發現可以使用類似倍增的方法去做。</p><p>用狀態 <code>f[i][j]</code> 表示 合成之後結果為 i，右端點為 j 的區間的左端點位置，如果 值為 0 即 不可行。</p><p>因為題目要找兩個相鄰相等的區間，合成。有：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f[i][j] = f[i<span class="number">-1</span>][f[i<span class="number">-1</span>][j]];</span><br><span class="line"></span><br><span class="line">把 f[i][j] 拆分成兩個能合成為 i<span class="number">-1</span> 的區間</span><br></pre></td></tr></table></figure><p>即</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">                 f[i<span class="number">-1</span>][j]</span><br><span class="line">    |------&lt;i<span class="number">-1</span>&gt;-----|----&lt;i<span class="number">-1</span>&gt;-----|</span><br><span class="line">    j                      f[i<span class="number">-1</span>][f[i<span class="number">-1</span>][j]] </span><br><span class="line"></span><br><span class="line">如果 f[i<span class="number">-1</span>][j] 或 f[i<span class="number">-1</span>][f[i<span class="number">-1</span>][j]] 不成立，f[i][j] 就不成立，即轉移為 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>那如何表示結果？</p><p>記錄 <code>ans</code>，如果 <code>f[i][j]</code> 可行，就更新 <code>ans</code>。因為 <code>i</code> 遞增，所以不需要 <code>max</code> 操作。</p><p>得到</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">2</span>; i&lt;=<span class="number">58</span>; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j&lt;=N; j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!DP[i][j])&#123;</span><br><span class="line">            DP[i][j] = DP[i<span class="number">-1</span>][DP[i<span class="number">-1</span>][j]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(DP[i][j])&#123;</span><br><span class="line">            ans = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意我們倍增合併，所以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mn>262144</mn><mo>+</mo><mn>40</mn><mo>=</mo><mn>58</mn></mrow><annotation encoding="application/x-tex">log_2{262144} + 40 = 58</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">2</span><span class="mord">6</span><span class="mord">2</span><span class="mord">1</span><span class="mord">4</span><span class="mord">4</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">8</span></span></span></span> 是可能獲得的最大值。</p><h3 id="初始化"><a class="markdownIt-Anchor" href="#初始化"></a> 初始化</h3><p>顯然不合並是可行的，所以在輸入的時候，初始化</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i&lt;=N; i++)&#123;</span><br><span class="line">    <span class="type">int</span> in;</span><br><span class="line">    cin &gt;&gt; in;</span><br><span class="line">    DP[in][i] = i<span class="number">+1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>關於 <code>i+1</code>：為了避免區間重複，我們 <code>f[i][j]</code> 表示的區間是左閉右開區間，所以右端點是 <code>i+1</code></p><h2 id="小結"><a class="markdownIt-Anchor" href="#小結"></a> 小結</h2><p>這道題是區間 DP 狀態最佳化，DP 學習之路漫漫，還需要多加練習。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
            <tag> DP </tag>
            
            <tag> 區間 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P3354 Riv 河流 題解</title>
      <link href="/2022/11/22/riv-p3354/"/>
      <url>/2022/11/22/riv-p3354/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>最近在練樹形 DP，正好看到 <a href="https://www.luogu.com.cn/problem/P3354">這一道</a> 虛標的紫題，但本蒟蒻不會寫，想出來了便記錄一下</p><h2 id="題面-思考"><a class="markdownIt-Anchor" href="#題面-思考"></a> 題面 &amp; 思考</h2><p>先看題面，一顆有根樹，選定 k 個節點作為 ”伐木場“，求運送木料最小費用。注意木料費用是 <code>dis * wood</code>。</p><p>最開始想到簡單的樹形揹包，狀態轉移方程：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i][k] = <span class="built_in">min</span>(f[j][s] + cost, f[i][k]);</span><br></pre></td></tr></table></figure><p>但是注意到，如果某個後代節點如果是伐木場，cost 不需要計算，所以狀態中還需要儲存後代的伐木場情況。</p><p>但是後代中鋸木廠不止一個。考慮到樹有唯一的父親，且同一深度祖先唯一，可以記錄最近的伐木場祖先，作為狀態的一部分。</p><p>有 <code>f[i][j][k]</code> 即 i 節點 最近的伐木場祖先為 j，後代（不算自己）有 k 個是伐木場。</p><p>但是由於 f 自己也可能是伐木場，轉移方程不同，需要分類討論，於是改成：<code>f[i][j][k][0/1]</code> 其中 0 代表自己<strong>不是</strong>伐木場， 1 表示自己<strong>是</strong>伐木場。</p><h2 id="狀態轉移方程"><a class="markdownIt-Anchor" href="#狀態轉移方程"></a> 狀態轉移方程</h2><p>因為我們需要列舉祖先，在 DFS 時需要記錄 Fa 陣列：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DFS 開始時：fa[++tot] = x;</span><br><span class="line"></span><br><span class="line">結束時：tot--;</span><br></pre></td></tr></table></figure><p>簡單記錄祖先 stack。</p><p>回溯後，對於當前節點 <code>x</code> 和 子節點 <code>y</code> 每個祖先 <code>ff</code>：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">先對每個 k 賦初值，對於每種伐木場個數 l：</span><br><span class="line">f[x][ff][l][<span class="number">0</span>] += f[y][ff][<span class="number">0</span>][<span class="number">0</span>]; --&gt; 當前節點不是伐木場，子節點 y 最近伐木場為 l，對任意 f，賦最大值，即 子結點中沒有伐木場。</span><br><span class="line"></span><br><span class="line">f[x][ff][l][<span class="number">1</span>] += f[y][x][<span class="number">0</span>][<span class="number">0</span>]; --&gt; 當前節點是伐木場，子節點 y 最近伐木場為 當前節點，對任意 f，賦最大值，即 子結點中沒有伐木場。</span><br></pre></td></tr></table></figure><p>然後就是樹形揹包：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f[x][ff][l][<span class="number">0</span>] = <span class="built_in">min</span>(f[x][ff][l][<span class="number">0</span>], f[x][ff][l-s][<span class="number">0</span>] + f[y][ff][s][<span class="number">0</span>]); --&gt; 當前節點不是伐木場，對 y 節點分配 s 個伐木場個數</span><br><span class="line">f[x][ff][l][<span class="number">1</span>] = <span class="built_in">min</span>(f[x][ff][l][<span class="number">0</span>], f[x][ff][l-s][<span class="number">1</span>] + f[y][x][s][<span class="number">0</span>]); --&gt; 當前節點是伐木場，對 y 節點分配 s 個伐木場個數</span><br><span class="line"></span><br><span class="line">唯一的不同是 y 節點最近祖先為 x</span><br></pre></td></tr></table></figure><p>注意在列舉 l 時，由於是01揹包，需要倒過來列舉，不然狀態計算會疊加。（很容易理解）</p><p>做完了？好像還差一個 cost！</p><p>考慮到 祖先節點 <code>ff</code> cost 的貢獻，因為是 當前節點 W 乘以 到 <code>ff</code> 的總距離！</p><p>需要計算總距離，維護 <code>dep</code> 陣列，即當前節點到根節點距離，即可！很容易理解。<code>ff</code> 到 <code>x</code> 的距離就是 <code>dep[x] - dep[ff]</code></p><p>對於當前節點 <code>x</code> 每一個祖先 <code>ff</code>：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(l&gt;=<span class="number">1</span>)&#123; --&gt; 因為 l 需要 <span class="number">-1</span> ，要分類討論。</span><br><span class="line">    f[x][ff][l][<span class="number">0</span>] = <span class="built_in">min</span>(f[x][ff][l][<span class="number">0</span>] + W[x] * (dep[x]-dep[ff]), f[x][ff][l][<span class="number">1</span>]);</span><br><span class="line">    合併 <span class="number">0</span> 和 <span class="number">1</span>，因為回溯之後，<span class="number">1</span> 的狀態不再被使用，便於下一步計算。</span><br><span class="line">    <span class="number">-1</span> 是因為上文 f[x][ff][l][<span class="number">1</span>] = <span class="built_in">min</span>(f[x][ff][l][<span class="number">0</span>], f[x][ff][l-s][<span class="number">1</span>] + f[y][x][s][<span class="number">0</span>]); 時，s+l-s = l 但是當前節點也是伐木場，所以狀態更新是 l<span class="number">+1</span> 的，要 <span class="number">-1</span> 獲取正確結果</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    l = <span class="number">0</span> 時，當前節點不可能為伐木場，直接新增到 ff 增加的貢獻</span><br><span class="line">    f[x][ff][l][<span class="number">0</span>] += W[x] * (dep[x]-dep[ff]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>這裡再來聊一聊合併。為了便於討論，上文揹包轉移的時候，我們沒有考慮 <code>y</code> 的 1 的情況，而是在每次 <code>y</code> 回溯時 合併 0 和 1。這有點類似於滾動陣列？回溯後 <code>0</code> 不再表示之前的意義，而是我們最初設計的狀態：i 節點 最近的伐木場祖先為 j，後代（或自己）有 k 個是伐木場！</p><h2 id="程式碼"><a class="markdownIt-Anchor" href="#程式碼"></a> 程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> to, next, d;</span><br><span class="line">&#125; NDS[<span class="number">201</span>];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> head[<span class="number">201</span>], vis[<span class="number">201</span>];</span><br><span class="line"><span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> W[<span class="number">201</span>];</span><br><span class="line"><span class="type">int</span> tot = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> d)</span> </span>&#123;</span><br><span class="line">    NDS[cnt].to = b;</span><br><span class="line">    NDS[cnt].next = head[a];</span><br><span class="line">    NDS[cnt].d = d;</span><br><span class="line">    head[a] = cnt++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> fa[<span class="number">201</span>];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> f[<span class="number">201</span>][<span class="number">201</span>][<span class="number">52</span>][<span class="number">2</span>];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> dep[<span class="number">201</span>];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> n, k;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    fa[++tot] = x;</span><br><span class="line">    vis[x] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = head[x]; i != <span class="number">-1</span>; i = NDS[i].next) &#123;</span><br><span class="line">        <span class="type">int</span> y = NDS[i].to;</span><br><span class="line">        <span class="keyword">if</span> (vis[y]) <span class="keyword">continue</span>;</span><br><span class="line">        dep[y] = dep[x] + NDS[i].d;</span><br><span class="line">        <span class="built_in">dp</span>(y);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = tot; j &gt;= <span class="number">1</span>; j--) &#123;</span><br><span class="line">            <span class="type">int</span> ff = fa[j];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> l = k; l &gt;= <span class="number">0</span>; l--) &#123;</span><br><span class="line">                f[x][ff][l][<span class="number">0</span>] += f[y][ff][<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">                f[x][ff][l][<span class="number">1</span>] += f[y][x][<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> s = l; s&gt;=<span class="number">0</span>; s--)&#123;</span><br><span class="line">                    f[x][ff][l][<span class="number">0</span>] = <span class="built_in">min</span>(f[x][ff][l][<span class="number">0</span>], f[x][ff][l-s][<span class="number">0</span>] + f[y][ff][s][<span class="number">0</span>]);</span><br><span class="line">                    f[x][ff][l][<span class="number">1</span>] = <span class="built_in">min</span>(f[x][ff][l][<span class="number">1</span>], f[x][ff][l-s][<span class="number">1</span>] + f[y][x][s][<span class="number">0</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= tot; j++) &#123;</span><br><span class="line">        <span class="type">int</span> ff = fa[j];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> l = k; l &gt;= <span class="number">0</span>; l--) &#123;</span><br><span class="line">            <span class="keyword">if</span>(l&gt;=<span class="number">1</span>)&#123;</span><br><span class="line">                f[x][ff][l][<span class="number">0</span>] = <span class="built_in">min</span>(f[x][ff][l][<span class="number">0</span>] + W[x] * (dep[x]-dep[ff]), f[x][ff][l<span class="number">-1</span>][<span class="number">1</span>]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                f[x][ff][l][<span class="number">0</span>] += W[x] * (dep[x]-dep[ff]);</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//            cout &lt;&lt; x &lt;&lt; &quot; &quot;&lt;&lt;ff &lt;&lt; &quot; &quot;&lt;&lt; l &lt;&lt; &quot; &quot; &lt;&lt; f[x][ff][l][0] &lt;&lt; &quot; &quot; &lt;&lt; endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    cout &lt;&lt; dep[x] &lt;&lt; endl;</span></span><br><span class="line">    tot--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Type your code here</span></span><br><span class="line">    <span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="built_in">sizeof</span>(head));</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> w, v, d;</span><br><span class="line">        cin &gt;&gt; w &gt;&gt; v &gt;&gt; d;</span><br><span class="line">        W[i] = w;</span><br><span class="line">        <span class="built_in">add</span>(i, v, d);</span><br><span class="line">        <span class="built_in">add</span>(v, i, d); <span class="comment">// 鏈式前向星</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dp</span>(<span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; f[<span class="number">0</span>][<span class="number">0</span>][k][<span class="number">0</span>] &lt;&lt; endl; <span class="comment">// 輸出結果，注意是 合併後，所以是 0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
            <tag> DP </tag>
            
            <tag> 樹 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>馬拉車演算法</title>
      <link href="/2022/11/20/manacher/"/>
      <url>/2022/11/20/manacher/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>最近在學習馬拉車演算法，簡單記錄一下心得。（如有疏漏，請指出</p><p>先看 <a href="https://www.luogu.com.cn/problem/P3805">模板題</a> ，要求最長迴文串的長度。</p><p>首先思考樸素演算法，顯然是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ，無法透過。而馬拉車演算法能將時間複雜度最佳化到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>。</p><h2 id="性質"><a class="markdownIt-Anchor" href="#性質"></a> 性質</h2><ul><li>對於一個迴文字串，必然有一個對稱中心，在對稱中心兩側的部分均全等。</li><li>一個迴文字串對稱之後得到的一定也是迴文字串<br />即 aba <strong>x</strong> aba<ul><li>但是對於奇數、偶數長度的迴文字串，這個對稱中心可能是字元，也可能在兩個字元中間。<br />如：ab <strong>|</strong> ba, a <strong>b</strong> a</li></ul></li></ul><p>所以考慮，在兩個字元中間都插入隔板 <code>#</code>，即 <code>abba</code> 變成 <code>#a#b#b#a#</code>。原長度為 <code>n</code> 的字串，增加 <code>n+1</code> 隔板，長度變成 <code>2n+1</code> 必然是奇數，方便統計。</p><h2 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h2><p>馬拉車演算法，即記錄一直最長迴文子串區間，對樸素演算法進行最佳化。</p><p>因為是樸素演算法兩側向外拓展，隔板對判斷迴文無影響。<code>p[i]</code> 陣列儲存以 <code>str[i]</code> 為對稱中心的迴文字串半徑長度。半徑長度中計算了隔板個數，所以得到的就是迴文字串長度。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, l = <span class="number">0</span>, r = <span class="number">-1</span>;i&lt;s<span class="number">2.</span><span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">    <span class="type">int</span> k = (i&gt;r)? <span class="number">1</span> : <span class="built_in">min</span>(p[l+r-i], r-i<span class="number">+1</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">0</span> &lt;= i-k &amp;&amp; i+k&lt;s<span class="number">2.</span><span class="built_in">size</span>() &amp;&amp; s2[i-k]==s2[i+k])&#123;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">    p[i] = --k; <span class="comment">// 注意最後一次迴圈會對加上一個 1</span></span><br><span class="line">    <span class="keyword">if</span>(i+k&gt;r)&#123;</span><br><span class="line">        l = i-k;</span><br><span class="line">        r = i+k;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>先記錄 <code>i</code>，列舉每個對稱中心，記錄 <code>l</code> 和 <code>r</code> 即目前最長迴文字串的左右端點。<code>k</code> 則是目前半徑長度。</p><p>演算法主體就是樸素演算法，向左右兩端拓展。</p><p>考慮最佳化。如果<code>i</code>處在一個迴文子串中，因為對稱性，可以得到與<code>i</code>對稱的點<code>j</code>的最長迴文串長度。因為<code>i</code>不斷增加，對稱的點的座標一定小於<code>i</code>即已經更新過。</p><p>由於上文推斷的性質，迴文子串可以對稱得到。注意單個字元也可以考慮成一個迴文子串。所以 <code>k</code> 可以從 之前的 <code>p[j]</code> 開始計算。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(設 x 表示 [l,r] 對稱中心，j 就是 i 關於 x 的對稱點)</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 案例1</span><br><span class="line">l       r</span><br><span class="line"><span class="section">#a#b#b#a#</span></span><br><span class="line">  ^ ^ ^</span><br><span class="line">  j x i</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> 案例2</span><br><span class="line">l     r</span><br><span class="line"><span class="section">#a#b#a#b#a#b#a#</span></span><br><span class="line">   ^   ^   ^</span><br><span class="line">   j   x   i</span><br><span class="line"></span><br><span class="line">手推方便理解</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然後考慮如何計算 <code>j</code>，因為中點座標公式，得到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>l</mi><mo>+</mo><mi>r</mi></mrow><mn>2</mn></mfrac><mo>=</mo><mfrac><mrow><mi>i</mi><mo>+</mo><mi>j</mi></mrow><mn>2</mn></mfrac><mo>=</mo><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">\frac{l+r}{2} = \frac{i+j}{2} = mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.252772em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.907772em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span></span></span></span> ，得到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mi>l</mi><mo>+</mo><mi>r</mi><mo>−</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">j = l+r-i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span>。</p><p>但是因為確定區間，且偶數情況存在。所以還應判斷 <code>j</code> 是否在區間內。</p><p>而如果不在區間內，很顯然應該從<code>1</code>開始列舉。</p><p>所以得到：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> k = (i&gt;r)? <span class="number">1</span> : <span class="built_in">min</span>(p[l+r-i], r-i<span class="number">+1</span>);</span><br></pre></td></tr></table></figure><p>每次更新 <code>l</code> <code>r</code> 區間長度即可。</p><h2 id="ac-code"><a class="markdownIt-Anchor" href="#ac-code"></a> AC Code</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> p[<span class="number">110000001</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Type your code here</span></span><br><span class="line">    string s1;</span><br><span class="line">    cin &gt;&gt; s1;</span><br><span class="line">    string s2;</span><br><span class="line">    s<span class="number">2.</span><span class="built_in">resize</span>(s<span class="number">1.</span><span class="built_in">size</span>()*<span class="number">2</span><span class="number">+4</span>);</span><br><span class="line">    s2[<span class="number">0</span>] = <span class="string">&#x27;~&#x27;</span>;</span><br><span class="line">    s2[<span class="number">1</span>] = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, j=<span class="number">2</span>; i&lt;s<span class="number">1.</span><span class="built_in">size</span>(); i++, j+=<span class="number">2</span>)&#123;</span><br><span class="line">        s2[j] = s1[i];</span><br><span class="line">        s2[j<span class="number">+1</span>] = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, l = <span class="number">0</span>, r = <span class="number">-1</span>;i&lt;s<span class="number">2.</span><span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">        <span class="type">int</span> k = (i&gt;r)? <span class="number">1</span> : <span class="built_in">min</span>(p[l+r-i], r-i<span class="number">+1</span>);</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">0</span> &lt;= i-k &amp;&amp; i+k&lt;s<span class="number">2.</span><span class="built_in">size</span>() &amp;&amp; s2[i-k]==s2[i+k])&#123;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">        k--;</span><br><span class="line">        p[i] = k;</span><br><span class="line">        <span class="keyword">if</span>(i+k&gt;r)&#123;</span><br><span class="line">            l = i-k;</span><br><span class="line">            r = i+k;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="built_in">max</span>(ans,p[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="小結"><a class="markdownIt-Anchor" href="#小結"></a> 小結</h2><p>馬拉車演算法實用且容易理解，但熟練掌握還需要練習。</p><p><a href="https://www.luogu.com.cn/problem/P4555">作業 | 最長雙迴文串</a></p>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
            <tag> 模版 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>夜雨</title>
      <link href="/2022/11/17/rain-at-night-1/"/>
      <url>/2022/11/17/rain-at-night-1/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>太久沒更部落格了，別來無恙</p><blockquote><p>2020.11.16 日夜雨有感，18日記</p></blockquote><p>夜雨一直下，下在這小城的一隅。</p><p>從廣場走出，漆黑一片，不遠處卻是車水馬龍，彷彿隔了一個世界。雨傘下，近乎看不清的霓虹漸明瞭。但此刻我只見到微光下如絲的雨和它有節奏地擊打在傘面上的聲音。</p><p>這是冬日的雨，路旁佇立，晶瑩的雨點散在大衣的絨毛上，形成了彩色的淚珠。我知道這和去年此刻的景一樣。佇立，長嘆，冉冉升起的白色霧靄是對這喧囂的叛逆。</p><p>風起，微寒，但雨下如同淚漣漣，不知何時終了。</p><p>上了車，向車後望去，移動的燈火與車流、人流，在夜的深邃中，形成紅色的流動的絲綢飄帶。車窗外的世界總是呈現懷舊的昏黃，而這生活的千篇一律著實讓人麻木。在自己的熱愛織成的繭中窒息，在對舊日的追憶中迷失。西西弗斯式地在單調中沉淪，無可救藥，我親手造成了自我的慢性自殺。</p><p>腦海中湧動的昨日，如同白紙，毫無意義。微寒，放鬆，我似乎又找回了去年此刻的心境。身體卻是輕盈，御風而行，泠然善也。我知道過去成就今日，而此刻我仍然陷入迷茫卻清醒的疊加態，是迴圈往復的輪迴的孤獨。</p><p>窗外的雨一如去年、前年、漸漸被忘卻的過往，落地就無法挽回的過往。那些，我已經找不到了，於是只能嘆息。這是人生最大的 BUG，過去的就不能再來，經歷就是一種失去。</p><p>人生。</p><p>改變？</p><p>一切盡在車窗外夜雨的緘默裡。</p><p>而我。</p><p>我還是我嗎？</p><p>這些話，何止今日說起過呢？</p><p>換一種思維方式，換一種生活，換一種人生，突破過去的繭，重獲新生。</p><p>人生不再千篇一律。真正的自我解放。</p><p>但夜雨不會停。因為沒有辦法讓它停下來。</p><p>但天亮了就會是新的一天。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 散文 </tag>
            
            <tag> 情感 </tag>
            
            <tag> 天氣日記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>層霧</title>
      <link href="/2022/11/10/the-fog-1/"/>
      <url>/2022/11/10/the-fog-1/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>花非花，霧非霧。夜半來，天明去。來如春夢幾多時，去似朝雲無覓處。</p></blockquote><p>今晨，上海下著一場大雨，天色陰沉。窗上蒙了一層水汽，更遠處便是層層霧靄之下的昔日無比熟悉的河川景緻。</p><p>出門。雨敲擊在雨傘上發出有節奏的聲音，四周也有些許走著的行人。但這些都離我太遠了。雨帶給我的只有那本就屬於我的失意。</p><p>回想 2020 到現在，時光匆匆，幾乎不能感知時光的流逝。但它終究還是溜走了！而且似乎在一瞬間！舊日的一幕幕，如今還在疾速流去的時光之河。我想讓它停下來，是的一定要停下來。反覆思索，琢磨，這樣在低沉中的迴圈是否是生命的本質，詰問我們是否真的有能力改變我們的未來，改變命運的走向。或許掌握僅僅是自我麻醉。我們或許從未掌控過什麼。也許我們僅僅是回憶，也許我們從未存在，也許我們存在過，也許眼前的一切都是虛幻。沒有人知道答案。</p><p>層霧遮蓋住眼前的道路，看向四周的人。我總覺得陌生，而無所適從，總覺得不安。畢竟在層霧中的人，找不到方向。我好像從來都沒有得到內心深處的滿足，從未有過，在短暫的逝去的歲月裡。未來也不會有吧？畢竟我們沒有能力決定我們的來去，甚至連自己最基本的屬性都不能決定，沒有能力。我們的開場都是天命。</p><p>到了。站立在燈光微弱的走廊裡，四周是一片空虛。時間太早了，沒有什麼人。</p><p>人生是這樣嗎？逝去的歲月是這樣嗎？</p><p>“花非花，霧非霧。夜半來，天明去。來如春夢幾多時，去似朝雲無覓處。”</p><p>也許是我沉溺在對無意義的追索中，或者僅僅是過去的痛苦太愉快了，又或者是我已經被單調麻醉？生活最初的樣子？</p><p>忽然來了兩個孩童，蹦起來按下電燈開關。</p><p>眼前一片明朗，就像昨日的陽光。</p><p>”也許明天也是這樣。“</p><p>誰知道呢？但是 C’est la vie.</p><p>層霧，……</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 散文 </tag>
            
            <tag> 情感 </tag>
            
            <tag> 天氣日記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>從愚人節玩笑到真的玩笑(bushi): 淺談 lsnotes</title>
      <link href="/2022/04/14/lsnotes/"/>
      <url>/2022/04/14/lsnotes/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>離了個大譜 (不過這個想法挺好的</p><h2 id="想法"><a class="markdownIt-Anchor" href="#想法"></a> 想法</h2><p>愚人節本來是開玩笑的，結果發現，挺有用。笑死</p><p>前幾天和朋友討論，說要給每個目錄加個提示語，<code>ls</code> <code>pwd</code> <code>cd</code> 這些命令時顯示出來。</p><p>e.g.:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">The place <span class="built_in">where</span> I code!</span><br><span class="line">---</span><br><span class="line">Demo  OI  Playground  Projects</span><br></pre></td></tr></table></figure><p>這樣就解決了，目錄那麼多，自己甚至都忘了這個幹啥了的情況。當然，還有很多其他的用法，比如可以在 <code>.lsnotes</code> 中顯示 build 方式。</p><h2 id="概況"><a class="markdownIt-Anchor" href="#概況"></a> 概況</h2><p><code>lsnotes</code> 是個<s>水專案</s>，目前只支援純文字顯示（未來會加上 Markdown 解析，短時間內先鴿了。</p><p>就目前的程式碼量而言，小學生都會寫…</p><h2 id="後續"><a class="markdownIt-Anchor" href="#後續"></a> 後續</h2><p><a href="https://github.com/MrWillCom">MrWillCom</a> 又做了一個更強的 <code>lsnotes</code> 即 <a href="https://github.com/MrWillCom/lnn">lnn</a>。</p><p>這個專案功能簡單，但實用，未來不怎麼會維護了。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 程式設計 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
            <tag> 專案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>I made my own Hexo theme</title>
      <link href="/2022/03/22/hexo-theme-paperwhite/"/>
      <url>/2022/03/22/hexo-theme-paperwhite/</url>
      
        <content type="html"><![CDATA[<p>See the changes in my blog! I’m proud to introduce <code>hexo-theme-paperwhite</code> to you all! Now in beta stage! Check it on <a href="https://github.com/aeilot/hexo-theme-paperwhite">GitHub</a></p><span id="more"></span><h2 id="whats-that"><a class="markdownIt-Anchor" href="#whats-that"></a> What’s that?</h2><p><code>hexo-theme-paperwhite</code> is a minimalist theme for Hexo. I made it to fulfill my own needs, including a pure home page and the serif font. I am a huge fan of minimalist designs!</p><h2 id="how-to-configure-the-theme"><a class="markdownIt-Anchor" href="#how-to-configure-the-theme"></a> How to configure the theme?</h2><p>It’s simple. Actually just no more than 10 lines of code! Here’s the <code>_config.paperwhite.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">writing:</span> <span class="string">/</span></span><br><span class="line">  <span class="string">who</span> <span class="string">am</span> <span class="string">I?:</span> <span class="string">/about</span></span><br><span class="line"></span><br><span class="line"><span class="attr">giscus:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">aeilot/en</span></span><br></pre></td></tr></table></figure><h2 id="notes"><a class="markdownIt-Anchor" href="#notes"></a> Notes</h2><p>Sorry to tell that I failed… Now I’ve completely switched to <a href="https://github.com/probberechts/hexo-theme-cactus">hexo-theme-cactus</a> for lack of Web Front-end developing experience.</p>]]></content>
      
      
      <categories>
          
          <category> EN | Project </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Open Source </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>題解 紀念品分組</title>
      <link href="/2021/10/01/Luogu-P1094/"/>
      <url>/2021/10/01/Luogu-P1094/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>快要 CSP-S2 了，複習一下一些演算法（弄文化課弄了好久了，很多東西都要忘了。。。</p><h2 id="讀題"><a class="markdownIt-Anchor" href="#讀題"></a> 讀題</h2><p><a href="https://www.luogu.com.cn/problem/P1094">題目連結: Luogu P1094</a></p><p>看題，<strong>把購來的紀念品根據價格進行分組，但每組最多隻能包括兩件紀念品</strong>。看樣子，應該是貪心。每次取一個大的，一個小的，就可以保證了。如果大的小的組合起來，超過了最大值，就只取大的。</p><h2 id="解題"><a class="markdownIt-Anchor" href="#解題"></a> 解題</h2><p>很容易就可以寫出程式。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ar[<span class="number">30001</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, w;</span><br><span class="line">    cin &gt;&gt; w &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) cin &gt;&gt; ar[i];</span><br><span class="line">    <span class="built_in">sort</span>(ar, ar + n);</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> r = n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (r &gt;= l) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ar[l] + ar[r] &lt;= w) &#123;</span><br><span class="line">            l++;</span><br><span class="line">            r--;</span><br><span class="line">            ans++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            r--;</span><br><span class="line">            ans++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="證明"><a class="markdownIt-Anchor" href="#證明"></a> 證明</h2><p>可以參考<a href="https://www.luogu.com.cn/blog/heidoudou/solution-p1094">這個</a></p><h2 id="結語"><a class="markdownIt-Anchor" href="#結語"></a> 結語</h2><p>能力有限，如有疏漏，請諒解並補充，謝謝。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
            <tag> 貪心 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>題解 導彈攔截</title>
      <link href="/2021/10/01/Luogu-P1020/"/>
      <url>/2021/10/01/Luogu-P1020/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>快要 CSP-S2 了，複習一下一些演算法（弄文化課弄了好久了，很多東西都要忘了。。。</p><h2 id="讀題"><a class="markdownIt-Anchor" href="#讀題"></a> 讀題</h2><p><a href="https://www.luogu.com.cn/problem/P1020">題目連結: Luogu P1020</a></p><p>資料是這樣的：<code>389 207 155 300 299 170 158 65</code></p><p>推一推，我們發現，<code>389 300 299 170 158 65</code>是第一問的答案；在 <code>155-&gt;300</code>的時候，要使用另外一顆炮彈了，故最少應該配備兩套。</p><p>在草稿紙上面推一推，不難發現，這道題的兩小問，就是讓你求一個<code>不上升序列長度</code>和一個<code>上升序列長度</code>。</p><h2 id="預備知識"><a class="markdownIt-Anchor" href="#預備知識"></a> 預備知識</h2><p>在求這兩個東西之前，需要先學習<code>STL</code>中的兩個函式：<code>lower_bound</code> <code>upper_bound</code>。</p><p>其中， <code>lower_bound</code> 是求序列中第一個<strong>大於等於</strong>某個數的數；<code>upper_bound</code> 是求序列中第一個<strong>大於</strong>某個數的數。這兩個函式返回的是<strong>指標</strong>。</p><p>它們使用的前提是 序列是<strong>有序</strong>的。</p><p>以lower_bound為例，具體用法類似：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">100</span>];</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="built_in">lower_bound</span>(a, a+len, x); <span class="comment">// 前兩個引數傳入的都是指標</span></span><br></pre></td></tr></table></figure><p>這一函式預設是求升序序列中符合條件的數，如果要改為降序序列，則需要一個 <code>cmp</code> 函式，這一點類似於 <code>sort</code>。比如：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">100</span>];</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="built_in">lower_bound</span>(a, a+len, x, std::<span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;()); <span class="comment">// 前兩個引數傳入的都是指標</span></span><br></pre></td></tr></table></figure><h2 id="解題"><a class="markdownIt-Anchor" href="#解題"></a> 解題</h2><p>我的 <a href="https://github.com/aeilot/ProblemSet/blob/master/LuoGu/P1020/main.cpp">AC 程式碼</a>。</p><p>本題有兩種演算法，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>。這裡只講後者。</p><h3 id="不上升序列"><a class="markdownIt-Anchor" href="#不上升序列"></a> 不上升序列</h3><p>我們用陣列<code>d1</code>當作棧來儲存它。</p><p>遍歷導彈高度，把棧頂元素和高度比較：</p><ol><li>若 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>&lt;</mo><mo>=</mo><msub><mi>d</mi><mi>l</mi></msub><mi>e</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">a_i &lt;= d_len</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span></span></span></span>，此時<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是符合要求的，直接入棧。</li><li>若 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>&gt;</mo><msub><mi>d</mi><mi>l</mi></msub><mi>e</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">a_i &gt; d_len</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span></span></span></span>，此時<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>把棧內第一個小於它的覆蓋掉。這裡說一下，能夠覆蓋它是因為我們不需要再訪問它的值了。在測試資料中，此後幾次都會進行這一操作，如果僅僅取這幾個資料，最長不上升子序列長度仍然正確； 取所有資料，幾次操作之後，就會執行操作1，結果仍然正確。</li></ol><h3 id="上升序列"><a class="markdownIt-Anchor" href="#上升序列"></a> 上升序列</h3><p>和不上升序列一樣，只不過把 <code>upper_bound</code> 改為了 <code>lower_bound</code>，因為會出現兩個相同高度的導彈的情況，這兩個導彈僅僅需要同一的炮彈去攔截。</p><h3 id="程式碼"><a class="markdownIt-Anchor" href="#程式碼"></a> 程式碼</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ARR[<span class="number">100001</span>];</span><br><span class="line"><span class="type">int</span> n = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> d1[<span class="number">100001</span>];</span><br><span class="line"><span class="type">int</span> c1 = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> d2[<span class="number">100001</span>];</span><br><span class="line"><span class="type">int</span> c2 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; ARR[n]) n++;</span><br><span class="line">    d1[<span class="number">0</span>] = ARR[<span class="number">0</span>];</span><br><span class="line">    d2[<span class="number">0</span>] = ARR[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ARR[i] &lt;= d1[c1])</span><br><span class="line">            d1[++c1] = ARR[i];</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> j = <span class="built_in">upper_bound</span>(d1, d1 + c1, ARR[i], <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;()) - d1;</span><br><span class="line">            d1[j] = ARR[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ARR[i] &gt; d2[c2])</span><br><span class="line">            d2[++c2] = ARR[i];</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> j = <span class="built_in">lower_bound</span>(d2, d2 + c2, ARR[i]) - d2;</span><br><span class="line">            d2[j] = ARR[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; c1 + <span class="number">1</span> &lt;&lt; endl &lt;&lt; c2 + <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="結語"><a class="markdownIt-Anchor" href="#結語"></a> 結語</h2><p>能力有限，如有疏漏，請諒解並補充，謝謝。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
            <tag> 動態規劃 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何高效使用搜尋引擎</title>
      <link href="/2021/08/27/search-engine/"/>
      <url>/2021/08/27/search-engine/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>這篇文章已經在 <a href="https://github.com/aeilot/HowToUseSearchEngines">GitHub</a> 開源了。</p><p>最近遇到一些人不太會用搜尋引擎，就寫了這篇文章。。。有不對的地方，或者要補充的地方希望大家踴躍評論、PR。</p><h2 id="目錄"><a class="markdownIt-Anchor" href="#目錄"></a> 目錄</h2><ul><li><a href="#%E7%B0%A1%E4%BB%8B">簡介</a></li><li><a href="#%E8%AA%8D%E8%AD%98%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E">認識搜尋引擎</a><ul><li><a href="#%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E%E7%9A%84%E4%BB%A3%E8%A1%A8">搜尋引擎的代表</a></li></ul></li><li><a href="#%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E6%AA%A2%E7%B4%A2">如何高效檢索</a><ul><li><a href="#%E8%A8%80%E7%B0%A1">言簡</a></li><li><a href="#%E6%84%8F%E9%A7%AD">意駭</a></li></ul></li><li><a href="#%E9%AB%98%E9%9A%8E%E6%8A%80%E5%B7%A7">高階技巧</a><ul><li><a href="#%E4%B8%80%E8%88%89%E5%A4%9A%E5%BE%97">一舉多得</a></li><li><a href="#%E8%AE%93%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E%E7%82%BA%E4%BD%A0%E5%81%9A%E6%B8%9B%E6%B3%95">讓搜尋引擎為你做減法</a></li><li><a href="#%E6%88%91%E5%8F%AA%E6%83%B3%E7%9C%8B%E9%80%99%E4%B8%80%E5%80%8B%E7%B6%B2%E7%AB%99%E6%80%8E%E9%BA%BC%E8%BE%A6">我只想看這一個網站怎麼辦</a></li><li><a href="#%E9%99%90%E5%AE%9A%E6%AA%94%E6%A1%88%E6%A0%BC%E5%BC%8F">限定檔案格式</a></li><li><a href="#%E9%99%90%E5%AE%9A%E7%B6%B2%E5%9D%80">限定網址</a></li><li><a href="#%E9%99%90%E5%AE%9A%E6%A8%99%E9%A1%8C">限定標題</a></li><li><a href="#%E5%91%8A%E8%A8%B4%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E%E6%90%9C%E5%B0%8B%E7%9A%84%E6%98%AF%E4%BD%9C%E5%93%81">告訴搜尋引擎搜尋的是作品</a></li><li><a href="#%E5%91%8A%E8%A8%B4%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E%E4%B8%8D%E8%A6%81%E6%8B%86%E9%96%8B%E9%97%9C%E9%8D%B5%E8%A9%9E">告訴搜尋引擎不要拆開關鍵詞</a></li></ul></li><li><a href="#%E6%8E%A8%E8%96%A6%E9%96%B1%E8%AE%80">推薦閱讀</a></li><li><a href="#%E7%89%B9%E5%88%A5%E9%B3%B4%E8%AC%9D">特別鳴謝</a></li><li><a href="#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99">參考資料</a></li></ul><h2 id="簡介"><a class="markdownIt-Anchor" href="#簡介"></a> 簡介</h2><p>最近我經常遇到一些同學，經常跑來問我一些很明顯在搜尋引擎上面就可以搜到的問題。我問他們為什麼不去網上搜，卻發現其實他們搜過，只是效果不好：有些人直接把一整個問句打上去了，還有人漏關鍵字。這些都是他們沒有掌握搜尋引擎使用的精髓。所以，我寫了這個教程，幫助解決搜尋引擎的使用問題。</p><h2 id="認識搜尋引擎"><a class="markdownIt-Anchor" href="#認識搜尋引擎"></a> 認識搜尋引擎</h2><p>我這裡說的搜尋引擎是指網路搜尋引擎。下面給出<a href="https://zh.wikipedia.org/wiki/%E7%B6%B2%E8%B7%AF%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E">維基百科</a>中的定義：</p><blockquote><p>網路搜尋引擎（英語：web search engine）是設計在全球資訊網上進行搜尋，意思是指自動從全球資訊網蒐集特定的資訊，提供給使用者進行查詢的系統。</p></blockquote><p>搜尋引擎的工作原理大致可以分為蒐集資訊、整理資訊和接受查詢。<strong>為了使文章簡單，更深入的知識我在這裡就不展開了，本文以如何使用為主。</strong></p><h3 id="搜尋引擎的代表"><a class="markdownIt-Anchor" href="#搜尋引擎的代表"></a> 搜尋引擎的代表</h3><ul><li><a href="https://www.baidu.com">百度</a></li><li><a href="https://www.bing.com">必應</a></li><li><a href="https://www.sogou.com">搜狗</a></li><li><a href="https://www.so.com">360搜尋</a></li><li><a href="https://www.google.com">谷歌</a></li><li><a href="https://yandex.com">Yandex</a></li></ul><p>還有學術型搜尋引擎：</p><ul><li><a href="https://xueshu.baidu.com">百度學術</a></li><li><a href="https://scholar.google.com">谷歌學術</a></li></ul><h2 id="如何高效檢索"><a class="markdownIt-Anchor" href="#如何高效檢索"></a> 如何高效檢索</h2><p>我認為，高效檢索只需要注意：言簡、意駭</p><h3 id="言簡"><a class="markdownIt-Anchor" href="#言簡"></a> 言簡</h3><p>言簡，顧名思義，就是讓你的搜尋儘可能更簡單。在搜尋的時候，應該對問題提取關鍵詞。比如，我想要知道<code>高錳酸鉀製取氧氣的文字表示式是什麼</code>時，我僅僅需要寫<code>高錳酸鉀製取氧氣 文字表示式</code> 即可；同樣的，在查詢<code>怎麼寫檢討書時</code>，甚至只需搜尋<code>檢討書</code>；在想知道<code>《將進酒》是誰寫的</code>，只用查詢<code>將進酒 作者</code>。如果不確定要搜尋的內容名稱，應該做更少的準確限定，換為更零散的關鍵詞。如果是英文，則應去除複數和第三人稱複數。雖然某些搜尋引擎在進行查詢的時候會自動去除掉 「xxx的xxx」這種詞彙和標點符號，但在搜尋時還是應該儘量減少他們的使用。也儘可能不要出現 「如何」「怎樣」這些疑問詞，更不需要和搜尋引擎講禮貌——不要出現類似「請問寒假什麼時候放假？」而是寫成「寒假放假時間」。</p><h3 id="意駭"><a class="markdownIt-Anchor" href="#意駭"></a> 意駭</h3><p>意駭，就是把你的搜尋描述的儘可能完備。不要一昧地追求簡單，在有些情況下還是需要給出限定的：比如，在搜尋<code>蘋果</code>時，如果你指的是水果的蘋果，那為了提升效率，最好寫<code>蘋果 水果</code>；同理，想要搜尋蘋果公司，則應該寫<code>蘋果 公司</code>，這可以簡化為<code>蘋果公司</code>。如果不進行限定，有可能搜尋結果第一頁都會被此關鍵詞的其他意思所充滿，在搜尋時，就會降低效率。</p><p>更加高階的限定方法，請見<a href="#%E9%AB%98%E9%9A%8E%E6%8A%80%E5%B7%A7">高階技巧</a>。</p><h2 id="高階技巧"><a class="markdownIt-Anchor" href="#高階技巧"></a> 高階技巧</h2><h3 id="一舉多得"><a class="markdownIt-Anchor" href="#一舉多得"></a> 一舉多得</h3><p>如果我在搜尋的時候，想同時獲得多個關鍵詞的結果，我可以使用 <code>|</code>，即“或”。<strong>注意：用<code>|</code>分隔關鍵詞的時候，一定要加上空格，<code>|</code>必須要是半形的</strong>，舉個例子：<code>東京 | 塔</code>。</p><h3 id="讓搜尋引擎為你做減法"><a class="markdownIt-Anchor" href="#讓搜尋引擎為你做減法"></a> 讓搜尋引擎為你做減法</h3><p>如果我在搜尋的時候，不想獲得某個關鍵詞的結果，我可以使用 <code>-</code>，即“減”。<strong>注意：用<code>-</code>，一定要在之前加上空格</strong>，舉個例子：<code>蘋果 -水果</code>。</p><h3 id="我只想看這一個網站怎麼辦"><a class="markdownIt-Anchor" href="#我只想看這一個網站怎麼辦"></a> 我只想看這一個網站怎麼辦</h3><p>如果我只想獲得某個網站的結果，可以在<strong>整個搜尋之前或之後</strong>加上 <code>site:xxx網站</code>，比如：<code>site:blog.aeilot.top 數碼</code>。</p><h3 id="限定檔案格式"><a class="markdownIt-Anchor" href="#限定檔案格式"></a> 限定檔案格式</h3><p>如果我只想搜尋一種格式的檔案，可以在<strong>整個搜尋之前或之後</strong>加上 <code>filetype:xxx網站</code>，比如：<code>filetype:pdf 物理課本</code>。不指定檔案型別搜尋檔案時，可以使用<code>filetype:all</code>。</p><h3 id="限定網址"><a class="markdownIt-Anchor" href="#限定網址"></a> 限定網址</h3><p>如果我想讓我的搜尋結果的網址都包含某一字斷，可以加上 <code>inurl:xxx</code>，比如：<code>inurl:pan PPT模版</code>，就可以找到網址帶<code>pan</code>的所有相關結果。</p><h3 id="限定標題"><a class="markdownIt-Anchor" href="#限定標題"></a> 限定標題</h3><p>如果我想讓我的搜尋結果的標題都包含某一字斷，可以加上 <code>intitle:xxx</code>，比如：<code>intitle:免費 PPT模版</code>，就可以找到標題帶<code>免費</code>的所有相關結果。</p><h3 id="告訴搜尋引擎搜尋的是作品"><a class="markdownIt-Anchor" href="#告訴搜尋引擎搜尋的是作品"></a> 告訴搜尋引擎搜尋的是作品</h3><p>如果我搜尋的是作品，如文學作品、藝術作品，可以加上書名號，比如：<code>《星際穿越》</code>。</p><h3 id="告訴搜尋引擎不要拆開關鍵詞"><a class="markdownIt-Anchor" href="#告訴搜尋引擎不要拆開關鍵詞"></a> 告訴搜尋引擎不要拆開關鍵詞</h3><p>如果我不想要拆開搜尋的關鍵詞，可以加上引號，比如：<code>“九年級化學“</code></p><h2 id="推薦閱讀"><a class="markdownIt-Anchor" href="#推薦閱讀"></a> 推薦閱讀</h2><ol><li><a href="https://www.zhihu.com/question/28013848">知乎 - 如何高效地使用搜尋引擎</a></li></ol><h2 id="特別鳴謝"><a class="markdownIt-Anchor" href="#特別鳴謝"></a> 特別鳴謝</h2><ul><li><a href="https://github.com/MrWillCom">MrWillCom</a> 他對我的創作進行了指導。</li><li><a href="https://github.com/QD-lazy-tm">Cathy Aeilot</a> 她啟發了我寫這份教程。</li></ul><h2 id="參考資料"><a class="markdownIt-Anchor" href="#參考資料"></a> 參考資料</h2><ol><li><a href="https://zh.wikipedia.org/wiki/%E7%B6%B2%E8%B7%AF%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E">網路搜尋引擎 – 維基百科</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 中文 | 生產力 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 搜尋引擎 </tag>
            
            <tag> 效率 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用 GitHub Actions 格式化 C/C++ 程式碼</title>
      <link href="/2021/08/19/gh-action-clang-format/"/>
      <url>/2021/08/19/gh-action-clang-format/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>我的 <a href="https://github.com/aeilot/ProblemSet/blob/master/.github/workflows/clang-format.yml">ProblemSet</a> 專案，每次都 Format 太麻煩了，需要一個自動化 Format 的功能。利用 GitHub Actions，即可實現。</p><h2 id="github-actions"><a class="markdownIt-Anchor" href="#github-actions"></a> GitHub Actions</h2><p><a href="https://docs.github.com/en/actions">GitHub Actions</a> 是 GitHub 推出的持續整合服務，最近不要錢了，用(白嫖)的人就多起來了。</p><h2 id="程式碼"><a class="markdownIt-Anchor" href="#程式碼"></a> 程式碼</h2><p>直接上程式碼：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">name:</span> <span class="string">&quot;Check Clang Format&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>, <span class="string">pull_request</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">format:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;Run Clang Format&quot;</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;Install clang-format&quot;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          sudo apt-get update</span></span><br><span class="line"><span class="string">          sudo apt-get install clang-format-10</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;Format Codes&quot;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">clang-format-10</span> <span class="string">-style=file</span> <span class="string">-i</span> <span class="string">*/*/*.cpp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Push</span> <span class="string">changes</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-go/push@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">author-name:</span> <span class="string">Clang</span> <span class="string">Format</span> <span class="string">Bot</span></span><br><span class="line">          <span class="attr">commit-message:</span> <span class="string">Run</span> <span class="string">clang-format</span></span><br></pre></td></tr></table></figure><h2 id="後記"><a class="markdownIt-Anchor" href="#後記"></a> 後記</h2><p>如果大家有什麼改進的好方法，可以在下方評論！</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 程式設計 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>四季的天空</title>
      <link href="/2021/07/18/pylon-in-seasons/"/>
      <url>/2021/07/18/pylon-in-seasons/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p>使用單反拍攝，Louis Aeilot 版權所有，所有圖片都未經過後期處理，僅經過壓縮。</p></blockquote><p>拍攝用時1年，就是每次看到了都會去拍一張。</p><p><img src="https://i.loli.net/2021/07/19/x7TQcN3EK85vgAP.jpg" alt="IMAGE 2020" /><br /><img src="https://i.loli.net/2021/07/19/UbSXKw9LquYGFCZ.jpg" alt="IMAGE 2020" /><br /><img src="https://i.loli.net/2021/07/19/uDqfpNb1KULycQE.jpg" alt="IMAGE 2020" /><br /><img src="https://i.loli.net/2021/07/19/ZiycGIMw93nmJb6.jpg" alt="IMAGE 2020" /><br /><img src="https://i.loli.net/2021/07/19/CIYFgQJy1L6owKt.jpg" alt="IMAGE 2021" /></p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 攝影 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>洛谷 7 月月賽 Div.2 總結</title>
      <link href="/2021/07/14/luogu-lgr087/"/>
      <url>/2021/07/14/luogu-lgr087/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>昨天(7/14)參加了洛谷的 7 月月賽，感覺題目挺新穎的，就是資料有點。。。</p><p>比賽連結：<a href="https://www.luogu.com.cn/contest/46177">這裡</a></p><p>我的程式碼在 <a href="https://github.com/aeilot/ProblemSet/tree/master/Competition/LuoGu-2021July-Div2">這裡</a></p><h2 id="a"><a class="markdownIt-Anchor" href="#a"></a> A</h2><p>乍一看好像沒思路，但是想一想，其實很簡單，就是會有幾種情況：</p><ol><li><strong>0個空格</strong> 全是數字的話，需要判斷一下 A. 兩者完全相同 B. 非A，情況 A 是可以輸出 <code>Yes</code> 的。</li><li><strong>1個空格</strong> 這一種情況，從原理上分析，“選擇一個有正整數的格子和一個與之相鄰的空格子，將正整數移到那個空格子中”，可以得出，其實只要順時針轉一圈，初始和最終狀態順序相同，就符合條件。所以，只需要做三次判斷即可，簡單粗暴（在座的各位大佬要是有高階方法可以通知一下🙇）。</li><li><strong>2、3、4個空格</strong> 這幾個情況，經過分析會發現，不管如何，都是滿足條件的。</li></ol><p>所以，這樣分析下來，很簡單就 AC 了，拿到 100 分！</p><h2 id="b"><a class="markdownIt-Anchor" href="#b"></a> B</h2><blockquote><p>這道題。。。無語了。。。測試資料透過了，結果測評資料每次都卡一個，萬惡的捆綁測試。。。最後得不了 100 分了。。。</p></blockquote><p>這道題最開始想的是貪心演算法，排序，但是會超時，就改了一下：開兩個陣列，不管順序，只管符號，放進去。這樣做基本上不超過 10ms。</p><p>原理就是，計算 <code>+正數</code> <code>+負數</code> <code>*正數</code> <code>*負數</code> 出現的個數，進行排列，最後計算結果。</p><h2 id="c"><a class="markdownIt-Anchor" href="#c"></a> C</h2><blockquote><p>因為學業原因，離開了幾個小時，回來了之後都沒時間做了。。。有點思路，但沒寫完。。。</p></blockquote><p>其實，可以根據數第一次出現的位置判斷從左、右數的位置，最後進行排列即可。</p><h2 id="d"><a class="markdownIt-Anchor" href="#d"></a> D</h2><p>看了一眼就懶得寫。</p><h2 id="小結"><a class="markdownIt-Anchor" href="#小結"></a> 小結</h2><p>等題解吧！感覺題目很有意思，都是些需要仔細思考的題目。(奈何我太弱了。。。太弱小了！！！</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
            <tag> 比賽 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>題解 最近公共祖先 (LCA)</title>
      <link href="/2021/04/24/Luogu-P3379/"/>
      <url>/2021/04/24/Luogu-P3379/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>好久沒刷題了，複習一下：LCA。</p><h2 id="題目詳情"><a class="markdownIt-Anchor" href="#題目詳情"></a> 題目詳情</h2><p>題目很簡單，就是求多叉樹兩個點的最近公共祖先。</p><p>連結: <a href="https://www.luogu.com.cn/problem/P3379">洛谷 P3379</a></p><blockquote><p>LCA（Least Common Ancestors），即最近公共祖先，是指在有根樹中，找出某兩個結點u和v最近的公共祖先。 ———來自百度百科</p></blockquote><p><img src="https://i.loli.net/2021/04/24/3XCbi4Lrd8Sxnst.png" alt="818487-20151004150339121-181913844.png" /><br />圖中，4 和 3 的 LCA 就是 1。</p><h2 id="解題"><a class="markdownIt-Anchor" href="#解題"></a> 解題</h2><h3 id="最簡單的方法-暴力"><a class="markdownIt-Anchor" href="#最簡單的方法-暴力"></a> 最簡單的方法 (暴力)</h3><blockquote><p>這種方法資料一大就會TLE。</p></blockquote><p>原理很簡單，讓兩個數一個一個向上走，直到兩個數相遇。第一次相遇就是他們的 LCA。</p><p>很簡單，就不贅述了，直接上程式碼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX 500000</span></span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; tree[MAX];<span class="comment">// 以鄰接表形式儲存</span></span><br><span class="line"><span class="type">int</span> dep[MAX];</span><br><span class="line"><span class="type">int</span> fas[MAX];</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> M1 &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> fa)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fa != <span class="number">-1</span>) &#123;</span><br><span class="line">            dep[x] = dep[fa] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        fas[x] = fa;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; tree[x].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (fas[tree[x].<span class="built_in">at</span>(i)] == <span class="number">-2</span>) M1::<span class="built_in">dfs</span>(tree[x].<span class="built_in">at</span>(i), x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a == b) &#123;</span><br><span class="line">                <span class="keyword">return</span> a;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fas[a] == fas[b]) &#123;</span><br><span class="line">                <span class="keyword">return</span> fas[a];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fas[b] == a) &#123;</span><br><span class="line">                <span class="keyword">return</span> a;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fas[a] == b) &#123;</span><br><span class="line">                <span class="keyword">return</span> b;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> da = dep[a], db = dep[b];</span><br><span class="line">            <span class="type">int</span> delta = <span class="built_in">abs</span>(da - db);</span><br><span class="line">            <span class="keyword">if</span> (da &gt; db) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; delta; i++) &#123;</span><br><span class="line">                    a = fas[a];</span><br><span class="line">                    da = dep[a];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (da &lt; db) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; delta; i++) &#123;</span><br><span class="line">                    b = fas[b];</span><br><span class="line">                    db = dep[b];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                a = fas[a];</span><br><span class="line">                da = dep[a];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">// namespace M1</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> first = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">LCA</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (first) &#123;</span><br><span class="line">        M1::<span class="built_in">dfs</span>(r, <span class="number">-1</span>);</span><br><span class="line">        first = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res;</span><br><span class="line">    res = M1::<span class="built_in">solve</span>(a, b);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> m, n, s;</span><br><span class="line">    cin &gt;&gt; m &gt;&gt; n &gt;&gt; s;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; MAX; i++) &#123;</span><br><span class="line">        dep[i] = <span class="number">0</span>;</span><br><span class="line">        fas[i] = <span class="number">-2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        tree[x].<span class="built_in">push_back</span>(y);</span><br><span class="line">        tree[y].<span class="built_in">push_back</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">    dep[s] = <span class="number">0</span>;</span><br><span class="line">    fas[s] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="type">int</span> res = <span class="built_in">LCA</span>(a, b, s);</span><br><span class="line">        cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意這道題目的資料輸入，<code>x y</code> <strong>表示x 結點和 y 結點之間有一條直接連線的邊（資料保證可以構成樹）。</strong> 所以需要用鄰接表的形式，表示多叉樹。</p><h3 id="倍增法"><a class="markdownIt-Anchor" href="#倍增法"></a> 倍增法</h3><p>這個演算法是對上面暴力演算法的最佳化。這個演算法的時間複雜度為<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>，已經可以滿足大部分的需求。</p><p>上述演算法中，一步一步跳太慢了，這裡我們事先做好標記，就可以每次 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">2^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.824664em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span> 步向上跳，一直到相遇。</p><p>程式碼中有較為詳細的註釋：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX 500001 <span class="comment">// 本題最大資料規模</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MUL_MAX 22</span></span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; tree[MAX]; <span class="comment">// 以鄰接表形式儲存</span></span><br><span class="line"><span class="type">int</span> dep[MAX]; <span class="comment">// 預處理儲存節點深度</span></span><br><span class="line"><span class="type">int</span> fas[MAX][MUL_MAX]; <span class="comment">// 儲存 x 節點上面第 2^i 次方個祖先</span></span><br><span class="line"><span class="type">bool</span> first = <span class="literal">true</span>; <span class="comment">// 記錄預處理是否結束</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lg2</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">log</span>(x) / <span class="built_in">log</span>(<span class="number">2</span>) + <span class="number">1</span>; <span class="comment">// 無理數計算記得加上 1 來避免誤差</span></span><br><span class="line">&#125; <span class="comment">// 手動寫了一個函式，來求 log2(x)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> fa)</span> </span>&#123; <span class="comment">// x 是當前節點，fa 是它的父節點</span></span><br><span class="line">    <span class="keyword">if</span> (fa != <span class="number">-1</span>) &#123;</span><br><span class="line">        dep[x] = dep[fa] + <span class="number">1</span>; <span class="comment">// x 的深度就是它的父節點加一，這很好理解</span></span><br><span class="line">    &#125;</span><br><span class="line">    fas[x][<span class="number">0</span>] = fa; <span class="comment">// x 節點的第一個父節點是 fa</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; (<span class="number">1</span> &lt;&lt; i) &lt;= dep[x]; i++) &#123; <span class="comment">// 迴圈直至 2^i 大於當前節點深度，即完成當前節點到樹根的所有可跳轉到的節點的預處理工作</span></span><br><span class="line">        fas[x][i] = fas[fas[x][i - <span class="number">1</span>]][i - <span class="number">1</span>]; </span><br><span class="line">        <span class="comment">// 這一步是演算法的精髓</span></span><br><span class="line">        <span class="comment">// 得到狀態轉移方程，動態規劃計算</span></span><br><span class="line">        <span class="comment">// 意思是x的2^i祖先等於x的2^(i-1)祖先的2^(i-1)祖先</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; tree[x].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (tree[x].<span class="built_in">at</span>(i) != fa) <span class="built_in">dfs</span>(tree[x].<span class="built_in">at</span>(i), x); </span><br><span class="line">        <span class="comment">// 鄰接表儲存當前節點所有相連的節點，只要節點不是它的父節點，即節點是它的子節點，就進行下一步遞迴</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="comment">// 深度優先搜尋來預處理一下</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dep[b] &gt; dep[a]) <span class="built_in">swap</span>(a, b); <span class="comment">// 確保 a 的深度更深，避免冗餘的判斷</span></span><br><span class="line">    <span class="keyword">while</span> (dep[a] &gt; dep[b]) &#123;</span><br><span class="line">        a = fas[a][<span class="built_in">lg2</span>(dep[a] - dep[b]) - <span class="number">1</span>]; <span class="comment">// a 向上跳，跳至兩節點同級</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a == b) <span class="keyword">return</span> a; <span class="comment">// 若此時兩節點相遇，就可以直接返回。否則兩節點還需再次向上跳。</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="built_in">lg2</span>(dep[a]); i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (fas[a][i] != fas[b][i]) &#123;</span><br><span class="line">            a = fas[a][i];</span><br><span class="line">            b = fas[b][i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// 從可跳到的最高處向下列舉，得到 LCA</span></span><br><span class="line">    <span class="keyword">return</span> fas[a][<span class="number">0</span>]; <span class="comment">// 返回答案</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">LCA</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (first) &#123;</span><br><span class="line">        dep[r] = <span class="number">0</span>;</span><br><span class="line">        fas[r][<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(r, <span class="number">-1</span>);</span><br><span class="line">        first = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res;</span><br><span class="line">    res = <span class="built_in">solve</span>(a, b);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> m, n, s;</span><br><span class="line">    cin &gt;&gt; m &gt;&gt; n &gt;&gt; s;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; MAX; i++) &#123;</span><br><span class="line">        dep[i] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; MUL_MAX; j++)</span><br><span class="line">            fas[i][j] = <span class="number">-2</span>;</span><br><span class="line">    &#125; <span class="comment">// 陣列初始化</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        tree[x].<span class="built_in">push_back</span>(y);</span><br><span class="line">        tree[y].<span class="built_in">push_back</span>(x);</span><br><span class="line">        <span class="comment">// 鄰接表存入資料</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="type">int</span> res = <span class="built_in">LCA</span>(a, b, s);</span><br><span class="line">        cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其實還可以預處理出一個 <code>lg</code> 陣列，避免對數計算，大家可以自己去嘗試，會有一定時間最佳化效果。</p><p>無法理解倍增？這裡有個 <a href="https://blog.csdn.net/jarjingx/article/details/8180560">經典資料</a></p><h2 id="其他方法"><a class="markdownIt-Anchor" href="#其他方法"></a> 其他方法</h2><p>實際上還有更快的方法求這道題的答案。倍增演算法已經可以滿足需求，就不再往下寫了。</p><ul><li>Tarjan</li><li>ST 演算法</li></ul><p>大家有興趣可以去嘗試一下。</p><h2 id="後記"><a class="markdownIt-Anchor" href="#後記"></a> 後記</h2><p>這裡放上兩種列出演算法的評分。</p><h3 id="暴力"><a class="markdownIt-Anchor" href="#暴力"></a> 暴力</h3><p><img src="https://i.loli.net/2021/04/24/UF9g4PefzQ8lrYL.png" alt="截圖2021-04-24 下午6.13.14.png" /></p><h3 id="倍增"><a class="markdownIt-Anchor" href="#倍增"></a> 倍增</h3><p><img src="https://i.loli.net/2021/04/24/G2qxQDSBCuNYm89.png" alt="截圖2021-04-24 下午6.13.08.png" /></p>]]></content>
      
      
      <categories>
          
          <category> 中文 | OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
            <tag> 模版 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用簡單的物理方法證明牛頓萊布尼茨公式</title>
      <link href="/2020/12/24/newton-leibniz-proof/"/>
      <url>/2020/12/24/newton-leibniz-proof/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>前幾天經過苦思冥想，想出來了一種簡單的證明方法，現在來簡單分享一下。</p><h2 id="關於牛頓萊布尼茨公式"><a class="markdownIt-Anchor" href="#關於牛頓萊布尼茨公式"></a> 關於牛頓萊布尼茨公式</h2><p>即微積分基本定理。</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mo>∫</mo><mi>a</mi><mi>b</mi></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>x</mi><mo>=</mo><mi>F</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo>−</mo><mi>F</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msubsup><mo fence="false">∣</mo><mi>a</mi><mi>b</mi></msubsup></mrow><annotation encoding="application/x-tex">\int_a^b f(x)dx = F(b) - F(a) = F(x)\bigg|_a^b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.5109580000000005em;vertical-align:-0.9119499999999999em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5990080000000004em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span><span style="top:-3.812900000000001em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.7186980000000003em;vertical-align:-0.9997199999999998em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4799700000000002em;"><span style="top:-1.65598em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.25698em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.85798em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.87897em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-3.47997em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500199999999999em;"><span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7189780000000003em;"><span style="top:-1.7002800000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span><span style="top:-3.9328700000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9997199999999998em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> 為 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> 原函式。</p><h2 id="構思"><a class="markdownIt-Anchor" href="#構思"></a> 構思</h2><p>有初中物理知識可以知道，在 v-t 影象中，面積就是位移，兩點間面積之差就是時間差的積分。</p><p>所以很容易證明出這一定理。</p><h2 id="證明"><a class="markdownIt-Anchor" href="#證明"></a> 證明</h2><p>所以 v-t 函式的原函式就是 s(t) 函式，所以 [a,b] 區間內的位移就是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><msubsup><mo fence="false">∣</mo><mi>a</mi><mi>b</mi></msubsup></mrow><annotation encoding="application/x-tex">s(t)\bigg|_a^b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.7186980000000003em;vertical-align:-0.9997199999999998em;"></span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4799700000000002em;"><span style="top:-1.65598em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.25698em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.85798em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.87897em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-3.47997em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500199999999999em;"><span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7189780000000003em;"><span style="top:-1.7002800000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span><span style="top:-3.9328700000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9997199999999998em;"><span></span></span></span></span></span></span></span></span></span></p><p>而上文已經得出 v(t) 函式在 [a,b] 區間的積分也指的是位移。</p><p>所以很容易得出要證明的結論。</p><h2 id="總結"><a class="markdownIt-Anchor" href="#總結"></a> 總結</h2><p>本人僅是業餘愛好進行學習，若有不足，請指正。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 電腦科學與數學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 高等數學 </tag>
            
            <tag> 微積分 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>簡評榮耀手環6</title>
      <link href="/2020/12/24/honor-band6/"/>
      <url>/2020/12/24/honor-band6/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>前幾天買了個 <strong>榮耀手環6</strong>，簡單點評點評。</p><p><img src="https://i.loli.net/2020/12/25/bL2k4lVvfWIKxJp.png" alt="Band" /></p><h2 id="優點"><a class="markdownIt-Anchor" href="#優點"></a> 優點</h2><ul><li><strong>螢幕</strong>在一般的手環裡算是比較大的，比較全面屏，顏值也挺高的。</li><li><strong>續航</strong>把類似自動運動監測、心率檢測、壓力檢測之類的開啟了之後都有一個星期的續航。</li><li><strong>離線支付寶、NFC</strong>真的很方便。</li><li>etc</li></ul><h2 id="不足"><a class="markdownIt-Anchor" href="#不足"></a> 不足</h2><ul><li><strong>錶盤</strong>，說實在的，真得沒有小米的好看，還不支援自定義，希望以後能適配。話說。。。這設計者怕不是喝了假酒(bushi)。</li><li><strong>非華為系手機</strong>用不了一些特別功能，比如心臟健康什麼的，不過可以破解，自行搜尋。</li><li><strong>24小時血氧檢測</strong>這個功能是不支援的。</li></ul><h2 id="期望"><a class="markdownIt-Anchor" href="#期望"></a> 期望</h2><p>第一次買華為系的產品（不過現在榮耀已經分離了），感覺還挺好。</p><p>就是希望官方能夠加強自定義功能和對於非華為手機，特別是蘋果手機的適配。</p><h2 id="總結"><a class="markdownIt-Anchor" href="#總結"></a> 總結</h2><p>這一款產品還是非常值得買的，當然，這裡不建議蘋果使用者購買NFC版本，不然很多功能無法使用。</p><p>價格：標準版 249，NFC 289</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 數碼 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 測評 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>海上生明月，天涯共此時。</title>
      <link href="/2020/09/30/mid-autumn-2020/"/>
      <url>/2020/09/30/mid-autumn-2020/</url>
      
        <content type="html"><![CDATA[<blockquote><p>使用單反拍攝，Louis Aeilot 版權所有。鏡頭不夠。。。。。。</p></blockquote><p><img src="https://i.loli.net/2020/10/01/ouLZczWMdQA3Crw.png" alt="Photo" /></p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 攝影 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>我為什麼重新拿出了 iPod</title>
      <link href="/2020/09/10/ipod-shuffle/"/>
      <url>/2020/09/10/ipod-shuffle/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>我有一個 iPod Shuffle，已經吃灰多年了。。。最近重新拿出來用了。</p><h2 id="事情的起因"><a class="markdownIt-Anchor" href="#事情的起因"></a> 事情的起因</h2><p>我訂閱了 Apple Music，挺不錯的，只是在 Phone，Mac 這些裝置上，不管多麼優美悅耳的音樂都成了使用裝置的背景音樂。。。無法讓人專心聽完一首歌曲。我們似乎已經忘記之前沒有這些東西時，沉靜在一首歌曲中的感受了。</p><p>我拿出了這款 iPod Shuffle，有點掉色，卻不影響使用。感謝，它讓我找回了之前發現一首好歌、聽完一首好歌的激動、欣喜與感動！閉上眼睛，靜下心來，享受著屬於你自己的餘音繞樑的樂曲。</p><h2 id="音樂來源"><a class="markdownIt-Anchor" href="#音樂來源"></a> 音樂來源</h2><p>有人要問了，你的樂曲從哪裡來的？眾所周知，現在所有的平臺都有 DRM…</p><p>我購買了網易雲音樂包，8元一個月，然後使用這個 <a href="http://ncm.worthsee.com">Doge</a>。</p><h2 id="結語"><a class="markdownIt-Anchor" href="#結語"></a> 結語</h2><p>實際上 iPod 還有一個好處，就是小巧 <s>方便帶到學校去，好藏</s>。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 數碼 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Swift 中的 SharedPreferance —— UserDefaults</title>
      <link href="/2020/08/23/swift-userdefaults/"/>
      <url>/2020/08/23/swift-userdefaults/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>從 Android 開發又最終回到 iOS 了，好多東西都不知道。最近一直有需求要用一個類似 Android 的 SharedPreferance 的東西。找了一下資料，來總結一下。</p><h2 id="它是什麼"><a class="markdownIt-Anchor" href="#它是什麼"></a> 它是什麼</h2><blockquote><p>不會吧？不會還有人不知道 SharedPreferance 吧？？？</p></blockquote><p><code>SharedPreferance</code> 是一種輕量級的 Android 儲存API, 用於儲存<strong>簡單</strong>的資料，資料多了就不如其他方式高效了。</p><p>iOS 中，起同樣作用的東西，叫 <code>UserDefaults</code>。</p><p>這兩者都以 <code>key-value</code> 的形式儲存。</p><h2 id="使用場景"><a class="markdownIt-Anchor" href="#使用場景"></a> 使用場景</h2><p><strong>簡單資料</strong></p><p><strong>簡單資料</strong></p><p><strong>簡單資料</strong></p><p>複雜資料建議使用 <code>SQLite</code> 或者 <code>Core Data</code>，不建議作死。。。</p><h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2><p>直接上程式碼，裡面註釋我都寫好了。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> defaults <span class="operator">=</span> <span class="type">UserDefaults</span>.standard <span class="comment">// 獲取全域性的 UserDefaults</span></span><br><span class="line"></span><br><span class="line">defaults.set(<span class="type">Int</span>.max, forKey: <span class="string">&quot;int&quot;</span>) <span class="comment">// 儲存</span></span><br><span class="line">defaults.integer(forKey: <span class="string">&quot;int&quot;</span>) <span class="comment">// 讀取</span></span><br><span class="line"></span><br><span class="line">defaults.set(<span class="literal">true</span>, forKey: <span class="string">&quot;bool&quot;</span>)</span><br><span class="line">defaults.bool(forKey: <span class="string">&quot;bool&quot;</span>)</span><br><span class="line"></span><br><span class="line">defaults.set(<span class="type">Double</span>.infinity, forKey: <span class="string">&quot;double&quot;</span>)</span><br><span class="line">defaults.double(forKey: <span class="string">&quot;double&quot;</span>)</span><br><span class="line"></span><br><span class="line">defaults.set(<span class="type">Float</span>.infinity, forKey: <span class="string">&quot;float&quot;</span>)</span><br><span class="line">defaults.float(forKey: <span class="string">&quot;float&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="預設值"><a class="markdownIt-Anchor" href="#預設值"></a> 預設值</h2><p><code>Float</code>, <code>Int</code>, <code>Double</code> 的預設值都是 0；<code>Bool</code> 的預設值是 false。</p><h2 id="更多"><a class="markdownIt-Anchor" href="#更多"></a> 更多</h2><p>大家可以多在 Playgrounds 裡面試試，還可以看看 <a href="https://developer.apple.com/documentation/foundation/userdefaults">Apple Developer Documentation</a>。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 程式設計 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>凝視那一輪明月</title>
      <link href="/2020/08/22/stare-at-moon/"/>
      <url>/2020/08/22/stare-at-moon/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>隨便亂寫的，，，要拿去參加一個小比賽。。。</p><hr /><p>初夏，深夜，我卻還在熬夜趕作業。</p><p>夜裡，恍惚著，偶然向窗外望了望。多完美的一輪明月啊！</p><p>凝視這一輪明月，它明亮，照白了月邊稀疏的雲；它潔淨，彷彿世間沒有什麼比它跟潔白如雪；它深邃，好像有不盡的秘密。周圍繁星點點，如同月亮的夥伴，與她共歡笑。明朗的夜空，月亮和繁星點綴，讓這個夜晚，顯得十分安靜祥和。</p><p>我不禁陷入無盡的想象。月兒啊！這孤獨的夜，你有著星星的陪伴，與我不同！月兒啊！夜深人靜時，你怎麼還沒入睡？是否和我一樣，還在努力奮鬥？月兒啊！一個個夜晚，你是否感覺有點煩悶？……</p><p>想著想著，我突然想到：身處鬧市區，是如何見到這樣的明月的？這夜空明朗的，讓人驚奇，我從未見過。這夜空，不應該滿是霧霾、塵埃嗎？</p><p>我回想起，好多年前，那也是一個這樣的的夜晚，我和朋友們在路口乘涼，可能才剛上小學。</p><p>抬眼望去，一片灰濛濛的天，幾乎看不清什麼月亮，更別提星星了。那時候，上海的明朗的夜晚並不是天天有。</p><p>“這月兒，今天晚上又躲起來了，看不清了。”一旁的嘉豪一邊向天上凝視，一邊說。但是，最終他還是未能知曉月兒的真面目。</p><p>“環境汙染太嚴重了，那些工廠、車輛，人類生活影響到了環境。”我說著，彷彿看到了遠處郊區的幾座大工廠，煙還在不斷上升到大氣中。</p><p>嘉豪打了個哈欠。現在已經是夜深人靜時，遠處的卡車的聲音，很清楚，又很微弱。老師講過，有些卡車用的油不符合標準，排放出來很是汙染環境。我們站在這路口，似乎還能聞到汽油發出的一種難聞的味道。</p><p>這路口，昏黃的路燈還在亮著，高樓大廈還在發著光。“書上說，大部分的電力還是來自不清潔能源。”喜愛讀書的嘉豪說。一個晚上，這燈火通明的鬧市區，不知要浪費多少電呢。</p><p>夜深了，我記不起後面說了什麼，想了什麼。</p><p>恍惚間，我又陷入了沉思。啊，我的月兒！你看起來有些孤獨！沒有星星的陪伴，你還好嗎！啊，我的月兒！你聽見這卡車的聲音，問道汽油的味道了嗎？啊，我的月兒！這樣一個夜晚，你卻躲了起來，是有什麼秘密嗎？<br />……<br />夜晚，有些涼，我被凍醒，已經凌晨二三點了吧。</p><p>我再次舉頭凝視天邊的月亮。誒？月亮怎麼又躲起來了？我望向桌上雜亂擺放的作業。誒？我的作業怎麼已經寫完了！原來，一切，是夢。作業寫完後，我太累了，就在書桌上睡著了。</p><p>我的月亮，答應我，以後不要再躲起來了？我都能見到你和星星，在無數個靜寂而孤獨的夜！答應我，讓我夢想成真，好嗎？</p><p>將來，我再次凝視那一輪明月……</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 文學 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 散文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用 GitHub Actions 部署 Hexo 部落格</title>
      <link href="/2020/08/21/gh-action-hexo/"/>
      <url>/2020/08/21/gh-action-hexo/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>最近有一個朋友找我，說她弄了一個 Hexo 部落格，想做 GitHub Actions 自動部署，奈何不會弄，只好讓我幫忙。</p><h2 id="github-actions"><a class="markdownIt-Anchor" href="#github-actions"></a> GitHub Actions</h2><p><a href="https://docs.github.com/en/actions">GitHub Actions</a> 是 GitHub 推出的持續整合服務，最近不要錢了，用(白嫖)的人就多起來了。</p><h2 id="程式碼"><a class="markdownIt-Anchor" href="#程式碼"></a> 程式碼</h2><p>話不多說，直接上程式碼：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">&quot;Hexo Blog Builder&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>, <span class="string">pull_request</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;Hexo Blog Build&quot;</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">fetch-depth:</span> <span class="number">1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;12&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Clean</span> <span class="string">Previous</span> <span class="string">Build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">rm</span> <span class="string">-rf</span> <span class="string">docs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Clean</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">New</span> <span class="string">Build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Move</span> <span class="string">docs/</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">mv</span> <span class="string">public</span> <span class="string">docs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Publish</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">          echo &quot;$&#123;&#123; secrets.KEY &#125;&#125;&quot; &gt; ~/.ssh/id_rsa.pub</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa.pub</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          git config --global user.name &quot;Hexo Deploy Bot&quot;</span></span><br><span class="line"><span class="string">          git config --global user.email &quot;nobody@nobody.nobody&quot;</span></span><br><span class="line"><span class="string">          git config --global core.quotepath false</span></span><br><span class="line"><span class="string">          git add --all</span></span><br><span class="line"><span class="string">          git commit -m &quot;Hexo Blog Build&quot;</span></span><br><span class="line"><span class="string">          git push origin master</span></span><br></pre></td></tr></table></figure><p>本 Action 需要你的 ssh 公鑰，也就是 <code>id_rsa.pub</code> 存在專案設定中的 Secrets 內。</p><h2 id="tldr"><a class="markdownIt-Anchor" href="#tldr"></a> TL;DR</h2><p>具體實現很簡單，用 Hexo 自帶生成器生成到 <code>public</code> 目錄，把 <code>public</code> 目錄改名為 <code>docs</code>。最後 <code>push</code> 到專案裡。</p><p><code>push</code> 使用 SSH Key，實現免密碼。</p><p>在 GitHub Pages 設定中，需要把 Source 改為 docs 目錄。</p><h2 id="後記"><a class="markdownIt-Anchor" href="#後記"></a> 後記</h2><p>如果大家有什麼改進的好方法，可以在下方評論！</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 程式設計 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>遲來的日誌 - WWDC 2020 獎學金</title>
      <link href="/2020/08/19/wwdc2020/"/>
      <url>/2020/08/19/wwdc2020/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>今年 6 月份，因為疫情的影響，WWDC改為線上，之前的獎學金重新命名為 <a href="https://developer.apple.com/wwdc20/swift-student-challenge/">Swift Student Challenge</a>。</p><p>我老早就有參加這一活動的打算，只是一直沒能實現，也沒有達到要求。今年大膽嘗試了一會，雖然成績不理想，但還是收穫了許多。</p><p>我今年的專案在 <a href="https://github.com/aeilot/WWDC2020">aeilot/WWDC2020</a>。</p><h2 id="overview"><a class="markdownIt-Anchor" href="#overview"></a> Overview</h2><p>今年我的專案使用了 SwiftUI 和 SpriteKit。我做了一個 2D 的跑酷類遊戲，內容是關於 COVID19 的。</p><p>整體開發下來，多虧了 Apple Document，裡面的文件很詳細，還有示例，👍。</p><p><img src="https://i.loli.net/2020/08/20/BXzAlu5jIvNg76O.png" alt="Apple Document" /></p><p>當然開發中遇到的幾個問題，我也是在 Apple Developer Forums 和 Stack Overflow 解決的。具體連結就不寫了，社群很活躍，10分鐘就有人回答了。</p><p>只是開發太趕，只有不到一個星期，決定參加都花了幾天，🤦‍♀️。。。所以最後成果像一個半成品。。。</p><h2 id="future"><a class="markdownIt-Anchor" href="#future"></a> Future</h2><p>關於明年的 WWDC，我想我是一定會去參加的！最好早點準備，加油！等著我的好訊息！</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 程式設計 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
            <tag> WWDC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vcpkg - 方便的 C/C++ 庫管理器</title>
      <link href="/2020/08/13/vcpkg/"/>
      <url>/2020/08/13/vcpkg/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>最近在做一個大型的 C++ 專案 ── <a href="https://github.com/louis-studio/Albumist">Albumist</a>。它使用 Qt，需要用到很多類似 <code>sqlite3</code>、<code>exiv2</code>、<code>libcurl</code> 之類的庫。第三方庫管理似乎成了問題。</p><p>支援 git 的都可以使用　<code>git submodule</code> 來管理，但是還有少部分是不支援的，或者是二進位制的，比如 <code>sqlite3</code>。這就要我們手動去下載，手動去更新，好生麻煩。</p><h2 id="vcpkg"><a class="markdownIt-Anchor" href="#vcpkg"></a> vcpkg</h2><p>我一直想要一個類似 <code>npm</code> <code>pip</code> 一樣的東西，把依賴寫在檔案裡面，然後直接 <code>install</code> 即可。</p><p>經過搜尋，我發現了微軟的一個專案 <a href="https://github.com/microsoft/vcpkg/">vcpkg</a>。官方定義它為 “C++ Library Manager for Windows, Linux, and MacOS”，簡單翻譯一下就是 “支援 Windows, Linux 和 macOS 的 C++ 庫管理器”。</p><p>在 Arch Linux 上面，安裝它並不複雜，只需要：<code>sudo pacman -S vcpkg-git</code> 即可。其他系統沒有嘗試過，跟著它的 README 也很方便安裝。</p><h2 id="清單-功能"><a class="markdownIt-Anchor" href="#清單-功能"></a> “清單” 功能</h2><p>在專案根目錄建立一個 <code>vcpkg.json</code>， 然後 <code>vcpkg install</code>。這一功能就是“清單”功能。它正好是我想要的，可是卻暫時處在 Beta 階段，不過也無關緊要。</p><p>要啟用“清單”功能，在執行命令時，需要接引數 <code>--feature-flags = manifests</code>。</p><p>清單大概長這樣：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;name of your project&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version-string&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;version of your project&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;abseil&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;boost&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>很方便，也很快捷。</p><h2 id="不足"><a class="markdownIt-Anchor" href="#不足"></a> 不足</h2><p>比起這樣一個純粹的管理器，我更希望獲得類似 Java 的 Gradle 的體驗。如果 CMake 能加入類似功能，體驗一定能夠翻倍，快捷方便且無需第三方軟體。</p><h2 id="後記"><a class="markdownIt-Anchor" href="#後記"></a> 後記</h2><p>— 2020 08 15 更新</p><p>又停止使用這個東西了，Windows 上面需要 MSVC。。。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 程式設計 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vimrc 配置指南</title>
      <link href="/2020/07/25/vimrc/"/>
      <url>/2020/07/25/vimrc/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>Vim 即 Vi Improved，它的前身是 Vi。它是一個十分強大的編輯器，優點如下：</p><ul><li>不需要滑鼠，純鍵盤</li><li>Linux 系統預裝</li><li>鍵盤命令肌肉記憶之後，效率非常高</li></ul><p>但是，它的配置許許多多，讓人難以記住。我正好要在新電腦上配置它，故寫此文。</p><h3 id="為什麼不用別人現成的"><a class="markdownIt-Anchor" href="#為什麼不用別人現成的"></a> 為什麼不用別人現成的？</h3><ol><li>自己的配置更順手，自己更熟悉。</li><li>瞭解 Vim Script，可以自己造外掛</li><li>etc.</li></ol><h2 id="不會-vim-怎麼辦"><a class="markdownIt-Anchor" href="#不會-vim-怎麼辦"></a> 不會 Vim 怎麼辦</h2><p>啊這…… 🤣</p><p>你可以試著在命令列輸入 <code>vimtutor</code>。</p><h2 id="vimrc-的位置"><a class="markdownIt-Anchor" href="#vimrc-的位置"></a> vimrc 的位置</h2><p>本篇文章以新安裝的 vim 為例。Vim 的配置檔案叫做 <code>vimrc</code>。在 Mac、Linux 等系統上，位於 <code>~/.vimrc</code>。在 Windows 系統中，它叫做 <code>_vimrc</code>，但是同樣位於 Home 目錄中。</p><p>全域性的配置，在 Mac、Linux 等系統上，位於 <code>/etc/vimrc</code>。在 Windows 系統上，它儲存在 Vim 安裝目錄，同樣叫做 <code>vimrc</code>。</p><h2 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h2><p>一個什麼也沒有配置的 Vim，開啟可能是這樣的:</p><p><img src="https://i.loli.net/2020/07/25/VSRZMUnjOfDzq8b.png" alt="image.png" /></p><p>下面各配置，你可以新增自己想要的。以下所有配置都可以在命令模式輸入，臨時啟用或關閉。</p><h3 id="基本"><a class="markdownIt-Anchor" href="#基本"></a> 基本</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> nocompatible <span class="comment">&quot; 不使用 Vi 相容模式</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="keyword">on</span>  <span class="comment">&quot; 檢測檔案型別，載入外掛</span></span><br><span class="line"><span class="keyword">syntax</span> <span class="keyword">on</span> <span class="comment">&quot; 開啟語法高亮</span></span><br><span class="line"><span class="keyword">set</span> showmode <span class="comment">&quot; 顯示當前模式</span></span><br><span class="line"><span class="keyword">set</span> showcmd <span class="comment">&quot; 在底部顯示命令</span></span><br><span class="line"><span class="keyword">set</span> mouse=<span class="keyword">a</span> <span class="comment">&quot; 啟用滑鼠，不建議開啟</span></span><br><span class="line"><span class="keyword">set</span> encoding=utf-<span class="number">8</span>  </span><br><span class="line"><span class="keyword">set</span> t_Co=<span class="number">256</span></span><br><span class="line"><span class="keyword">filetype</span> <span class="built_in">indent</span> <span class="keyword">on</span> <span class="comment">&quot; 根據檔案型別，不同縮排</span></span><br></pre></td></tr></table></figure><h3 id="縮排"><a class="markdownIt-Anchor" href="#縮排"></a> 縮排</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> autoindent <span class="comment">&quot; 自動縮排</span></span><br><span class="line"><span class="keyword">set</span> tabstop=<span class="number">4</span> <span class="comment">&quot; tab佔4個空格</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span> <span class="comment">&quot; 在文字上按下&gt;&gt;（增加一級縮排）、&lt;&lt;（取消一級縮排）或者==（取消全部縮排）時，每一級的空格數。</span></span><br><span class="line"><span class="keyword">set</span> expandtab <span class="comment">&quot; tab自動轉為空格</span></span><br><span class="line"><span class="keyword">set</span> softtabstop=<span class="number">2</span> <span class="comment">&quot; tab轉為多少空格</span></span><br></pre></td></tr></table></figure><h3 id="介面"><a class="markdownIt-Anchor" href="#介面"></a> 介面</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">number</span> <span class="comment">&quot; 顯示行號</span></span><br><span class="line"><span class="keyword">set</span> relativenumber <span class="comment">&quot; 顯示游標所在行當前行號，其他都顯示為相對於當前行的行號</span></span><br><span class="line"><span class="keyword">set</span> cursorline <span class="comment">&quot; 當前行高亮</span></span><br><span class="line"><span class="keyword">colorscheme</span> default <span class="comment">&quot; 設定顏色主題為 default，顏色主題儲存在 Home 目錄的 .vim/colors 資料夾，Windows 下叫做 vimfiles/colors</span></span><br><span class="line"><span class="keyword">set</span> wrap <span class="comment">&quot; 設定多於行寬的文字自動分拆為多行顯示，反之: set nowrap</span></span><br><span class="line"><span class="keyword">set</span> linebreak <span class="comment">&quot; 遇到特殊的符號才折行</span></span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span> <span class="comment">&quot; 是否顯示狀態列。0 不顯示，1 只在多視窗時顯示，2 顯示。</span></span><br><span class="line"><span class="keyword">set</span> ruler <span class="comment">&quot; 狀態列顯示游標位置</span></span><br><span class="line"><span class="keyword">set</span> showmatch <span class="comment">&quot; 高亮括號</span></span><br></pre></td></tr></table></figure><h3 id="搜尋"><a class="markdownIt-Anchor" href="#搜尋"></a> 搜尋</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hlsearch <span class="comment">&quot; 高亮搜尋結果</span></span><br><span class="line"><span class="keyword">set</span> incsearch <span class="comment">&quot; 搜尋輸入時，即時跳轉</span></span><br><span class="line"><span class="keyword">set</span> ignorecase <span class="comment">&quot; 忽略大小寫</span></span><br></pre></td></tr></table></figure><h3 id="更多"><a class="markdownIt-Anchor" href="#更多"></a> 更多</h3><p>Vim 配置不止這些，我只介紹了一些常用的。Vim Script 值得學習，學完了還可以自己開發外掛。</p><h2 id="題外話-外掛"><a class="markdownIt-Anchor" href="#題外話-外掛"></a> 題外話 - 外掛</h2><p>外掛管理，Vim 雖然新增了自帶的，但我還是很推薦 <a href="https://github.com/junegunn/vim-plug">Vim-Plug</a></p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 軟體 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 編輯器 </tag>
            
            <tag> Vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NextCloud - DIY NAS 解決方案</title>
      <link href="/2020/07/23/nextcloud/"/>
      <url>/2020/07/23/nextcloud/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>我之前給家中的伺服器做了一個 WebDAV 功能，帶有不堪入目的 UI 和難以使用的功能。而且配置起來並不簡單。一直想要改進，但是卻一直沒時間。最近有空了，便開始尋找替代品。</p><p>查了幾下 GitHub，找到了一個標星 10k+ 的專案 —— <a href="https://github.com/nextcloud/">NextCloud</a>。瞭解了一下，NextCloud 是一個擁有 <strong>全平臺客戶端</strong>，支援 <strong>WebDAV</strong>，而且 <strong>外掛化</strong>，可以 <strong>多使用者</strong> 使用的私有云儲存網盤專案。不僅如此，它還支援共享、版本控制、團隊協作等功能。外掛化讓它擁有了類似 Markdown 線上編輯，Draw-io 線上編輯，顯示 RAW 檔案的功能。</p><p>而且，我發現它支援 Docker，這無疑簡化了我們配置的步驟。</p><p>那麼，我們開始吧！</p><h2 id="docker-配置"><a class="markdownIt-Anchor" href="#docker-配置"></a> Docker 配置</h2><p>Docker 安裝很簡單，為了安裝快速，你可以參考清華大學開源映象站給出的 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/docker-ce/">文件</a>。如果你已經安裝了 Docker, 那麼可以忽略這一步。</p><p>更換映象也是讓你更快體驗的必不可少的一步，修改 <code>/etc/docker/daemon.json</code> 檔案</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;http://registry.docker-cn.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;http://docker.mirrors.ustc.edu.cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;http://hub-mirror.c.163.com&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;insecure-registries&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;registry.docker-cn.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;docker.mirrors.ustc.edu.cn&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="安裝-nextcloud"><a class="markdownIt-Anchor" href="#安裝-nextcloud"></a> 安裝 NextCloud</h2><p>執行如下命令即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d \</span><br><span class="line">        --name nextcloud \</span><br><span class="line">        -p 8000:80 \</span><br><span class="line">        -v &lt;資料儲存位置&gt;:/var/www/html \</span><br><span class="line">        nextcloud</span><br></pre></td></tr></table></figure><p>如果遇到如下問題：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</span><br></pre></td></tr></table></figure><p>可以執行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker.service</span><br></pre></td></tr></table></figure><h2 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h2><p>配置這一部分很簡單，不用解釋了。</p><p>選擇資料庫時，使用量小可以選擇 SQLite，但是並不推薦。</p><h2 id="結語"><a class="markdownIt-Anchor" href="#結語"></a> 結語</h2><p>NextCloud 還是非常穩定的，基本配置完之後不會遇到什麼問題。而且原生支援中文，只需要在設定中設定一下就可以了。</p><p>我主要用它儲存我的照片，攝影還有一些不需要經常檢視的檔案。由於自己伺服器效能不錯，用起來很流暢，完全沒必要買現成的，硬碟不夠再買一個即可。</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 軟體 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sudo shutdown -r now</title>
      <link href="/2020/07/22/helloworld/"/>
      <url>/2020/07/22/helloworld/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>你可能會驚奇地發現部落格上面以前的文章全不見了。<strong>最近我對我部落格進行了一次大清掃</strong>。</p><p><strong>tl;dr</strong></p><p>前幾天，我突然發現自己的部落格上面全是水文（以前就知道，懶得弄），心裡總覺得過不去。所以，我下定決心，準備重新來過。這種感覺很好，當<code>_posts</code>目錄空無一物時，我的心也釋然了。</p><p>之前我所有的文章，要麼是抄襲的，要麼是很水的那種。<strong>在這裡，我承諾，以後不再會有這種不可饒恕的情況發生了</strong>。這樣做我自己心裡也總是想著缺點什麼。倖幸苦苦修改的自定義hexo主題（沒錯，我把 <a href="https://github.com/probberechts/hexo-theme-cactus">hexo-theme-cactus</a> 修改了很多，支援了 RSS，還弄了些 UI 改進，配置了 Valine.js，etc.），結果呢？上面全是水文！？這……</p><p>那麼之前的文章都去哪裡了呢？我並沒有刪除，而是把它們放置在了 <code>Draft</code> 目錄下面，當然，你們看不到。<strong>手動狗頭</strong></p><p>讓我們重新認識對方，執行一次<code>sudo shutdown -r now</code>！</p>]]></content>
      
      
      <categories>
          
          <category> 中文 | 雜文 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sudo shutdown -r now</title>
      <link href="/2020/07/21/hello-world/"/>
      <url>/2020/07/21/hello-world/</url>
      
        <content type="html"><![CDATA[<p>You may be puzzled that all the blog posts are gone. This is because I had my blog cleaned up a few days ago.</p><span id="more"></span><p><strong>tl;dr</strong></p><p>The other day, I suddenly found that my blog was occupied by articles that are not helpful at all. Seeing these, I was determined to restart my blog. It was so great a feeling. The <code>_posts</code> directory empty, I got relieved.</p><p>Before this, my posts are either “stolen” from the others or just full of nonsense. Here, I am committed to not making such an unforgivable thing happen any longer. After all, the blog was completely built by myself — the about page, the configuration of the theme, the font, etc. were all made through effort. I had modified the theme a lot, adjusting the blog to be good-looking. And what about the result? Filled with trash!!! lol. What on earth am I doing!!!</p><p>So, where the past blog posts? Actually, I did not really delete them. I just placed them in the Draft directory. Of course, you are inaccessible to them. lol.</p><p>Let’s get to know each other again. Run the code <code>sudo shutdown -r</code> now!</p>]]></content>
      
      
      <categories>
          
          <category> EN | Essay </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Misc </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
